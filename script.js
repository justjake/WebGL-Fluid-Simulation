/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./script.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./audio.ts":
/*!******************!*\
  !*** ./audio.ts ***!
  \******************/
/*! exports provided: SongPlayer, AudioArrays */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SongPlayer\", function() { return SongPlayer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AudioArrays\", function() { return AudioArrays; });\n/* harmony import */ var web_audio_analyser__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! web-audio-analyser */ \"./node_modules/web-audio-analyser/index.js\");\n/* harmony import */ var web_audio_analyser__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(web_audio_analyser__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _soundcloud_badge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./soundcloud-badge */ \"./soundcloud-badge.js\");\n/* harmony import */ var _soundcloud_badge__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_soundcloud_badge__WEBPACK_IMPORTED_MODULE_1__);\n/**\n * Audio support\n */\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n\n\nfunction SoundcloudBadgePromise(opts) {\n    return new Promise((resolve, reject) => {\n        _soundcloud_badge__WEBPACK_IMPORTED_MODULE_1___default()(opts, (err, src, data, div) => {\n            if (err) {\n                return reject(err);\n            }\n            resolve({\n                src,\n                data,\n                div,\n            });\n        });\n    });\n}\nconst fftSize = 256;\nclass SongPlayer {\n    constructor() {\n        this.audio = new Audio();\n        this.div = undefined;\n        this.analyzer = undefined;\n        this.audio.crossOrigin = 'Anonymous';\n        this.audio.addEventListener('ended', () => {\n            console.log('looping da soundz');\n            this.audio.currentTime = 0;\n            this.audio.play();\n        });\n    }\n    setSoundcloudUrl(song) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // Stop\n            if (this.div) {\n                this.div.remove();\n                this.div = undefined;\n            }\n            this.audio.currentTime = 0;\n            this.audio.src = '';\n            // Load data\n            const { src, div } = yield SoundcloudBadgePromise({\n                // Soundcloud isn't accepting new API access requests!?\n                // Stolen from http://hughsk.io/moire-1/,\n                client_id: 'ded451c6d8f9ff1c62f72523f49dab68',\n                song,\n                dark: false,\n                getFonts: true,\n            });\n            this.audio.src = src;\n            this.audio.play();\n            this.div = div;\n            // Go\n            if (!this.analyzer) {\n                const analyzer = web_audio_analyser__WEBPACK_IMPORTED_MODULE_0___default()(this.audio);\n                analyzer.analyser.fftSize = fftSize;\n                console.log('freq bin count', analyzer.analyser.frequencyBinCount);\n                this.wav = new AudioArrays(analyzer.analyser.frequencyBinCount);\n                this.freq = new AudioArrays(analyzer.analyser.frequencyBinCount);\n                this.analyzer = analyzer;\n            }\n        });\n    }\n    update() {\n        if (this.analyzer && this.wav && this.freq) {\n            this.freq.swap();\n            this.analyzer.frequencies(this.freq.current);\n            this.wav.swap();\n            this.analyzer.waveform(this.wav.current);\n            return { wav: this.wav, freq: this.freq };\n        }\n        return undefined;\n    }\n}\nclass AudioArrays {\n    constructor(buckets) {\n        this.buckets = buckets;\n        this.current = new Uint8Array(this.buckets);\n        this.prev = new Uint8Array(this.buckets);\n    }\n    swap() {\n        const prev = this.current;\n        this.current = prev;\n        this.prev = prev;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hdWRpby50cy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2F1ZGlvLnRzP2VmOGMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBdWRpbyBzdXBwb3J0XG4gKi9cblxuaW1wb3J0IGNyZWF0ZUFuYWx5emVyLCB7IFdlYkF1ZGlvQW5hbHlzZXIgfSBmcm9tICd3ZWItYXVkaW8tYW5hbHlzZXInXG5pbXBvcnQgU291bmRjbG91ZEJhZGdlLCB7IFNvdW5kY2xvdWRCYWRnZU9wdGlvbnMgfSBmcm9tICcuL3NvdW5kY2xvdWQtYmFkZ2UnXG5cbmZ1bmN0aW9uIFNvdW5kY2xvdWRCYWRnZVByb21pc2UoXG4gIG9wdHM6IFNvdW5kY2xvdWRCYWRnZU9wdGlvbnNcbik6IFByb21pc2U8eyBzcmM6IHN0cmluZzsgZGF0YTogdW5rbm93bjsgZGl2OiBIVE1MRGl2RWxlbWVudCB9PiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgU291bmRjbG91ZEJhZGdlKG9wdHMsIChlcnIsIHNyYywgZGF0YSwgZGl2KSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJldHVybiByZWplY3QoZXJyKVxuICAgICAgfVxuXG4gICAgICByZXNvbHZlKHtcbiAgICAgICAgc3JjLFxuICAgICAgICBkYXRhLFxuICAgICAgICBkaXYsXG4gICAgICB9KVxuICAgIH0pXG4gIH0pXG59XG5cbmNvbnN0IGZmdFNpemUgPSAyNTZcblxuZXhwb3J0IGNsYXNzIFNvbmdQbGF5ZXIge1xuICBhdWRpbyA9IG5ldyBBdWRpbygpXG4gIGRpdjogSFRNTERpdkVsZW1lbnQgfCB1bmRlZmluZWQgPSB1bmRlZmluZWRcbiAgYW5hbHl6ZXI6IFdlYkF1ZGlvQW5hbHlzZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWRcbiAgZnJlcTogQXVkaW9BcnJheXMgfCB1bmRlZmluZWRcbiAgd2F2OiBBdWRpb0FycmF5cyB8IHVuZGVmaW5lZFxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuYXVkaW8uY3Jvc3NPcmlnaW4gPSAnQW5vbnltb3VzJ1xuICAgIHRoaXMuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcignZW5kZWQnLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnbG9vcGluZyBkYSBzb3VuZHonKVxuICAgICAgdGhpcy5hdWRpby5jdXJyZW50VGltZSA9IDBcbiAgICAgIHRoaXMuYXVkaW8ucGxheSgpXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHNldFNvdW5kY2xvdWRVcmwoc29uZzogc3RyaW5nKSB7XG4gICAgLy8gU3RvcFxuICAgIGlmICh0aGlzLmRpdikge1xuICAgICAgdGhpcy5kaXYucmVtb3ZlKClcbiAgICAgIHRoaXMuZGl2ID0gdW5kZWZpbmVkXG4gICAgfVxuICAgIHRoaXMuYXVkaW8uY3VycmVudFRpbWUgPSAwXG4gICAgdGhpcy5hdWRpby5zcmMgPSAnJ1xuXG4gICAgLy8gTG9hZCBkYXRhXG4gICAgY29uc3QgeyBzcmMsIGRpdiB9ID0gYXdhaXQgU291bmRjbG91ZEJhZGdlUHJvbWlzZSh7XG4gICAgICAvLyBTb3VuZGNsb3VkIGlzbid0IGFjY2VwdGluZyBuZXcgQVBJIGFjY2VzcyByZXF1ZXN0cyE/XG4gICAgICAvLyBTdG9sZW4gZnJvbSBodHRwOi8vaHVnaHNrLmlvL21vaXJlLTEvLFxuICAgICAgY2xpZW50X2lkOiAnZGVkNDUxYzZkOGY5ZmYxYzYyZjcyNTIzZjQ5ZGFiNjgnLFxuICAgICAgc29uZyxcbiAgICAgIGRhcms6IGZhbHNlLFxuICAgICAgZ2V0Rm9udHM6IHRydWUsXG4gICAgfSlcbiAgICB0aGlzLmF1ZGlvLnNyYyA9IHNyY1xuICAgIHRoaXMuYXVkaW8ucGxheSgpXG5cbiAgICB0aGlzLmRpdiA9IGRpdlxuXG4gICAgLy8gR29cbiAgICBpZiAoIXRoaXMuYW5hbHl6ZXIpIHtcbiAgICAgIGNvbnN0IGFuYWx5emVyID0gY3JlYXRlQW5hbHl6ZXIodGhpcy5hdWRpbylcbiAgICAgIGFuYWx5emVyLmFuYWx5c2VyLmZmdFNpemUgPSBmZnRTaXplXG4gICAgICBjb25zb2xlLmxvZygnZnJlcSBiaW4gY291bnQnLCBhbmFseXplci5hbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudClcbiAgICAgIHRoaXMud2F2ID0gbmV3IEF1ZGlvQXJyYXlzKGFuYWx5emVyLmFuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50KVxuICAgICAgdGhpcy5mcmVxID0gbmV3IEF1ZGlvQXJyYXlzKGFuYWx5emVyLmFuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50KVxuICAgICAgdGhpcy5hbmFseXplciA9IGFuYWx5emVyXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGlmICh0aGlzLmFuYWx5emVyICYmIHRoaXMud2F2ICYmIHRoaXMuZnJlcSkge1xuICAgICAgdGhpcy5mcmVxLnN3YXAoKVxuICAgICAgdGhpcy5hbmFseXplci5mcmVxdWVuY2llcyh0aGlzLmZyZXEuY3VycmVudClcbiAgICAgIHRoaXMud2F2LnN3YXAoKVxuICAgICAgdGhpcy5hbmFseXplci53YXZlZm9ybSh0aGlzLndhdi5jdXJyZW50KVxuICAgICAgcmV0dXJuIHsgd2F2OiB0aGlzLndhdiwgZnJlcTogdGhpcy5mcmVxIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBdWRpb0FycmF5cyB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBidWNrZXRzOiBudW1iZXIpIHt9XG4gIGN1cnJlbnQgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1Y2tldHMpXG4gIHByZXYgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1Y2tldHMpXG4gIHN3YXAoKSB7XG4gICAgY29uc3QgcHJldiA9IHRoaXMuY3VycmVudFxuICAgIHRoaXMuY3VycmVudCA9IHByZXZcbiAgICB0aGlzLnByZXYgPSBwcmV2XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFFQTs7Ozs7Ozs7OztBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQU9BO0FBTkE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./audio.ts\n");

/***/ }),

/***/ "./node_modules/global/window.js":
/*!***************************************!*\
  !*** ./node_modules/global/window.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global) {if (typeof window !== \"undefined\") {\n    module.exports = window\n} else if (typeof global !== \"undefined\") {\n    module.exports = global\n} else {\n    module.exports = {}\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZ2xvYmFsL3dpbmRvdy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9nbG9iYWwvd2luZG93LmpzP2JlMDkiXSwic291cmNlc0NvbnRlbnQiOlsiaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHdpbmRvd1xufSBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBnbG9iYWxcbn0gZWxzZSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7fVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/global/window.js\n");

/***/ }),

/***/ "./node_modules/google-fonts/index.js":
/*!********************************************!*\
  !*** ./node_modules/google-fonts/index.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = asString\nmodule.exports.add = append\n\nfunction asString(fonts) {\n  var href = getHref(fonts)\n  return '<link href=\"' + href + '\" rel=\"stylesheet\" type=\"text/css\">'\n}\n\nfunction asElement(fonts) {\n  var href = getHref(fonts)\n  var link = document.createElement('link')\n  link.setAttribute('href', href)\n  link.setAttribute('rel', 'stylesheet')\n  link.setAttribute('type', 'text/css')\n  return link\n}\n\nfunction getHref(fonts) {\n  var family = Object.keys(fonts).map(function(name) {\n    var details = fonts[name]\n    name = name.replace(/\\s+/, '+')\n    return typeof details === 'boolean'\n      ? name\n      : name + ':' + makeArray(details).join(',')\n  }).join('|')\n\n  return 'http://fonts.googleapis.com/css?family=' + family\n}\n\nfunction append(fonts) {\n  var link = asElement(fonts)\n  document.head.appendChild(link)\n  return link\n}\n\nfunction makeArray(arr) {\n  return Array.isArray(arr) ? arr : [arr]\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvZ29vZ2xlLWZvbnRzL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2dvb2dsZS1mb250cy9pbmRleC5qcz8yNjhiIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gYXNTdHJpbmdcbm1vZHVsZS5leHBvcnRzLmFkZCA9IGFwcGVuZFxuXG5mdW5jdGlvbiBhc1N0cmluZyhmb250cykge1xuICB2YXIgaHJlZiA9IGdldEhyZWYoZm9udHMpXG4gIHJldHVybiAnPGxpbmsgaHJlZj1cIicgKyBocmVmICsgJ1wiIHJlbD1cInN0eWxlc2hlZXRcIiB0eXBlPVwidGV4dC9jc3NcIj4nXG59XG5cbmZ1bmN0aW9uIGFzRWxlbWVudChmb250cykge1xuICB2YXIgaHJlZiA9IGdldEhyZWYoZm9udHMpXG4gIHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpXG4gIGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZilcbiAgbGluay5zZXRBdHRyaWJ1dGUoJ3JlbCcsICdzdHlsZXNoZWV0JylcbiAgbGluay5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dC9jc3MnKVxuICByZXR1cm4gbGlua1xufVxuXG5mdW5jdGlvbiBnZXRIcmVmKGZvbnRzKSB7XG4gIHZhciBmYW1pbHkgPSBPYmplY3Qua2V5cyhmb250cykubWFwKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgZGV0YWlscyA9IGZvbnRzW25hbWVdXG4gICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvXFxzKy8sICcrJylcbiAgICByZXR1cm4gdHlwZW9mIGRldGFpbHMgPT09ICdib29sZWFuJ1xuICAgICAgPyBuYW1lXG4gICAgICA6IG5hbWUgKyAnOicgKyBtYWtlQXJyYXkoZGV0YWlscykuam9pbignLCcpXG4gIH0pLmpvaW4oJ3wnKVxuXG4gIHJldHVybiAnaHR0cDovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9JyArIGZhbWlseVxufVxuXG5mdW5jdGlvbiBhcHBlbmQoZm9udHMpIHtcbiAgdmFyIGxpbmsgPSBhc0VsZW1lbnQoZm9udHMpXG4gIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluaylcbiAgcmV0dXJuIGxpbmtcbn1cblxuZnVuY3Rpb24gbWFrZUFycmF5KGFycikge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpID8gYXJyIDogW2Fycl1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/google-fonts/index.js\n");

/***/ }),

/***/ "./node_modules/insert-css/index.js":
/*!******************************************!*\
  !*** ./node_modules/insert-css/index.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var inserted = [];\n\nmodule.exports = function (css) {\n    if (inserted.indexOf(css) >= 0) return;\n    inserted.push(css);\n    \n    var elem = document.createElement('style');\n    var text = document.createTextNode(css);\n    elem.appendChild(text);\n    \n    if (document.head.childNodes.length) {\n        document.head.insertBefore(elem, document.head.childNodes[0]);\n    }\n    else {\n        document.head.appendChild(elem);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaW5zZXJ0LWNzcy9pbmRleC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pbnNlcnQtY3NzL2luZGV4LmpzPzFhZWYiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGluc2VydGVkID0gW107XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzcykge1xuICAgIGlmIChpbnNlcnRlZC5pbmRleE9mKGNzcykgPj0gMCkgcmV0dXJuO1xuICAgIGluc2VydGVkLnB1c2goY3NzKTtcbiAgICBcbiAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgdmFyIHRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuICAgIGVsZW0uYXBwZW5kQ2hpbGQodGV4dCk7XG4gICAgXG4gICAgaWYgKGRvY3VtZW50LmhlYWQuY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5pbnNlcnRCZWZvcmUoZWxlbSwgZG9jdW1lbnQuaGVhZC5jaGlsZE5vZGVzWzBdKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoZWxlbSk7XG4gICAgfVxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/insert-css/index.js\n");

/***/ }),

/***/ "./node_modules/minstache/index.js":
/*!*****************************************!*\
  !*** ./node_modules/minstache/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("\n/**\n * Expose `render()`.`\n */\n\nexports = module.exports = render;\n\n/**\n * Expose `compile()`.\n */\n\nexports.compile = compile;\n\n/**\n * Render the given mustache `str` with `obj`.\n *\n * @param {String} str\n * @param {Object} obj\n * @return {String}\n * @api public\n */\n\nfunction render(str, obj) {\n  obj = obj || {};\n  var fn = compile(str);\n  return fn(obj);\n}\n\n/**\n * Compile the given `str` to a `Function`.\n *\n * @param {String} str\n * @return {Function}\n * @api public\n */\n\nfunction compile(str) {\n  var js = [];\n  var toks = parse(str);\n  var tok;\n\n  for (var i = 0; i < toks.length; ++i) {\n    tok = toks[i];\n    if (i % 2 == 0) {\n      js.push('\"' + tok.replace(/\"/g, '\\\\\"') + '\"');\n    } else {\n      switch (tok[0]) {\n        case '/':\n          tok = tok.slice(1);\n          js.push(') + ');\n          break;\n        case '^':\n          tok = tok.slice(1);\n          assertProperty(tok);\n          js.push(' + section(obj, \"' + tok + '\", true, ');\n          break;\n        case '#':\n          tok = tok.slice(1);\n          assertProperty(tok);\n          js.push(' + section(obj, \"' + tok + '\", false, ');\n          break;\n        case '!':\n          tok = tok.slice(1);\n          assertProperty(tok);\n          js.push(' + obj.' + tok + ' + ');\n          break;\n        default:\n          assertProperty(tok);\n          js.push(' + escape(obj.' + tok + ') + ');\n      }\n    }\n  }\n\n  js = '\\n'\n    + indent(escape.toString()) + ';\\n\\n'\n    + indent(section.toString()) + ';\\n\\n'\n    + '  return ' + js.join('').replace(/\\n/g, '\\\\n');\n\n  return new Function('obj', js);\n}\n\n/**\n * Assert that `prop` is a valid property.\n *\n * @param {String} prop\n * @api private\n */\n\nfunction assertProperty(prop) {\n  if (!prop.match(/^[\\w.]+$/)) throw new Error('invalid property \"' + prop + '\"');\n}\n\n/**\n * Parse `str`.\n *\n * @param {String} str\n * @return {Array}\n * @api private\n */\n\nfunction parse(str) {\n  return str.split(/\\{\\{|\\}\\}/);\n}\n\n/**\n * Indent `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction indent(str) {\n  return str.replace(/^/gm, '  ');\n}\n\n/**\n * Section handler.\n *\n * @param {Object} context obj\n * @param {String} prop\n * @param {String} str\n * @param {Boolean} negate\n * @api private\n */\n\nfunction section(obj, prop, negate, str) {\n  var val = obj[prop];\n  if ('function' == typeof val) return val.call(obj, str);\n  if (negate) val = !val;\n  if (val) return str;\n  return '';\n}\n\n/**\n * Escape the given `html`.\n *\n * @param {String} html\n * @return {String}\n * @api private\n */\n\nfunction escape(html) {\n  return String(html)\n    .replace(/&/g, '&amp;')\n    .replace(/\"/g, '&quot;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbWluc3RhY2hlL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL21pbnN0YWNoZS9pbmRleC5qcz9kMWRiIl0sInNvdXJjZXNDb250ZW50IjpbIlxuLyoqXG4gKiBFeHBvc2UgYHJlbmRlcigpYC5gXG4gKi9cblxuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVuZGVyO1xuXG4vKipcbiAqIEV4cG9zZSBgY29tcGlsZSgpYC5cbiAqL1xuXG5leHBvcnRzLmNvbXBpbGUgPSBjb21waWxlO1xuXG4vKipcbiAqIFJlbmRlciB0aGUgZ2l2ZW4gbXVzdGFjaGUgYHN0cmAgd2l0aCBgb2JqYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIHJlbmRlcihzdHIsIG9iaikge1xuICBvYmogPSBvYmogfHwge307XG4gIHZhciBmbiA9IGNvbXBpbGUoc3RyKTtcbiAgcmV0dXJuIGZuKG9iaik7XG59XG5cbi8qKlxuICogQ29tcGlsZSB0aGUgZ2l2ZW4gYHN0cmAgdG8gYSBgRnVuY3Rpb25gLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlKHN0cikge1xuICB2YXIganMgPSBbXTtcbiAgdmFyIHRva3MgPSBwYXJzZShzdHIpO1xuICB2YXIgdG9rO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rcy5sZW5ndGg7ICsraSkge1xuICAgIHRvayA9IHRva3NbaV07XG4gICAgaWYgKGkgJSAyID09IDApIHtcbiAgICAgIGpzLnB1c2goJ1wiJyArIHRvay5yZXBsYWNlKC9cIi9nLCAnXFxcXFwiJykgKyAnXCInKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoICh0b2tbMF0pIHtcbiAgICAgICAgY2FzZSAnLyc6XG4gICAgICAgICAgdG9rID0gdG9rLnNsaWNlKDEpO1xuICAgICAgICAgIGpzLnB1c2goJykgKyAnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnXic6XG4gICAgICAgICAgdG9rID0gdG9rLnNsaWNlKDEpO1xuICAgICAgICAgIGFzc2VydFByb3BlcnR5KHRvayk7XG4gICAgICAgICAganMucHVzaCgnICsgc2VjdGlvbihvYmosIFwiJyArIHRvayArICdcIiwgdHJ1ZSwgJyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJyMnOlxuICAgICAgICAgIHRvayA9IHRvay5zbGljZSgxKTtcbiAgICAgICAgICBhc3NlcnRQcm9wZXJ0eSh0b2spO1xuICAgICAgICAgIGpzLnB1c2goJyArIHNlY3Rpb24ob2JqLCBcIicgKyB0b2sgKyAnXCIsIGZhbHNlLCAnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnISc6XG4gICAgICAgICAgdG9rID0gdG9rLnNsaWNlKDEpO1xuICAgICAgICAgIGFzc2VydFByb3BlcnR5KHRvayk7XG4gICAgICAgICAganMucHVzaCgnICsgb2JqLicgKyB0b2sgKyAnICsgJyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYXNzZXJ0UHJvcGVydHkodG9rKTtcbiAgICAgICAgICBqcy5wdXNoKCcgKyBlc2NhcGUob2JqLicgKyB0b2sgKyAnKSArICcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGpzID0gJ1xcbidcbiAgICArIGluZGVudChlc2NhcGUudG9TdHJpbmcoKSkgKyAnO1xcblxcbidcbiAgICArIGluZGVudChzZWN0aW9uLnRvU3RyaW5nKCkpICsgJztcXG5cXG4nXG4gICAgKyAnICByZXR1cm4gJyArIGpzLmpvaW4oJycpLnJlcGxhY2UoL1xcbi9nLCAnXFxcXG4nKTtcblxuICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdvYmonLCBqcyk7XG59XG5cbi8qKlxuICogQXNzZXJ0IHRoYXQgYHByb3BgIGlzIGEgdmFsaWQgcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGFzc2VydFByb3BlcnR5KHByb3ApIHtcbiAgaWYgKCFwcm9wLm1hdGNoKC9eW1xcdy5dKyQvKSkgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHByb3BlcnR5IFwiJyArIHByb3AgKyAnXCInKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBgc3RyYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHN0cikge1xuICByZXR1cm4gc3RyLnNwbGl0KC9cXHtcXHt8XFx9XFx9Lyk7XG59XG5cbi8qKlxuICogSW5kZW50IGBzdHJgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGluZGVudChzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eL2dtLCAnICAnKTtcbn1cblxuLyoqXG4gKiBTZWN0aW9uIGhhbmRsZXIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQgb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtCb29sZWFufSBuZWdhdGVcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHNlY3Rpb24ob2JqLCBwcm9wLCBuZWdhdGUsIHN0cikge1xuICB2YXIgdmFsID0gb2JqW3Byb3BdO1xuICBpZiAoJ2Z1bmN0aW9uJyA9PSB0eXBlb2YgdmFsKSByZXR1cm4gdmFsLmNhbGwob2JqLCBzdHIpO1xuICBpZiAobmVnYXRlKSB2YWwgPSAhdmFsO1xuICBpZiAodmFsKSByZXR1cm4gc3RyO1xuICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogRXNjYXBlIHRoZSBnaXZlbiBgaHRtbGAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGVzY2FwZShodG1sKSB7XG4gIHJldHVybiBTdHJpbmcoaHRtbClcbiAgICAucmVwbGFjZSgvJi9nLCAnJmFtcDsnKVxuICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcbiAgICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXG4gICAgLnJlcGxhY2UoLz4vZywgJyZndDsnKTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/minstache/index.js\n");

/***/ }),

/***/ "./node_modules/querystring-es3/decode.js":
/*!************************************************!*\
  !*** ./node_modules/querystring-es3/decode.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2RlY29kZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9xdWVyeXN0cmluZy1lczMvZGVjb2RlLmpzPzkxZGQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxuLy8gSWYgb2JqLmhhc093blByb3BlcnR5IGhhcyBiZWVuIG92ZXJyaWRkZW4sIHRoZW4gY2FsbGluZ1xuLy8gb2JqLmhhc093blByb3BlcnR5KHByb3ApIHdpbGwgYnJlYWsuXG4vLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9qb3llbnQvbm9kZS9pc3N1ZXMvMTcwN1xuZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBwcm9wKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihxcywgc2VwLCBlcSwgb3B0aW9ucykge1xuICBzZXAgPSBzZXAgfHwgJyYnO1xuICBlcSA9IGVxIHx8ICc9JztcbiAgdmFyIG9iaiA9IHt9O1xuXG4gIGlmICh0eXBlb2YgcXMgIT09ICdzdHJpbmcnIHx8IHFzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBvYmo7XG4gIH1cblxuICB2YXIgcmVnZXhwID0gL1xcKy9nO1xuICBxcyA9IHFzLnNwbGl0KHNlcCk7XG5cbiAgdmFyIG1heEtleXMgPSAxMDAwO1xuICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5tYXhLZXlzID09PSAnbnVtYmVyJykge1xuICAgIG1heEtleXMgPSBvcHRpb25zLm1heEtleXM7XG4gIH1cblxuICB2YXIgbGVuID0gcXMubGVuZ3RoO1xuICAvLyBtYXhLZXlzIDw9IDAgbWVhbnMgdGhhdCB3ZSBzaG91bGQgbm90IGxpbWl0IGtleXMgY291bnRcbiAgaWYgKG1heEtleXMgPiAwICYmIGxlbiA+IG1heEtleXMpIHtcbiAgICBsZW4gPSBtYXhLZXlzO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIHZhciB4ID0gcXNbaV0ucmVwbGFjZShyZWdleHAsICclMjAnKSxcbiAgICAgICAgaWR4ID0geC5pbmRleE9mKGVxKSxcbiAgICAgICAga3N0ciwgdnN0ciwgaywgdjtcblxuICAgIGlmIChpZHggPj0gMCkge1xuICAgICAga3N0ciA9IHguc3Vic3RyKDAsIGlkeCk7XG4gICAgICB2c3RyID0geC5zdWJzdHIoaWR4ICsgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtzdHIgPSB4O1xuICAgICAgdnN0ciA9ICcnO1xuICAgIH1cblxuICAgIGsgPSBkZWNvZGVVUklDb21wb25lbnQoa3N0cik7XG4gICAgdiA9IGRlY29kZVVSSUNvbXBvbmVudCh2c3RyKTtcblxuICAgIGlmICghaGFzT3duUHJvcGVydHkob2JqLCBrKSkge1xuICAgICAgb2JqW2tdID0gdjtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkob2JqW2tdKSkge1xuICAgICAgb2JqW2tdLnB1c2godik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9ialtrXSA9IFtvYmpba10sIHZdO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvYmo7XG59O1xuXG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKHhzKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeHMpID09PSAnW29iamVjdCBBcnJheV0nO1xufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/querystring-es3/decode.js\n");

/***/ }),

/***/ "./node_modules/querystring-es3/encode.js":
/*!************************************************!*\
  !*** ./node_modules/querystring-es3/encode.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2VuY29kZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9xdWVyeXN0cmluZy1lczMvZW5jb2RlLmpzP2UwOTkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHN0cmluZ2lmeVByaW1pdGl2ZSA9IGZ1bmN0aW9uKHYpIHtcbiAgc3dpdGNoICh0eXBlb2Ygdikge1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICByZXR1cm4gdjtcblxuICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgcmV0dXJuIHYgPyAndHJ1ZScgOiAnZmFsc2UnO1xuXG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIHJldHVybiBpc0Zpbml0ZSh2KSA/IHYgOiAnJztcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gJyc7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqLCBzZXAsIGVxLCBuYW1lKSB7XG4gIHNlcCA9IHNlcCB8fCAnJic7XG4gIGVxID0gZXEgfHwgJz0nO1xuICBpZiAob2JqID09PSBudWxsKSB7XG4gICAgb2JqID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIG1hcChvYmplY3RLZXlzKG9iaiksIGZ1bmN0aW9uKGspIHtcbiAgICAgIHZhciBrcyA9IGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUoaykpICsgZXE7XG4gICAgICBpZiAoaXNBcnJheShvYmpba10pKSB7XG4gICAgICAgIHJldHVybiBtYXAob2JqW2tdLCBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZSh2KSk7XG4gICAgICAgIH0pLmpvaW4oc2VwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBrcyArIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUob2JqW2tdKSk7XG4gICAgICB9XG4gICAgfSkuam9pbihzZXApO1xuXG4gIH1cblxuICBpZiAoIW5hbWUpIHJldHVybiAnJztcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUobmFtZSkpICsgZXEgK1xuICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmopKTtcbn07XG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoeHMpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4cykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5mdW5jdGlvbiBtYXAgKHhzLCBmKSB7XG4gIGlmICh4cy5tYXApIHJldHVybiB4cy5tYXAoZik7XG4gIHZhciByZXMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgIHJlcy5wdXNoKGYoeHNbaV0sIGkpKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG52YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIHJlcyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHJlcy5wdXNoKGtleSk7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn07XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/querystring-es3/encode.js\n");

/***/ }),

/***/ "./node_modules/querystring-es3/index.js":
/*!***********************************************!*\
  !*** ./node_modules/querystring-es3/index.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nexports.decode = exports.parse = __webpack_require__(/*! ./decode */ \"./node_modules/querystring-es3/decode.js\");\nexports.encode = exports.stringify = __webpack_require__(/*! ./encode */ \"./node_modules/querystring-es3/encode.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3F1ZXJ5c3RyaW5nLWVzMy9pbmRleC5qcz9iMzgzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5kZWNvZGUgPSBleHBvcnRzLnBhcnNlID0gcmVxdWlyZSgnLi9kZWNvZGUnKTtcbmV4cG9ydHMuZW5jb2RlID0gZXhwb3J0cy5zdHJpbmdpZnkgPSByZXF1aXJlKCcuL2VuY29kZScpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/querystring-es3/index.js\n");

/***/ }),

/***/ "./node_modules/soundcloud-resolve/browser.js":
/*!****************************************************!*\
  !*** ./node_modules/soundcloud-resolve/browser.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var qs  = __webpack_require__(/*! querystring */ \"./node_modules/querystring-es3/index.js\")\nvar xhr = __webpack_require__(/*! xhr */ \"./node_modules/xhr/index.js\")\n\nmodule.exports = resolve\n\nfunction resolve(id, goal, callback) {\n  var uri = 'https://api.soundcloud.com/resolve.json?' + qs.stringify({\n      url: goal\n    , client_id: id\n  })\n\n  xhr({\n      uri: uri\n    , method: 'GET'\n  }, function(err, res, body) {\n    if (err) return callback(err)\n    try {\n      body = JSON.parse(body)\n    } catch(e) {\n      return callback(e)\n    }\n    if (body.errors) return callback(new Error(\n      body.errors[0].error_message\n    ))\n\n    var stream_url = body.kind === 'track'\n      && body.stream_url + '?client_id=' + id\n\n    return callback(null, body, stream_url)\n  })\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvc291bmRjbG91ZC1yZXNvbHZlL2Jyb3dzZXIuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc291bmRjbG91ZC1yZXNvbHZlL2Jyb3dzZXIuanM/MDlhMSJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcXMgID0gcmVxdWlyZSgncXVlcnlzdHJpbmcnKVxudmFyIHhociA9IHJlcXVpcmUoJ3hocicpXG5cbm1vZHVsZS5leHBvcnRzID0gcmVzb2x2ZVxuXG5mdW5jdGlvbiByZXNvbHZlKGlkLCBnb2FsLCBjYWxsYmFjaykge1xuICB2YXIgdXJpID0gJ2h0dHBzOi8vYXBpLnNvdW5kY2xvdWQuY29tL3Jlc29sdmUuanNvbj8nICsgcXMuc3RyaW5naWZ5KHtcbiAgICAgIHVybDogZ29hbFxuICAgICwgY2xpZW50X2lkOiBpZFxuICB9KVxuXG4gIHhocih7XG4gICAgICB1cmk6IHVyaVxuICAgICwgbWV0aG9kOiAnR0VUJ1xuICB9LCBmdW5jdGlvbihlcnIsIHJlcywgYm9keSkge1xuICAgIGlmIChlcnIpIHJldHVybiBjYWxsYmFjayhlcnIpXG4gICAgdHJ5IHtcbiAgICAgIGJvZHkgPSBKU09OLnBhcnNlKGJvZHkpXG4gICAgfSBjYXRjaChlKSB7XG4gICAgICByZXR1cm4gY2FsbGJhY2soZSlcbiAgICB9XG4gICAgaWYgKGJvZHkuZXJyb3JzKSByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKFxuICAgICAgYm9keS5lcnJvcnNbMF0uZXJyb3JfbWVzc2FnZVxuICAgICkpXG5cbiAgICB2YXIgc3RyZWFtX3VybCA9IGJvZHkua2luZCA9PT0gJ3RyYWNrJ1xuICAgICAgJiYgYm9keS5zdHJlYW1fdXJsICsgJz9jbGllbnRfaWQ9JyArIGlkXG5cbiAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgYm9keSwgc3RyZWFtX3VybClcbiAgfSlcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/soundcloud-resolve/browser.js\n");

/***/ }),

/***/ "./node_modules/web-audio-analyser/index.js":
/*!**************************************************!*\
  !*** ./node_modules/web-audio-analyser/index.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var AudioContext = window.AudioContext || window.webkitAudioContext\n\nmodule.exports = WebAudioAnalyser\n\nfunction WebAudioAnalyser(audio, ctx, opts) {\n  if (!(this instanceof WebAudioAnalyser)) return new WebAudioAnalyser(audio, ctx, opts)\n  if (!(ctx instanceof AudioContext)) (opts = ctx), (ctx = null)\n\n  opts = opts || {}\n  this.ctx = ctx = ctx || new AudioContext\n\n  if (!(audio instanceof AudioNode)) {\n    audio = (audio instanceof Audio || audio instanceof HTMLAudioElement)\n      ? ctx.createMediaElementSource(audio)\n      : ctx.createMediaStreamSource(audio)\n  }\n\n  this.analyser = ctx.createAnalyser()\n  this.stereo   = !!opts.stereo\n  this.audible  = opts.audible !== false\n  this.wavedata = null\n  this.freqdata = null\n  this.splitter = null\n  this.merger   = null\n  this.source   = audio\n\n  if (!this.stereo) {\n    this.output = this.source\n    this.source.connect(this.analyser)\n    if (this.audible)\n      this.analyser.connect(ctx.destination)\n  } else {\n    this.analyser = [this.analyser]\n    this.analyser.push(ctx.createAnalyser())\n\n    this.splitter = ctx.createChannelSplitter(2)\n    this.merger   = ctx.createChannelMerger(2)\n    this.output   = this.merger\n\n    this.source.connect(this.splitter)\n\n    for (var i = 0; i < 2; i++) {\n      this.splitter.connect(this.analyser[i], i, 0)\n      this.analyser[i].connect(this.merger, 0, i)\n    }\n\n    if (this.audible)\n      this.merger.connect(ctx.destination)\n  }\n}\n\nWebAudioAnalyser.prototype.waveform = function(output, channel) {\n  if (!output) output = this.wavedata || (\n    this.wavedata = new Uint8Array((this.analyser[0] || this.analyser).frequencyBinCount)\n  )\n\n  var analyser = this.stereo\n    ? this.analyser[channel || 0]\n    : this.analyser\n\n  analyser.getByteTimeDomainData(output)\n\n  return output\n}\n\nWebAudioAnalyser.prototype.frequencies = function(output, channel) {\n  if (!output) output = this.freqdata || (\n    this.freqdata = new Uint8Array((this.analyser[0] || this.analyser).frequencyBinCount)\n  )\n\n  var analyser = this.stereo\n    ? this.analyser[channel || 0]\n    : this.analyser\n\n  analyser.getByteFrequencyData(output)\n\n  return output\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2ViLWF1ZGlvLWFuYWx5c2VyL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3dlYi1hdWRpby1hbmFseXNlci9pbmRleC5qcz9kNzY5Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBBdWRpb0NvbnRleHQgPSB3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHRcblxubW9kdWxlLmV4cG9ydHMgPSBXZWJBdWRpb0FuYWx5c2VyXG5cbmZ1bmN0aW9uIFdlYkF1ZGlvQW5hbHlzZXIoYXVkaW8sIGN0eCwgb3B0cykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgV2ViQXVkaW9BbmFseXNlcikpIHJldHVybiBuZXcgV2ViQXVkaW9BbmFseXNlcihhdWRpbywgY3R4LCBvcHRzKVxuICBpZiAoIShjdHggaW5zdGFuY2VvZiBBdWRpb0NvbnRleHQpKSAob3B0cyA9IGN0eCksIChjdHggPSBudWxsKVxuXG4gIG9wdHMgPSBvcHRzIHx8IHt9XG4gIHRoaXMuY3R4ID0gY3R4ID0gY3R4IHx8IG5ldyBBdWRpb0NvbnRleHRcblxuICBpZiAoIShhdWRpbyBpbnN0YW5jZW9mIEF1ZGlvTm9kZSkpIHtcbiAgICBhdWRpbyA9IChhdWRpbyBpbnN0YW5jZW9mIEF1ZGlvIHx8IGF1ZGlvIGluc3RhbmNlb2YgSFRNTEF1ZGlvRWxlbWVudClcbiAgICAgID8gY3R4LmNyZWF0ZU1lZGlhRWxlbWVudFNvdXJjZShhdWRpbylcbiAgICAgIDogY3R4LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKGF1ZGlvKVxuICB9XG5cbiAgdGhpcy5hbmFseXNlciA9IGN0eC5jcmVhdGVBbmFseXNlcigpXG4gIHRoaXMuc3RlcmVvICAgPSAhIW9wdHMuc3RlcmVvXG4gIHRoaXMuYXVkaWJsZSAgPSBvcHRzLmF1ZGlibGUgIT09IGZhbHNlXG4gIHRoaXMud2F2ZWRhdGEgPSBudWxsXG4gIHRoaXMuZnJlcWRhdGEgPSBudWxsXG4gIHRoaXMuc3BsaXR0ZXIgPSBudWxsXG4gIHRoaXMubWVyZ2VyICAgPSBudWxsXG4gIHRoaXMuc291cmNlICAgPSBhdWRpb1xuXG4gIGlmICghdGhpcy5zdGVyZW8pIHtcbiAgICB0aGlzLm91dHB1dCA9IHRoaXMuc291cmNlXG4gICAgdGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLmFuYWx5c2VyKVxuICAgIGlmICh0aGlzLmF1ZGlibGUpXG4gICAgICB0aGlzLmFuYWx5c2VyLmNvbm5lY3QoY3R4LmRlc3RpbmF0aW9uKVxuICB9IGVsc2Uge1xuICAgIHRoaXMuYW5hbHlzZXIgPSBbdGhpcy5hbmFseXNlcl1cbiAgICB0aGlzLmFuYWx5c2VyLnB1c2goY3R4LmNyZWF0ZUFuYWx5c2VyKCkpXG5cbiAgICB0aGlzLnNwbGl0dGVyID0gY3R4LmNyZWF0ZUNoYW5uZWxTcGxpdHRlcigyKVxuICAgIHRoaXMubWVyZ2VyICAgPSBjdHguY3JlYXRlQ2hhbm5lbE1lcmdlcigyKVxuICAgIHRoaXMub3V0cHV0ICAgPSB0aGlzLm1lcmdlclxuXG4gICAgdGhpcy5zb3VyY2UuY29ubmVjdCh0aGlzLnNwbGl0dGVyKVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyOyBpKyspIHtcbiAgICAgIHRoaXMuc3BsaXR0ZXIuY29ubmVjdCh0aGlzLmFuYWx5c2VyW2ldLCBpLCAwKVxuICAgICAgdGhpcy5hbmFseXNlcltpXS5jb25uZWN0KHRoaXMubWVyZ2VyLCAwLCBpKVxuICAgIH1cblxuICAgIGlmICh0aGlzLmF1ZGlibGUpXG4gICAgICB0aGlzLm1lcmdlci5jb25uZWN0KGN0eC5kZXN0aW5hdGlvbilcbiAgfVxufVxuXG5XZWJBdWRpb0FuYWx5c2VyLnByb3RvdHlwZS53YXZlZm9ybSA9IGZ1bmN0aW9uKG91dHB1dCwgY2hhbm5lbCkge1xuICBpZiAoIW91dHB1dCkgb3V0cHV0ID0gdGhpcy53YXZlZGF0YSB8fCAoXG4gICAgdGhpcy53YXZlZGF0YSA9IG5ldyBVaW50OEFycmF5KCh0aGlzLmFuYWx5c2VyWzBdIHx8IHRoaXMuYW5hbHlzZXIpLmZyZXF1ZW5jeUJpbkNvdW50KVxuICApXG5cbiAgdmFyIGFuYWx5c2VyID0gdGhpcy5zdGVyZW9cbiAgICA/IHRoaXMuYW5hbHlzZXJbY2hhbm5lbCB8fCAwXVxuICAgIDogdGhpcy5hbmFseXNlclxuXG4gIGFuYWx5c2VyLmdldEJ5dGVUaW1lRG9tYWluRGF0YShvdXRwdXQpXG5cbiAgcmV0dXJuIG91dHB1dFxufVxuXG5XZWJBdWRpb0FuYWx5c2VyLnByb3RvdHlwZS5mcmVxdWVuY2llcyA9IGZ1bmN0aW9uKG91dHB1dCwgY2hhbm5lbCkge1xuICBpZiAoIW91dHB1dCkgb3V0cHV0ID0gdGhpcy5mcmVxZGF0YSB8fCAoXG4gICAgdGhpcy5mcmVxZGF0YSA9IG5ldyBVaW50OEFycmF5KCh0aGlzLmFuYWx5c2VyWzBdIHx8IHRoaXMuYW5hbHlzZXIpLmZyZXF1ZW5jeUJpbkNvdW50KVxuICApXG5cbiAgdmFyIGFuYWx5c2VyID0gdGhpcy5zdGVyZW9cbiAgICA/IHRoaXMuYW5hbHlzZXJbY2hhbm5lbCB8fCAwXVxuICAgIDogdGhpcy5hbmFseXNlclxuXG4gIGFuYWx5c2VyLmdldEJ5dGVGcmVxdWVuY3lEYXRhKG91dHB1dClcblxuICByZXR1cm4gb3V0cHV0XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/web-audio-analyser/index.js\n");

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvd2VicGFjay9idWlsZGluL2dsb2JhbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanM/Y2QwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/webpack/buildin/global.js\n");

/***/ }),

/***/ "./node_modules/xhr/index.js":
/*!***********************************!*\
  !*** ./node_modules/xhr/index.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var window = __webpack_require__(/*! global/window */ \"./node_modules/global/window.js\")\nvar once = __webpack_require__(/*! once */ \"./node_modules/xhr/node_modules/once/once.js\")\n\nvar messages = {\n    \"0\": \"Internal XMLHttpRequest Error\",\n    \"4\": \"4xx Client Error\",\n    \"5\": \"5xx Server Error\"\n}\n\nvar XHR = window.XMLHttpRequest || noop\nvar XDR = \"withCredentials\" in (new XHR()) ?\n        window.XMLHttpRequest : window.XDomainRequest\n\nmodule.exports = createXHR\n\nfunction createXHR(options, callback) {\n    if (typeof options === \"string\") {\n        options = { uri: options }\n    }\n\n    options = options || {}\n    callback = once(callback)\n\n    var xhr\n\n    if (options.cors) {\n        xhr = new XDR()\n    } else {\n        xhr = new XHR()\n    }\n\n    var uri = xhr.url = options.uri\n    var method = xhr.method = options.method || \"GET\"\n    var body = options.body || options.data\n    var headers = xhr.headers = options.headers || {}\n    var isJson = false\n\n    if (\"json\" in options) {\n        isJson = true\n        headers[\"Content-Type\"] = \"application/json\"\n        body = JSON.stringify(options.json)\n    }\n\n    xhr.onreadystatechange = readystatechange\n    xhr.onload = load\n    xhr.onerror = error\n    // IE9 must have onprogress be set to a unique function.\n    xhr.onprogress = function () {\n        // IE must die\n    }\n    // hate IE\n    xhr.ontimeout = noop\n    xhr.open(method, uri)\n    if (options.cors) {\n        xhr.withCredentials = true\n    }\n    xhr.timeout = \"timeout\" in options ? options.timeout : 5000\n\n    if ( xhr.setRequestHeader) {\n        Object.keys(headers).forEach(function (key) {\n            xhr.setRequestHeader(key, headers[key])\n        })\n    }\n\n    xhr.send(body)\n\n    return xhr\n\n    function readystatechange() {\n        if (xhr.readyState === 4) {\n            load()\n        }\n    }\n\n    function load() {\n        var error = null\n        var status = xhr.statusCode = xhr.status\n        var body = xhr.body = xhr.response ||\n            xhr.responseText || xhr.responseXML\n\n        if (status === 0 || (status >= 400 && status < 600)) {\n            var message = xhr.responseText ||\n                messages[String(xhr.status).charAt(0)]\n            error = new Error(message)\n\n            error.statusCode = xhr.status\n        }\n\n        if (isJson) {\n            try {\n                body = xhr.body = JSON.parse(body)\n            } catch (e) {}\n        }\n\n        callback(error, xhr, body)\n    }\n\n    function error(evt) {\n        callback(evt, xhr)\n    }\n}\n\n\nfunction noop() {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMveGhyL2luZGV4LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3hoci9pbmRleC5qcz9lZWM3Il0sInNvdXJjZXNDb250ZW50IjpbInZhciB3aW5kb3cgPSByZXF1aXJlKFwiZ2xvYmFsL3dpbmRvd1wiKVxudmFyIG9uY2UgPSByZXF1aXJlKFwib25jZVwiKVxuXG52YXIgbWVzc2FnZXMgPSB7XG4gICAgXCIwXCI6IFwiSW50ZXJuYWwgWE1MSHR0cFJlcXVlc3QgRXJyb3JcIixcbiAgICBcIjRcIjogXCI0eHggQ2xpZW50IEVycm9yXCIsXG4gICAgXCI1XCI6IFwiNXh4IFNlcnZlciBFcnJvclwiXG59XG5cbnZhciBYSFIgPSB3aW5kb3cuWE1MSHR0cFJlcXVlc3QgfHwgbm9vcFxudmFyIFhEUiA9IFwid2l0aENyZWRlbnRpYWxzXCIgaW4gKG5ldyBYSFIoKSkgP1xuICAgICAgICB3aW5kb3cuWE1MSHR0cFJlcXVlc3QgOiB3aW5kb3cuWERvbWFpblJlcXVlc3RcblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVYSFJcblxuZnVuY3Rpb24gY3JlYXRlWEhSKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7IHVyaTogb3B0aW9ucyB9XG4gICAgfVxuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cbiAgICBjYWxsYmFjayA9IG9uY2UoY2FsbGJhY2spXG5cbiAgICB2YXIgeGhyXG5cbiAgICBpZiAob3B0aW9ucy5jb3JzKSB7XG4gICAgICAgIHhociA9IG5ldyBYRFIoKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHhociA9IG5ldyBYSFIoKVxuICAgIH1cblxuICAgIHZhciB1cmkgPSB4aHIudXJsID0gb3B0aW9ucy51cmlcbiAgICB2YXIgbWV0aG9kID0geGhyLm1ldGhvZCA9IG9wdGlvbnMubWV0aG9kIHx8IFwiR0VUXCJcbiAgICB2YXIgYm9keSA9IG9wdGlvbnMuYm9keSB8fCBvcHRpb25zLmRhdGFcbiAgICB2YXIgaGVhZGVycyA9IHhoci5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIHx8IHt9XG4gICAgdmFyIGlzSnNvbiA9IGZhbHNlXG5cbiAgICBpZiAoXCJqc29uXCIgaW4gb3B0aW9ucykge1xuICAgICAgICBpc0pzb24gPSB0cnVlXG4gICAgICAgIGhlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0gPSBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICBib2R5ID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5qc29uKVxuICAgIH1cblxuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSByZWFkeXN0YXRlY2hhbmdlXG4gICAgeGhyLm9ubG9hZCA9IGxvYWRcbiAgICB4aHIub25lcnJvciA9IGVycm9yXG4gICAgLy8gSUU5IG11c3QgaGF2ZSBvbnByb2dyZXNzIGJlIHNldCB0byBhIHVuaXF1ZSBmdW5jdGlvbi5cbiAgICB4aHIub25wcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gSUUgbXVzdCBkaWVcbiAgICB9XG4gICAgLy8gaGF0ZSBJRVxuICAgIHhoci5vbnRpbWVvdXQgPSBub29wXG4gICAgeGhyLm9wZW4obWV0aG9kLCB1cmkpXG4gICAgaWYgKG9wdGlvbnMuY29ycykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuICAgIH1cbiAgICB4aHIudGltZW91dCA9IFwidGltZW91dFwiIGluIG9wdGlvbnMgPyBvcHRpb25zLnRpbWVvdXQgOiA1MDAwXG5cbiAgICBpZiAoIHhoci5zZXRSZXF1ZXN0SGVhZGVyKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKGhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoa2V5LCBoZWFkZXJzW2tleV0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgeGhyLnNlbmQoYm9keSlcblxuICAgIHJldHVybiB4aHJcblxuICAgIGZ1bmN0aW9uIHJlYWR5c3RhdGVjaGFuZ2UoKSB7XG4gICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgbG9hZCgpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsb2FkKCkge1xuICAgICAgICB2YXIgZXJyb3IgPSBudWxsXG4gICAgICAgIHZhciBzdGF0dXMgPSB4aHIuc3RhdHVzQ29kZSA9IHhoci5zdGF0dXNcbiAgICAgICAgdmFyIGJvZHkgPSB4aHIuYm9keSA9IHhoci5yZXNwb25zZSB8fFxuICAgICAgICAgICAgeGhyLnJlc3BvbnNlVGV4dCB8fCB4aHIucmVzcG9uc2VYTUxcblxuICAgICAgICBpZiAoc3RhdHVzID09PSAwIHx8IChzdGF0dXMgPj0gNDAwICYmIHN0YXR1cyA8IDYwMCkpIHtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0geGhyLnJlc3BvbnNlVGV4dCB8fFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzW1N0cmluZyh4aHIuc3RhdHVzKS5jaGFyQXQoMCldXG4gICAgICAgICAgICBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKVxuXG4gICAgICAgICAgICBlcnJvci5zdGF0dXNDb2RlID0geGhyLnN0YXR1c1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzSnNvbikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBib2R5ID0geGhyLmJvZHkgPSBKU09OLnBhcnNlKGJvZHkpXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgICB9XG5cbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIHhociwgYm9keSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlcnJvcihldnQpIHtcbiAgICAgICAgY2FsbGJhY2soZXZ0LCB4aHIpXG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/xhr/index.js\n");

/***/ }),

/***/ "./node_modules/xhr/node_modules/once/once.js":
/*!****************************************************!*\
  !*** ./node_modules/xhr/node_modules/once/once.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = once\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var called = false\n  return function () {\n    if (called) return\n    called = true\n    return fn.apply(this, arguments)\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMveGhyL25vZGVfbW9kdWxlcy9vbmNlL29uY2UuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMveGhyL25vZGVfbW9kdWxlcy9vbmNlL29uY2UuanM/YTliZSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IG9uY2Vcblxub25jZS5wcm90byA9IG9uY2UoZnVuY3Rpb24gKCkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLCAnb25jZScsIHtcbiAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG9uY2UodGhpcylcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KVxufSlcblxuZnVuY3Rpb24gb25jZSAoZm4pIHtcbiAgdmFyIGNhbGxlZCA9IGZhbHNlXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGNhbGxlZCkgcmV0dXJuXG4gICAgY2FsbGVkID0gdHJ1ZVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/xhr/node_modules/once/once.js\n");

/***/ }),

/***/ "./script.ts":
/*!*******************!*\
  !*** ./script.ts ***!
  \*******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _audio__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./audio */ \"./audio.ts\");\n/*\nMIT License\n\nCopyright (c) 2017 Pavel Dobryakov\nTypescript fork (c) 2020 Jake Teton-Landis\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nfunction safeParseInt(x) {\n    return parseInt(x.toString());\n}\nfunction notNull(value, msg) {\n    if (value == null) {\n        throw new Error(msg || 'value unexpectedly null');\n    }\n    return value; // TODO\n}\nconst canvas = document.getElementsByTagName('canvas')[0];\nresizeCanvas();\nvar songPlayer = new _audio__WEBPACK_IMPORTED_MODULE_0__[\"SongPlayer\"]();\nwindow.songPlayer = songPlayer;\nconst Shortcuts = {\n    Black: { r: 0, g: 0, b: 0 },\n    Red: { r: 245, g: 0, b: 0 },\n    NotionMarketingBackground: { r: 255, g: 254, b: 252 },\n    FloatSong: 'https://soundcloud.com/coltongorg/floating',\n    SimonSong: 'https://soundcloud.com/simonlast/session_74',\n};\nfunction dup(val) {\n    return JSON.parse(JSON.stringify(val));\n}\nconst config = {\n    SIM_RESOLUTION: 512,\n    DYE_RESOLUTION: 1024,\n    CAPTURE_RESOLUTION: 512,\n    DENSITY_DISSIPATION: 1,\n    VELOCITY_DISSIPATION: 0.2,\n    PRESSURE: 0.8,\n    PRESSURE_ITERATIONS: 20,\n    CURL: 30,\n    SPLAT_RADIUS: 0.25,\n    SPLAT_FORCE: 6000,\n    SHADING: true,\n    SPLAT_COLOR: dup(Shortcuts.Red),\n    RANDOM_COLOR: true,\n    COLORFUL: true,\n    COLOR_UPDATE_SPEED: 10,\n    PAUSED: false,\n    BACK_COLOR: dup(Shortcuts.Black),\n    TRANSPARENT: false,\n    BLOOM: false,\n    BLOOM_ITERATIONS: 8,\n    BLOOM_RESOLUTION: 256,\n    BLOOM_INTENSITY: 0.8,\n    BLOOM_THRESHOLD: 0.6,\n    BLOOM_SOFT_KNEE: 0.7,\n    SUNRAYS: true,\n    SUNRAYS_RESOLUTION: 196,\n    SUNRAYS_WEIGHT: 1.0,\n};\nclass Pointer {\n    constructor() {\n        this.id = -1;\n        this.texcoordX = 0;\n        this.texcoordY = 0;\n        this.prevTexcoordX = 0;\n        this.prevTexcoordY = 0;\n        this.deltaX = 0;\n        this.deltaY = 0;\n        this.down = false;\n        this.moved = false;\n        this.color = { r: 0, g: 0, b: 0 };\n        this.colorUpdates = 0;\n    }\n}\nlet pointers = [];\nlet splatStack = [];\npointers.push(new Pointer());\nconst { gl, ext } = getWebGLContext(canvas);\nif (isMobile()) {\n    config.DYE_RESOLUTION = 512;\n}\nif (!ext.supportLinearFiltering) {\n    config.DYE_RESOLUTION = 512;\n    config.SHADING = false;\n    config.BLOOM = false;\n    config.SUNRAYS = false;\n}\nstartGUI();\nfunction getWebGLContext(canvas) {\n    const params = {\n        alpha: true,\n        depth: false,\n        stencil: false,\n        antialias: false,\n        preserveDrawingBuffer: false,\n    };\n    const gl2 = canvas.getContext('webgl2', params);\n    const gl = gl2 ||\n        canvas.getContext('webgl', params) ||\n        canvas.getContext('experimental-webgl', params);\n    const isWebGL2 = !!gl2;\n    let halfFloat = undefined;\n    let supportLinearFiltering;\n    if (isWebGL2) {\n        gl.getExtension('EXT_color_buffer_float');\n        supportLinearFiltering = gl.getExtension('OES_texture_float_linear');\n    }\n    else {\n        halfFloat = gl.getExtension('OES_texture_half_float');\n        supportLinearFiltering = gl.getExtension('OES_texture_half_float_linear');\n    }\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);\n    const halfFloatTexType = isWebGL2 ? gl.HALF_FLOAT : halfFloat.HALF_FLOAT_OES;\n    let formatRGBA;\n    let formatRG;\n    let formatR;\n    if (isWebGL2) {\n        formatRGBA = getSupportedFormat(gl, gl.RGBA16F, gl.RGBA, halfFloatTexType);\n        formatRG = getSupportedFormat(gl, gl.RG16F, gl.RG, halfFloatTexType);\n        formatR = getSupportedFormat(gl, gl.R16F, gl.RED, halfFloatTexType);\n    }\n    else {\n        formatRGBA = getSupportedFormat(gl, gl.RGBA, gl.RGBA, halfFloatTexType);\n        formatRG = getSupportedFormat(gl, gl.RGBA, gl.RGBA, halfFloatTexType);\n        formatR = getSupportedFormat(gl, gl.RGBA, gl.RGBA, halfFloatTexType);\n    }\n    // Assumes global Google Analytics, disabled.\n    //ga('send', 'event', isWebGL2 ? 'webgl2' : 'webgl', formatRGBA == null ? 'not supported' : 'supported');\n    return {\n        gl,\n        ext: {\n            formatRGBA,\n            formatRG,\n            formatR,\n            halfFloatTexType,\n            supportLinearFiltering,\n        },\n    };\n}\nfunction getSupportedFormat(gl, internalFormat, format, type) {\n    /** TODO: | null */\n    if (!supportRenderTextureFormat(gl, internalFormat, format, type)) {\n        switch (internalFormat) {\n            case gl.R16F:\n                return getSupportedFormat(gl, gl.RG16F, gl.RG, type);\n            case gl.RG16F:\n                return getSupportedFormat(gl, gl.RGBA16F, gl.RGBA, type);\n            default:\n                return null; // TODO\n        }\n    }\n    return {\n        internalFormat,\n        format,\n    };\n}\nfunction supportRenderTextureFormat(gl, internalFormat, format, type) {\n    let texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, 4, 4, 0, format, type, null);\n    let fbo = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n    const status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n    return status == gl.FRAMEBUFFER_COMPLETE;\n}\nfunction startGUI() {\n    var gui = new dat.GUI({ width: 300 });\n    gui\n        .add(config, 'DYE_RESOLUTION', {\n        ultra: 2048,\n        high: 1024,\n        medium: 512,\n        low: 256,\n        'very low': 128,\n    })\n        .name('quality')\n        .onFinishChange(initFramebuffers);\n    gui\n        .add(config, 'SIM_RESOLUTION', { '32': 32, '64': 64, '128': 128, '256': 256, '512': 512 })\n        .name('sim resolution')\n        .onFinishChange(initFramebuffers);\n    gui.add(config, 'DENSITY_DISSIPATION', 0, 4.0).name('density diffusion');\n    gui.add(config, 'VELOCITY_DISSIPATION', 0, 4.0).name('velocity diffusion');\n    gui.add(config, 'PRESSURE', 0.0, 1.0).name('pressure');\n    gui\n        .add(config, 'CURL', 0, 50)\n        .name('vorticity')\n        .step(1);\n    gui.add(config, 'SPLAT_RADIUS', 0.01, 1.0).name('splat radius');\n    gui\n        .add(config, 'SHADING')\n        .name('shading')\n        .onFinishChange(updateKeywords);\n    gui.addColor(config, 'SPLAT_COLOR').name('Splat color');\n    gui.add(config, 'RANDOM_COLOR').name('Use random color');\n    gui.add(config, 'COLORFUL').name('Paint the rainbow');\n    gui\n        .add(config, 'PAUSED')\n        .name('paused')\n        .listen();\n    gui\n        .add({\n        fun: () => {\n            splatStack.push(safeParseInt(Math.random() * 20) + 5);\n        },\n    }, 'fun')\n        .name('Random splats');\n    gui\n        .add({\n        fun: () => {\n            songPlayer.setSoundcloudUrl(Shortcuts.SimonSong);\n        },\n    }, 'fun')\n        .name('Play Soundcloud Visualizer (WIP)');\n    let bloomFolder = gui.addFolder('Bloom');\n    bloomFolder\n        .add(config, 'BLOOM')\n        .name('enabled')\n        .onFinishChange(updateKeywords);\n    bloomFolder.add(config, 'BLOOM_INTENSITY', 0.1, 2.0).name('intensity');\n    bloomFolder.add(config, 'BLOOM_THRESHOLD', 0.0, 1.0).name('threshold');\n    let sunraysFolder = gui.addFolder('Sunrays');\n    sunraysFolder\n        .add(config, 'SUNRAYS')\n        .name('enabled')\n        .onFinishChange(updateKeywords);\n    sunraysFolder.add(config, 'SUNRAYS_WEIGHT', 0.3, 1.0).name('weight');\n    let captureFolder = gui.addFolder('Capture');\n    captureFolder.addColor(config, 'BACK_COLOR').name('background color');\n    captureFolder.add(config, 'TRANSPARENT').name('transparent');\n    captureFolder.add({ fun: captureScreenshot }, 'fun').name('take screenshot');\n    let github = gui\n        .add({\n        fun: () => {\n            window.open('https://github.com/justjake/WebGL-Fluid-Simulation');\n            //ga('send', 'event', 'link button', 'github');\n        },\n    }, 'fun')\n        .name('Typescript');\n    github.__li.className = 'cr function bigFont';\n    github.__li.style.borderLeft = '3px solid #8C8C8C';\n    let githubIcon = document.createElement('span');\n    github.domElement.parentElement.appendChild(githubIcon);\n    githubIcon.className = 'icon github';\n    let original = gui\n        .add({\n        fun: () => {\n            window.open('https://github.com/PavelDoGreat/WebGL-Fluid-Simulation');\n            //ga('send', 'event', 'link button', 'github');\n        },\n    }, 'fun')\n        .name('Original');\n    original.__li.className = 'cr function bigFont';\n    original.__li.style.borderLeft = '3px solid #8C8C8C';\n    let originalGithubIcon = document.createElement('span');\n    original.domElement.parentElement.appendChild(originalGithubIcon);\n    originalGithubIcon.className = 'icon github';\n    if (isMobile())\n        gui.close();\n}\nfunction isMobile() {\n    return /Mobi|Android/i.test(navigator.userAgent);\n}\nfunction captureScreenshot() {\n    let res = getResolution(config.CAPTURE_RESOLUTION);\n    let target = createFBO(res.width, res.height, ext.formatRGBA.internalFormat, ext.formatRGBA.format, ext.halfFloatTexType, gl.NEAREST);\n    render(target);\n    let texture = framebufferToTexture(target);\n    texture = normalizeTexture(texture, target.width, target.height);\n    let captureCanvas = textureToCanvas(texture, target.width, target.height);\n    let datauri = captureCanvas.toDataURL();\n    downloadURI('fluid.png', datauri);\n    URL.revokeObjectURL(datauri);\n}\nfunction framebufferToTexture(target) {\n    gl.bindFramebuffer(gl.FRAMEBUFFER, target.fbo);\n    let length = target.width * target.height * 4;\n    let texture = new Float32Array(length);\n    gl.readPixels(0, 0, target.width, target.height, gl.RGBA, gl.FLOAT, texture);\n    return texture;\n}\nfunction normalizeTexture(texture, width, height) {\n    let result = new Uint8Array(texture.length);\n    let id = 0;\n    for (let i = height - 1; i >= 0; i--) {\n        for (let j = 0; j < width; j++) {\n            let nid = i * width * 4 + j * 4;\n            result[nid + 0] = clamp01(texture[id + 0]) * 255;\n            result[nid + 1] = clamp01(texture[id + 1]) * 255;\n            result[nid + 2] = clamp01(texture[id + 2]) * 255;\n            result[nid + 3] = clamp01(texture[id + 3]) * 255;\n            id += 4;\n        }\n    }\n    return result;\n}\nfunction clamp01(input) {\n    return Math.min(Math.max(input, 0), 1);\n}\nfunction textureToCanvas(texture, width, height) {\n    let captureCanvas = document.createElement('canvas');\n    let ctx = notNull(captureCanvas.getContext('2d'), 'canvas.getContext(2d)');\n    captureCanvas.width = width;\n    captureCanvas.height = height;\n    let imageData = ctx.createImageData(width, height);\n    imageData.data.set(texture);\n    ctx.putImageData(imageData, 0, 0);\n    return captureCanvas;\n}\nfunction downloadURI(filename, uri) {\n    let link = document.createElement('a');\n    link.download = filename;\n    link.href = uri;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n}\nclass Material {\n    constructor(vertexShader, fragmentShaderSource) {\n        this.vertexShader = vertexShader;\n        this.fragmentShaderSource = fragmentShaderSource;\n        this.programs = [];\n        this.activeProgram = null;\n        this.uniforms = undefined;\n    }\n    setKeywords(keywords) {\n        let hash = 0;\n        for (let i = 0; i < keywords.length; i++)\n            hash += hashCode(keywords[i]);\n        let program = this.programs[hash];\n        if (program == null) {\n            let fragmentShader = compileShader(gl.FRAGMENT_SHADER, this.fragmentShaderSource, keywords);\n            program = createProgram(this.vertexShader, fragmentShader);\n            this.programs[hash] = program;\n        }\n        if (program == this.activeProgram)\n            return;\n        this.uniforms = getUniforms(program);\n        this.activeProgram = program;\n    }\n    bind() {\n        gl.useProgram(this.activeProgram);\n    }\n}\nclass Program {\n    constructor(vertexShader, fragmentShader) {\n        this.program = createProgram(vertexShader, fragmentShader);\n        this.uniforms = getUniforms(this.program);\n    }\n    bind() {\n        gl.useProgram(this.program);\n    }\n}\nfunction createProgram(vertexShader, fragmentShader) {\n    let program = notNull(gl.createProgram());\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS))\n        throw gl.getProgramInfoLog(program);\n    return program;\n}\nfunction getUniforms(program) {\n    let uniforms = []; // TODO switch to {} if possible\n    let uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n    for (let i = 0; i < uniformCount; i++) {\n        let uniformName = notNull(gl.getActiveUniform(program, i)).name;\n        uniforms[uniformName] = notNull(gl.getUniformLocation(program, uniformName));\n    }\n    return uniforms;\n}\nfunction compileShader(type, source, keywords) {\n    source = addKeywords(source, keywords);\n    const shader = gl.createShader(type);\n    if (!shader) {\n        throw new Error(`failed to create shader type ${type}`);\n    }\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS))\n        throw gl.getShaderInfoLog(shader);\n    return shader;\n}\nfunction addKeywords(source, keywords) {\n    if (keywords == null)\n        return source;\n    let keywordsString = '';\n    keywords.forEach(keyword => {\n        keywordsString += '#define ' + keyword + '\\n';\n    });\n    return keywordsString + source;\n}\nconst baseVertexShader = compileShader(gl.VERTEX_SHADER, `\n    precision highp float;\n\n    attribute vec2 aPosition;\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform vec2 texelSize;\n\n    void main () {\n        vUv = aPosition * 0.5 + 0.5;\n        vL = vUv - vec2(texelSize.x, 0.0);\n        vR = vUv + vec2(texelSize.x, 0.0);\n        vT = vUv + vec2(0.0, texelSize.y);\n        vB = vUv - vec2(0.0, texelSize.y);\n        gl_Position = vec4(aPosition, 0.0, 1.0);\n    }\n`);\nconst blurVertexShader = compileShader(gl.VERTEX_SHADER, `\n    precision highp float;\n\n    attribute vec2 aPosition;\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    uniform vec2 texelSize;\n\n    void main () {\n        vUv = aPosition * 0.5 + 0.5;\n        float offset = 1.33333333;\n        vL = vUv - texelSize * offset;\n        vR = vUv + texelSize * offset;\n        gl_Position = vec4(aPosition, 0.0, 1.0);\n    }\n`);\nconst blurShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    uniform sampler2D uTexture;\n\n    void main () {\n        vec4 sum = texture2D(uTexture, vUv) * 0.29411764;\n        sum += texture2D(uTexture, vL) * 0.35294117;\n        sum += texture2D(uTexture, vR) * 0.35294117;\n        gl_FragColor = sum;\n    }\n`);\nconst copyShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    uniform sampler2D uTexture;\n\n    void main () {\n        gl_FragColor = texture2D(uTexture, vUv);\n    }\n`);\nconst clearShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    uniform sampler2D uTexture;\n    uniform float value;\n\n    void main () {\n        gl_FragColor = value * texture2D(uTexture, vUv);\n    }\n`);\nconst colorShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n\n    uniform vec4 color;\n\n    void main () {\n        gl_FragColor = color;\n    }\n`);\nconst checkerboardShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTexture;\n    uniform float aspectRatio;\n\n    #define SCALE 25.0\n\n    void main () {\n        vec2 uv = floor(vUv * SCALE * vec2(aspectRatio, 1.0));\n        float v = mod(uv.x + uv.y, 2.0);\n        v = v * 0.1 + 0.8;\n        gl_FragColor = vec4(vec3(v), 1.0);\n    }\n`);\nconst displayShaderSource = `\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uTexture;\n    uniform sampler2D uBloom;\n    uniform sampler2D uSunrays;\n    uniform sampler2D uDithering;\n    uniform vec2 ditherScale;\n    uniform vec2 texelSize;\n\n    vec3 linearToGamma (vec3 color) {\n        color = max(color, vec3(0));\n        return max(1.055 * pow(color, vec3(0.416666667)) - 0.055, vec3(0));\n    }\n\n    void main () {\n        vec3 c = texture2D(uTexture, vUv).rgb;\n\n    #ifdef SHADING\n        vec3 lc = texture2D(uTexture, vL).rgb;\n        vec3 rc = texture2D(uTexture, vR).rgb;\n        vec3 tc = texture2D(uTexture, vT).rgb;\n        vec3 bc = texture2D(uTexture, vB).rgb;\n\n        float dx = length(rc) - length(lc);\n        float dy = length(tc) - length(bc);\n\n        vec3 n = normalize(vec3(dx, dy, length(texelSize)));\n        vec3 l = vec3(0.0, 0.0, 1.0);\n\n        float diffuse = clamp(dot(n, l) + 0.7, 0.7, 1.0);\n        c *= diffuse;\n    #endif\n\n    #ifdef BLOOM\n        vec3 bloom = texture2D(uBloom, vUv).rgb;\n    #endif\n\n    #ifdef SUNRAYS\n        float sunrays = texture2D(uSunrays, vUv).r;\n        c *= sunrays;\n    #ifdef BLOOM\n        bloom *= sunrays;\n    #endif\n    #endif\n\n    #ifdef BLOOM\n        float noise = texture2D(uDithering, vUv * ditherScale).r;\n        noise = noise * 2.0 - 1.0;\n        bloom += noise / 255.0;\n        bloom = linearToGamma(bloom);\n        c += bloom;\n    #endif\n\n        float a = max(c.r, max(c.g, c.b));\n        gl_FragColor = vec4(c, a);\n    }\n`;\nconst bloomPrefilterShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTexture;\n    uniform vec3 curve;\n    uniform float threshold;\n\n    void main () {\n        vec3 c = texture2D(uTexture, vUv).rgb;\n        float br = max(c.r, max(c.g, c.b));\n        float rq = clamp(br - curve.x, 0.0, curve.y);\n        rq = curve.z * rq * rq;\n        c *= max(rq, br - threshold) / max(br, 0.0001);\n        gl_FragColor = vec4(c, 0.0);\n    }\n`);\nconst bloomBlurShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uTexture;\n\n    void main () {\n        vec4 sum = vec4(0.0);\n        sum += texture2D(uTexture, vL);\n        sum += texture2D(uTexture, vR);\n        sum += texture2D(uTexture, vT);\n        sum += texture2D(uTexture, vB);\n        sum *= 0.25;\n        gl_FragColor = sum;\n    }\n`);\nconst bloomFinalShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uTexture;\n    uniform float intensity;\n\n    void main () {\n        vec4 sum = vec4(0.0);\n        sum += texture2D(uTexture, vL);\n        sum += texture2D(uTexture, vR);\n        sum += texture2D(uTexture, vT);\n        sum += texture2D(uTexture, vB);\n        sum *= 0.25;\n        gl_FragColor = sum * intensity;\n    }\n`);\nconst sunraysMaskShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTexture;\n\n    void main () {\n        vec4 c = texture2D(uTexture, vUv);\n        float br = max(c.r, max(c.g, c.b));\n        c.a = 1.0 - min(max(br * 20.0, 0.0), 0.8);\n        gl_FragColor = c;\n    }\n`);\nconst sunraysShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTexture;\n    uniform float weight;\n\n    #define ITERATIONS 16\n\n    void main () {\n        float Density = 0.3;\n        float Decay = 0.95;\n        float Exposure = 0.7;\n\n        vec2 coord = vUv;\n        vec2 dir = vUv - 0.5;\n\n        dir *= 1.0 / float(ITERATIONS) * Density;\n        float illuminationDecay = 1.0;\n\n        float color = texture2D(uTexture, vUv).a;\n\n        for (int i = 0; i < ITERATIONS; i++)\n        {\n            coord -= dir;\n            float col = texture2D(uTexture, coord).a;\n            color += col * illuminationDecay * weight;\n            illuminationDecay *= Decay;\n        }\n\n        gl_FragColor = vec4(color * Exposure, 0.0, 0.0, 1.0);\n    }\n`);\nconst splatShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTarget;\n    uniform float aspectRatio;\n    uniform vec3 color;\n    uniform vec2 point;\n    uniform float radius;\n\n    void main () {\n        vec2 p = vUv - point.xy;\n        p.x *= aspectRatio;\n        vec3 splat = exp(-dot(p, p) / radius) * color;\n        vec3 base = texture2D(uTarget, vUv).xyz;\n        gl_FragColor = vec4(base + splat, 1.0);\n    }\n`);\nconst advectionShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uVelocity;\n    uniform sampler2D uSource;\n    uniform vec2 texelSize;\n    uniform vec2 dyeTexelSize;\n    uniform float dt;\n    uniform float dissipation;\n\n    vec4 bilerp (sampler2D sam, vec2 uv, vec2 tsize) {\n        vec2 st = uv / tsize - 0.5;\n\n        vec2 iuv = floor(st);\n        vec2 fuv = fract(st);\n\n        vec4 a = texture2D(sam, (iuv + vec2(0.5, 0.5)) * tsize);\n        vec4 b = texture2D(sam, (iuv + vec2(1.5, 0.5)) * tsize);\n        vec4 c = texture2D(sam, (iuv + vec2(0.5, 1.5)) * tsize);\n        vec4 d = texture2D(sam, (iuv + vec2(1.5, 1.5)) * tsize);\n\n        return mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\n    }\n\n    void main () {\n    #ifdef MANUAL_FILTERING\n        vec2 coord = vUv - dt * bilerp(uVelocity, vUv, texelSize).xy * texelSize;\n        vec4 result = bilerp(uSource, coord, dyeTexelSize);\n    #else\n        vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;\n        vec4 result = texture2D(uSource, coord);\n    #endif\n        float decay = 1.0 + dissipation * dt;\n        gl_FragColor = result / decay;\n    }`, ext.supportLinearFiltering ? undefined : ['MANUAL_FILTERING']);\nconst divergenceShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    varying highp vec2 vL;\n    varying highp vec2 vR;\n    varying highp vec2 vT;\n    varying highp vec2 vB;\n    uniform sampler2D uVelocity;\n\n    void main () {\n        float L = texture2D(uVelocity, vL).x;\n        float R = texture2D(uVelocity, vR).x;\n        float T = texture2D(uVelocity, vT).y;\n        float B = texture2D(uVelocity, vB).y;\n\n        vec2 C = texture2D(uVelocity, vUv).xy;\n        if (vL.x < 0.0) { L = -C.x; }\n        if (vR.x > 1.0) { R = -C.x; }\n        if (vT.y > 1.0) { T = -C.y; }\n        if (vB.y < 0.0) { B = -C.y; }\n\n        float div = 0.5 * (R - L + T - B);\n        gl_FragColor = vec4(div, 0.0, 0.0, 1.0);\n    }\n`);\nconst curlShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    varying highp vec2 vL;\n    varying highp vec2 vR;\n    varying highp vec2 vT;\n    varying highp vec2 vB;\n    uniform sampler2D uVelocity;\n\n    void main () {\n        float L = texture2D(uVelocity, vL).y;\n        float R = texture2D(uVelocity, vR).y;\n        float T = texture2D(uVelocity, vT).x;\n        float B = texture2D(uVelocity, vB).x;\n        float vorticity = R - L - T + B;\n        gl_FragColor = vec4(0.5 * vorticity, 0.0, 0.0, 1.0);\n    }\n`);\nconst vorticityShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision highp float;\n    precision highp sampler2D;\n\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uVelocity;\n    uniform sampler2D uCurl;\n    uniform float curl;\n    uniform float dt;\n\n    void main () {\n        float L = texture2D(uCurl, vL).x;\n        float R = texture2D(uCurl, vR).x;\n        float T = texture2D(uCurl, vT).x;\n        float B = texture2D(uCurl, vB).x;\n        float C = texture2D(uCurl, vUv).x;\n\n        vec2 force = 0.5 * vec2(abs(T) - abs(B), abs(R) - abs(L));\n        force /= length(force) + 0.0001;\n        force *= curl * C;\n        force.y *= -1.0;\n\n        vec2 vel = texture2D(uVelocity, vUv).xy;\n        gl_FragColor = vec4(vel + force * dt, 0.0, 1.0);\n    }\n`);\nconst pressureShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    varying highp vec2 vL;\n    varying highp vec2 vR;\n    varying highp vec2 vT;\n    varying highp vec2 vB;\n    uniform sampler2D uPressure;\n    uniform sampler2D uDivergence;\n\n    void main () {\n        float L = texture2D(uPressure, vL).x;\n        float R = texture2D(uPressure, vR).x;\n        float T = texture2D(uPressure, vT).x;\n        float B = texture2D(uPressure, vB).x;\n        float C = texture2D(uPressure, vUv).x;\n        float divergence = texture2D(uDivergence, vUv).x;\n        float pressure = (L + R + B + T - divergence) * 0.25;\n        gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);\n    }\n`);\nconst gradientSubtractShader = compileShader(gl.FRAGMENT_SHADER, `\n    precision mediump float;\n    precision mediump sampler2D;\n\n    varying highp vec2 vUv;\n    varying highp vec2 vL;\n    varying highp vec2 vR;\n    varying highp vec2 vT;\n    varying highp vec2 vB;\n    uniform sampler2D uPressure;\n    uniform sampler2D uVelocity;\n\n    void main () {\n        float L = texture2D(uPressure, vL).x;\n        float R = texture2D(uPressure, vR).x;\n        float T = texture2D(uPressure, vT).x;\n        float B = texture2D(uPressure, vB).x;\n        vec2 velocity = texture2D(uVelocity, vUv).xy;\n        velocity.xy -= vec2(R - L, T - B);\n        gl_FragColor = vec4(velocity, 0.0, 1.0);\n    }\n`);\nconst blit = (() => {\n    gl.bindBuffer(gl.ARRAY_BUFFER, gl.createBuffer());\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1, -1, -1, 1, 1, 1, 1, -1]), gl.STATIC_DRAW);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, gl.createBuffer());\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 0, 2, 3]), gl.STATIC_DRAW);\n    gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\n    gl.enableVertexAttribArray(0);\n    return (destination) => {\n        gl.bindFramebuffer(gl.FRAMEBUFFER, destination);\n        gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);\n    };\n})();\nlet dye;\nlet velocity;\nlet divergence;\nlet curl;\nlet pressure;\nlet bloom;\nlet bloomFramebuffers = [];\nlet sunrays;\nlet sunraysTemp;\nlet ditheringTexture = createTextureAsync('LDR_LLL1_0.png');\nconst blurProgram = new Program(blurVertexShader, blurShader);\nconst copyProgram = new Program(baseVertexShader, copyShader);\nconst clearProgram = new Program(baseVertexShader, clearShader);\nconst colorProgram = new Program(baseVertexShader, colorShader);\nconst checkerboardProgram = new Program(baseVertexShader, checkerboardShader);\nconst bloomPrefilterProgram = new Program(baseVertexShader, bloomPrefilterShader);\nconst bloomBlurProgram = new Program(baseVertexShader, bloomBlurShader);\nconst bloomFinalProgram = new Program(baseVertexShader, bloomFinalShader);\nconst sunraysMaskProgram = new Program(baseVertexShader, sunraysMaskShader);\nconst sunraysProgram = new Program(baseVertexShader, sunraysShader);\nconst splatProgram = new Program(baseVertexShader, splatShader);\nconst advectionProgram = new Program(baseVertexShader, advectionShader);\nconst divergenceProgram = new Program(baseVertexShader, divergenceShader);\nconst curlProgram = new Program(baseVertexShader, curlShader);\nconst vorticityProgram = new Program(baseVertexShader, vorticityShader);\nconst pressureProgram = new Program(baseVertexShader, pressureShader);\nconst gradienSubtractProgram = new Program(baseVertexShader, gradientSubtractShader);\nconst displayMaterial = new Material(baseVertexShader, displayShaderSource);\nfunction initFramebuffers() {\n    let simRes = getResolution(config.SIM_RESOLUTION);\n    let dyeRes = getResolution(config.DYE_RESOLUTION);\n    const texType = ext.halfFloatTexType;\n    const rgba = ext.formatRGBA;\n    const rg = ext.formatRG;\n    const r = ext.formatR;\n    const filtering = ext.supportLinearFiltering ? gl.LINEAR : gl.NEAREST;\n    if (dye == null)\n        dye = createDoubleFBO(dyeRes.width, dyeRes.height, rgba.internalFormat, rgba.format, texType, filtering);\n    else\n        dye = resizeDoubleFBO(dye, dyeRes.width, dyeRes.height, rgba.internalFormat, rgba.format, texType, filtering);\n    if (velocity == null)\n        velocity = createDoubleFBO(simRes.width, simRes.height, rg.internalFormat, rg.format, texType, filtering);\n    else\n        velocity = resizeDoubleFBO(velocity, simRes.width, simRes.height, rg.internalFormat, rg.format, texType, filtering);\n    divergence = createFBO(simRes.width, simRes.height, r.internalFormat, r.format, texType, gl.NEAREST);\n    curl = createFBO(simRes.width, simRes.height, r.internalFormat, r.format, texType, gl.NEAREST);\n    pressure = createDoubleFBO(simRes.width, simRes.height, r.internalFormat, r.format, texType, gl.NEAREST);\n    initBloomFramebuffers();\n    initSunraysFramebuffers();\n}\nfunction initBloomFramebuffers() {\n    let res = getResolution(config.BLOOM_RESOLUTION);\n    const texType = ext.halfFloatTexType;\n    const rgba = ext.formatRGBA;\n    const filtering = ext.supportLinearFiltering ? gl.LINEAR : gl.NEAREST;\n    bloom = createFBO(res.width, res.height, rgba.internalFormat, rgba.format, texType, filtering);\n    bloomFramebuffers.length = 0;\n    for (let i = 0; i < config.BLOOM_ITERATIONS; i++) {\n        let width = res.width >> (i + 1);\n        let height = res.height >> (i + 1);\n        if (width < 2 || height < 2)\n            break;\n        let fbo = createFBO(width, height, rgba.internalFormat, rgba.format, texType, filtering);\n        bloomFramebuffers.push(fbo);\n    }\n}\nfunction initSunraysFramebuffers() {\n    let res = getResolution(config.SUNRAYS_RESOLUTION);\n    const texType = ext.halfFloatTexType;\n    const r = ext.formatR;\n    const filtering = ext.supportLinearFiltering ? gl.LINEAR : gl.NEAREST;\n    sunrays = createFBO(res.width, res.height, r.internalFormat, r.format, texType, filtering);\n    sunraysTemp = createFBO(res.width, res.height, r.internalFormat, r.format, texType, filtering);\n}\nfunction createFBO(w, h, internalFormat, format, type, param) {\n    gl.activeTexture(gl.TEXTURE0);\n    let texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, param);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, param);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texImage2D(gl.TEXTURE_2D, 0, internalFormat, w, h, 0, format, type, null);\n    let fbo = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0);\n    gl.viewport(0, 0, w, h);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    let texelSizeX = 1.0 / w;\n    let texelSizeY = 1.0 / h;\n    return {\n        texture,\n        fbo,\n        width: w,\n        height: h,\n        texelSizeX,\n        texelSizeY,\n        attach(id) {\n            gl.activeTexture(gl.TEXTURE0 + id);\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            return id;\n        },\n    };\n}\nfunction createDoubleFBO(w, h, internalFormat, format, type, param) {\n    let fbo1 = createFBO(w, h, internalFormat, format, type, param);\n    let fbo2 = createFBO(w, h, internalFormat, format, type, param);\n    return {\n        width: w,\n        height: h,\n        texelSizeX: fbo1.texelSizeX,\n        texelSizeY: fbo1.texelSizeY,\n        get read() {\n            return fbo1;\n        },\n        set read(value) {\n            fbo1 = value;\n        },\n        get write() {\n            return fbo2;\n        },\n        set write(value) {\n            fbo2 = value;\n        },\n        swap() {\n            let temp = fbo1;\n            fbo1 = fbo2;\n            fbo2 = temp;\n        },\n    };\n}\nfunction resizeFBO(target, w, h, internalFormat, format, type, param) {\n    let newFBO = createFBO(w, h, internalFormat, format, type, param);\n    copyProgram.bind();\n    gl.uniform1i(copyProgram.uniforms.uTexture, target.attach(0));\n    blit(newFBO.fbo);\n    return newFBO;\n}\nfunction resizeDoubleFBO(target, w, h, internalFormat, format, type, param) {\n    if (target.width == w && target.height == h)\n        return target;\n    target.read = resizeFBO(target.read, w, h, internalFormat, format, type, param);\n    target.write = createFBO(w, h, internalFormat, format, type, param);\n    target.width = w;\n    target.height = h;\n    target.texelSizeX = 1.0 / w;\n    target.texelSizeY = 1.0 / h;\n    return target;\n}\nfunction createTextureAsync(url) {\n    let texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB, 1, 1, 0, gl.RGB, gl.UNSIGNED_BYTE, new Uint8Array([255, 255, 255]));\n    let obj = {\n        texture,\n        width: 1,\n        height: 1,\n        attach(id) {\n            gl.activeTexture(gl.TEXTURE0 + id);\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n            return id;\n        },\n    };\n    let image = new Image();\n    //image.crossOrigin = 'anonymous'\n    image.onload = () => {\n        obj.width = image.width;\n        obj.height = image.height;\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image);\n    };\n    image.src = url;\n    return obj;\n}\nfunction updateKeywords() {\n    let displayKeywords = [];\n    if (config.SHADING)\n        displayKeywords.push('SHADING');\n    if (config.BLOOM)\n        displayKeywords.push('BLOOM');\n    if (config.SUNRAYS)\n        displayKeywords.push('SUNRAYS');\n    displayMaterial.setKeywords(displayKeywords);\n}\n// Main\nupdateKeywords();\ninitFramebuffers();\nmultipleSplats(safeParseInt(Math.random() * 20) + 5);\nlet lastUpdateTime = Date.now();\nlet colorUpdateTimer = 0.0;\nupdate();\nfunction update() {\n    const dt = calcDeltaTime();\n    if (resizeCanvas())\n        initFramebuffers();\n    applyVisualizer();\n    updateColors(dt);\n    applyInputs();\n    if (!config.PAUSED)\n        step(dt);\n    render(null);\n    requestAnimationFrame(update);\n}\nfunction calcDeltaTime() {\n    let now = Date.now();\n    let dt = (now - lastUpdateTime) / 1000;\n    dt = Math.min(dt, 0.016666);\n    lastUpdateTime = now;\n    return dt;\n}\nfunction resizeCanvas() {\n    let width = scaleByPixelRatio(canvas.clientWidth);\n    let height = scaleByPixelRatio(canvas.clientHeight);\n    if (canvas.width != width || canvas.height != height) {\n        canvas.width = width;\n        canvas.height = height;\n        return true;\n    }\n    return false;\n}\nfunction updateColors(dt) {\n    if (!config.COLORFUL)\n        return;\n    colorUpdateTimer += dt * config.COLOR_UPDATE_SPEED;\n    if (colorUpdateTimer >= 1) {\n        colorUpdateTimer = wrap(colorUpdateTimer, 0, 1);\n        pointers.forEach(p => {\n            p.colorUpdates++;\n            if (p.colorUpdates > 2) {\n                p.color = generateColor();\n            }\n        });\n    }\n}\nfunction applyInputs() {\n    if (splatStack.length > 0)\n        multipleSplats(splatStack.pop() || 0);\n    pointers.forEach(p => {\n        if (p.moved) {\n            p.moved = false;\n            splatPointer(p);\n        }\n    });\n}\n/**\n * Visualizer - added\n */\nfunction applyVisualizer() {\n    const data = songPlayer.update();\n    if (!data) {\n        return;\n    }\n    const freq = data.freq;\n    // Draw?\n    for (let i = 0; i < freq.buckets; i++) {\n        const x = i / freq.buckets;\n        const color = HSVtoRGB(x, 1.0, 1.0);\n        splat(x, 0, 0, freq.current[i] * 10, color, 0.01);\n    }\n}\nfunction step(dt) {\n    gl.disable(gl.BLEND);\n    gl.viewport(0, 0, velocity.width, velocity.height);\n    curlProgram.bind();\n    gl.uniform2f(curlProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\n    gl.uniform1i(curlProgram.uniforms.uVelocity, velocity.read.attach(0));\n    blit(curl.fbo);\n    vorticityProgram.bind();\n    gl.uniform2f(vorticityProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\n    gl.uniform1i(vorticityProgram.uniforms.uVelocity, velocity.read.attach(0));\n    gl.uniform1i(vorticityProgram.uniforms.uCurl, curl.attach(1));\n    gl.uniform1f(vorticityProgram.uniforms.curl, config.CURL);\n    gl.uniform1f(vorticityProgram.uniforms.dt, dt);\n    blit(velocity.write.fbo);\n    velocity.swap();\n    divergenceProgram.bind();\n    gl.uniform2f(divergenceProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\n    gl.uniform1i(divergenceProgram.uniforms.uVelocity, velocity.read.attach(0));\n    blit(divergence.fbo);\n    clearProgram.bind();\n    gl.uniform1i(clearProgram.uniforms.uTexture, pressure.read.attach(0));\n    gl.uniform1f(clearProgram.uniforms.value, config.PRESSURE);\n    blit(pressure.write.fbo);\n    pressure.swap();\n    pressureProgram.bind();\n    gl.uniform2f(pressureProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\n    gl.uniform1i(pressureProgram.uniforms.uDivergence, divergence.attach(0));\n    for (let i = 0; i < config.PRESSURE_ITERATIONS; i++) {\n        gl.uniform1i(pressureProgram.uniforms.uPressure, pressure.read.attach(1));\n        blit(pressure.write.fbo);\n        pressure.swap();\n    }\n    gradienSubtractProgram.bind();\n    gl.uniform2f(gradienSubtractProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\n    gl.uniform1i(gradienSubtractProgram.uniforms.uPressure, pressure.read.attach(0));\n    gl.uniform1i(gradienSubtractProgram.uniforms.uVelocity, velocity.read.attach(1));\n    blit(velocity.write.fbo);\n    velocity.swap();\n    advectionProgram.bind();\n    gl.uniform2f(advectionProgram.uniforms.texelSize, velocity.texelSizeX, velocity.texelSizeY);\n    if (!ext.supportLinearFiltering)\n        gl.uniform2f(advectionProgram.uniforms.dyeTexelSize, velocity.texelSizeX, velocity.texelSizeY);\n    let velocityId = velocity.read.attach(0);\n    gl.uniform1i(advectionProgram.uniforms.uVelocity, velocityId);\n    gl.uniform1i(advectionProgram.uniforms.uSource, velocityId);\n    gl.uniform1f(advectionProgram.uniforms.dt, dt);\n    gl.uniform1f(advectionProgram.uniforms.dissipation, config.VELOCITY_DISSIPATION);\n    blit(velocity.write.fbo);\n    velocity.swap();\n    gl.viewport(0, 0, dye.width, dye.height);\n    if (!ext.supportLinearFiltering)\n        gl.uniform2f(advectionProgram.uniforms.dyeTexelSize, dye.texelSizeX, dye.texelSizeY);\n    gl.uniform1i(advectionProgram.uniforms.uVelocity, velocity.read.attach(0));\n    gl.uniform1i(advectionProgram.uniforms.uSource, dye.read.attach(1));\n    gl.uniform1f(advectionProgram.uniforms.dissipation, config.DENSITY_DISSIPATION);\n    blit(dye.write.fbo);\n    dye.swap();\n}\nfunction render(target) {\n    if (config.BLOOM)\n        applyBloom(dye.read, bloom);\n    if (config.SUNRAYS) {\n        applySunrays(dye.read, dye.write, sunrays);\n        blurFBO(sunrays, sunraysTemp, 1);\n    }\n    if (target == null || !config.TRANSPARENT) {\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.enable(gl.BLEND);\n    }\n    else {\n        gl.disable(gl.BLEND);\n    }\n    let width = target == null ? gl.drawingBufferWidth : target.width;\n    let height = target == null ? gl.drawingBufferHeight : target.height;\n    gl.viewport(0, 0, width, height);\n    let fbo = target == null ? null : target.fbo;\n    if (!config.TRANSPARENT)\n        drawColor(fbo, normalizeColor(config.BACK_COLOR));\n    if (target == null && config.TRANSPARENT)\n        drawCheckerboard(fbo);\n    drawDisplay(fbo, width, height);\n}\nfunction drawColor(fbo, color) {\n    colorProgram.bind();\n    gl.uniform4f(colorProgram.uniforms.color, color.r, color.g, color.b, 1);\n    blit(fbo);\n}\nfunction drawCheckerboard(fbo) {\n    checkerboardProgram.bind();\n    gl.uniform1f(checkerboardProgram.uniforms.aspectRatio, canvas.width / canvas.height);\n    blit(fbo);\n}\nfunction drawDisplay(fbo, width, height) {\n    displayMaterial.bind();\n    const uniforms = notNull(displayMaterial.uniforms);\n    if (config.SHADING)\n        gl.uniform2f(uniforms.texelSize, 1.0 / width, 1.0 / height);\n    gl.uniform1i(uniforms.uTexture, dye.read.attach(0));\n    if (config.BLOOM) {\n        gl.uniform1i(uniforms.uBloom, bloom.attach(1));\n        gl.uniform1i(uniforms.uDithering, ditheringTexture.attach(2));\n        let scale = getTextureScale(ditheringTexture, width, height);\n        gl.uniform2f(uniforms.ditherScale, scale.x, scale.y);\n    }\n    if (config.SUNRAYS)\n        gl.uniform1i(uniforms.uSunrays, sunrays.attach(3));\n    blit(fbo);\n}\nfunction applyBloom(source, destination) {\n    if (bloomFramebuffers.length < 2)\n        return;\n    let last = destination;\n    gl.disable(gl.BLEND);\n    bloomPrefilterProgram.bind();\n    let knee = config.BLOOM_THRESHOLD * config.BLOOM_SOFT_KNEE + 0.0001;\n    let curve0 = config.BLOOM_THRESHOLD - knee;\n    let curve1 = knee * 2;\n    let curve2 = 0.25 / knee;\n    gl.uniform3f(bloomPrefilterProgram.uniforms.curve, curve0, curve1, curve2);\n    gl.uniform1f(bloomPrefilterProgram.uniforms.threshold, config.BLOOM_THRESHOLD);\n    gl.uniform1i(bloomPrefilterProgram.uniforms.uTexture, source.attach(0));\n    gl.viewport(0, 0, last.width, last.height);\n    blit(last.fbo);\n    bloomBlurProgram.bind();\n    for (let i = 0; i < bloomFramebuffers.length; i++) {\n        let dest = bloomFramebuffers[i];\n        gl.uniform2f(bloomBlurProgram.uniforms.texelSize, last.texelSizeX, last.texelSizeY);\n        gl.uniform1i(bloomBlurProgram.uniforms.uTexture, last.attach(0));\n        gl.viewport(0, 0, dest.width, dest.height);\n        blit(dest.fbo);\n        last = dest;\n    }\n    gl.blendFunc(gl.ONE, gl.ONE);\n    gl.enable(gl.BLEND);\n    for (let i = bloomFramebuffers.length - 2; i >= 0; i--) {\n        let baseTex = bloomFramebuffers[i];\n        gl.uniform2f(bloomBlurProgram.uniforms.texelSize, last.texelSizeX, last.texelSizeY);\n        gl.uniform1i(bloomBlurProgram.uniforms.uTexture, last.attach(0));\n        gl.viewport(0, 0, baseTex.width, baseTex.height);\n        blit(baseTex.fbo);\n        last = baseTex;\n    }\n    gl.disable(gl.BLEND);\n    bloomFinalProgram.bind();\n    gl.uniform2f(bloomFinalProgram.uniforms.texelSize, last.texelSizeX, last.texelSizeY);\n    gl.uniform1i(bloomFinalProgram.uniforms.uTexture, last.attach(0));\n    gl.uniform1f(bloomFinalProgram.uniforms.intensity, config.BLOOM_INTENSITY);\n    gl.viewport(0, 0, destination.width, destination.height);\n    blit(destination.fbo);\n}\nfunction applySunrays(source, mask, destination) {\n    gl.disable(gl.BLEND);\n    sunraysMaskProgram.bind();\n    gl.uniform1i(sunraysMaskProgram.uniforms.uTexture, source.attach(0));\n    gl.viewport(0, 0, mask.width, mask.height);\n    blit(mask.fbo);\n    sunraysProgram.bind();\n    gl.uniform1f(sunraysProgram.uniforms.weight, config.SUNRAYS_WEIGHT);\n    gl.uniform1i(sunraysProgram.uniforms.uTexture, mask.attach(0));\n    gl.viewport(0, 0, destination.width, destination.height);\n    blit(destination.fbo);\n}\nfunction blurFBO(target, temp, iterations) {\n    blurProgram.bind();\n    for (let i = 0; i < iterations; i++) {\n        gl.uniform2f(blurProgram.uniforms.texelSize, target.texelSizeX, 0.0);\n        gl.uniform1i(blurProgram.uniforms.uTexture, target.attach(0));\n        blit(temp.fbo);\n        gl.uniform2f(blurProgram.uniforms.texelSize, 0.0, target.texelSizeY);\n        gl.uniform1i(blurProgram.uniforms.uTexture, temp.attach(0));\n        blit(target.fbo);\n    }\n}\nfunction splatPointer(pointer) {\n    let dx = pointer.deltaX * config.SPLAT_FORCE;\n    let dy = pointer.deltaY * config.SPLAT_FORCE;\n    splat(pointer.texcoordX, pointer.texcoordY, dx, dy, pointer.color);\n}\nfunction multipleSplats(amount) {\n    for (let i = 0; i < amount; i++) {\n        const color = generateColor();\n        color.r *= 10.0;\n        color.g *= 10.0;\n        color.b *= 10.0;\n        const x = Math.random();\n        const y = Math.random();\n        const dx = 1000 * (Math.random() - 0.5);\n        const dy = 1000 * (Math.random() - 0.5);\n        splat(x, y, dx, dy, color);\n    }\n}\n/**\n * Splat some dye into the simulation.\n * @param x Center X coordinate. Float from 0 (left) to 1 (right)\n * @param y Center Y coordinate. Float form 0 (bottom) to 1 (top)\n * @param dx Horizontal force vector element, in pixels. Positive -> left, negative -> right.\n * @param dy Vertical force vector element, in pixels. Positive -> top, negative -> bottom.\n * @param color Color. Using { r, g, b } values >1 creates a larger splat.\n */\nfunction splat(x, y, dx, dy, color, radius) {\n    gl.viewport(0, 0, velocity.width, velocity.height);\n    splatProgram.bind();\n    gl.uniform1i(splatProgram.uniforms.uTarget, velocity.read.attach(0));\n    gl.uniform1f(splatProgram.uniforms.aspectRatio, canvas.width / canvas.height);\n    gl.uniform2f(splatProgram.uniforms.point, x, y);\n    gl.uniform3f(splatProgram.uniforms.color, dx, dy, 0.0);\n    gl.uniform1f(splatProgram.uniforms.radius, correctRadius((radius || config.SPLAT_RADIUS) / 100.0));\n    blit(velocity.write.fbo);\n    velocity.swap();\n    if (color) {\n        gl.viewport(0, 0, dye.width, dye.height);\n        gl.uniform1i(splatProgram.uniforms.uTarget, dye.read.attach(0));\n        gl.uniform3f(splatProgram.uniforms.color, color.r, color.g, color.b);\n        blit(dye.write.fbo);\n        dye.swap();\n    }\n}\n// Expose\n;\nwindow.splat = splat;\nfunction correctRadius(radius) {\n    let aspectRatio = canvas.width / canvas.height;\n    if (aspectRatio > 1)\n        radius *= aspectRatio;\n    return radius;\n}\ncanvas.addEventListener('mousedown', e => {\n    let posX = scaleByPixelRatio(e.offsetX);\n    let posY = scaleByPixelRatio(e.offsetY);\n    let pointer = pointers.find(p => p.id == -1);\n    if (pointer == null)\n        pointer = new Pointer();\n    updatePointerDownData(pointer, -1, posX, posY);\n});\ncanvas.addEventListener('mousemove', e => {\n    let pointer = pointers[0];\n    if (!pointer.down)\n        return;\n    let posX = scaleByPixelRatio(e.offsetX);\n    let posY = scaleByPixelRatio(e.offsetY);\n    updatePointerMoveData(pointer, posX, posY);\n});\nwindow.addEventListener('mouseup', () => {\n    updatePointerUpData(pointers[0]);\n});\ncanvas.addEventListener('touchstart', e => {\n    e.preventDefault();\n    const touches = e.targetTouches;\n    while (touches.length >= pointers.length)\n        pointers.push(new Pointer());\n    for (let i = 0; i < touches.length; i++) {\n        let posX = scaleByPixelRatio(touches[i].pageX);\n        let posY = scaleByPixelRatio(touches[i].pageY);\n        updatePointerDownData(pointers[i + 1], touches[i].identifier, posX, posY);\n    }\n});\ncanvas.addEventListener('touchmove', e => {\n    e.preventDefault();\n    const touches = e.targetTouches;\n    for (let i = 0; i < touches.length; i++) {\n        let pointer = pointers[i + 1];\n        if (!pointer.down)\n            continue;\n        let posX = scaleByPixelRatio(touches[i].pageX);\n        let posY = scaleByPixelRatio(touches[i].pageY);\n        updatePointerMoveData(pointer, posX, posY);\n    }\n}, false);\nwindow.addEventListener('touchend', e => {\n    const touches = e.changedTouches;\n    for (let i = 0; i < touches.length; i++) {\n        let pointer = pointers.find(p => p.id == touches[i].identifier);\n        if (pointer == null)\n            continue;\n        updatePointerUpData(pointer);\n    }\n});\nwindow.addEventListener('keydown', e => {\n    if (e.code === 'KeyP')\n        config.PAUSED = !config.PAUSED;\n    if (e.key === ' ')\n        splatStack.push(safeParseInt(Math.random() * 20) + 5);\n});\nfunction updatePointerDownData(pointer, id, posX, posY) {\n    pointer.id = id;\n    pointer.down = true;\n    pointer.moved = false;\n    pointer.texcoordX = posX / canvas.width;\n    pointer.texcoordY = 1.0 - posY / canvas.height;\n    pointer.prevTexcoordX = pointer.texcoordX;\n    pointer.prevTexcoordY = pointer.texcoordY;\n    pointer.deltaX = 0;\n    pointer.deltaY = 0;\n    pointer.colorUpdates = 0;\n    if (!config.RANDOM_COLOR) {\n        pointer.color = muteUIColor(config.SPLAT_COLOR);\n    }\n    else {\n        pointer.color = generateColor();\n    }\n}\nfunction updatePointerMoveData(pointer, posX, posY) {\n    pointer.prevTexcoordX = pointer.texcoordX;\n    pointer.prevTexcoordY = pointer.texcoordY;\n    pointer.texcoordX = posX / canvas.width;\n    pointer.texcoordY = 1.0 - posY / canvas.height;\n    pointer.deltaX = correctDeltaX(pointer.texcoordX - pointer.prevTexcoordX);\n    pointer.deltaY = correctDeltaY(pointer.texcoordY - pointer.prevTexcoordY);\n    pointer.moved = Math.abs(pointer.deltaX) > 0 || Math.abs(pointer.deltaY) > 0;\n}\nfunction updatePointerUpData(pointer) {\n    pointer.down = false;\n}\nfunction correctDeltaX(delta) {\n    let aspectRatio = canvas.width / canvas.height;\n    if (aspectRatio < 1)\n        delta *= aspectRatio;\n    return delta;\n}\nfunction correctDeltaY(delta) {\n    let aspectRatio = canvas.width / canvas.height;\n    if (aspectRatio > 1)\n        delta /= aspectRatio;\n    return delta;\n}\nfunction generateColor() {\n    let c = HSVtoRGB(Math.random(), 1.0, 1.0);\n    c.r *= 0.15;\n    c.g *= 0.15;\n    c.b *= 0.15;\n    return c;\n}\nfunction HSVtoRGB(h, s, v) {\n    let r = 0, g = 0, b = 0, i = 0, f = 0, p = 0, q = 0, t = 0;\n    i = Math.floor(h * 6);\n    f = h * 6 - i;\n    p = v * (1 - s);\n    q = v * (1 - f * s);\n    t = v * (1 - (1 - f) * s);\n    switch (i % 6) {\n        case 0:\n            ;\n            (r = v), (g = t), (b = p);\n            break;\n        case 1:\n            ;\n            (r = q), (g = v), (b = p);\n            break;\n        case 2:\n            ;\n            (r = p), (g = v), (b = t);\n            break;\n        case 3:\n            ;\n            (r = p), (g = q), (b = v);\n            break;\n        case 4:\n            ;\n            (r = t), (g = p), (b = v);\n            break;\n        case 5:\n            ;\n            (r = v), (g = p), (b = q);\n            break;\n    }\n    return {\n        r,\n        g,\n        b,\n    };\n}\nfunction normalizeColor(input) {\n    let output = {\n        r: input.r / 255,\n        g: input.g / 255,\n        b: input.b / 255,\n    };\n    return output;\n}\nfunction tfColor(input, tf) {\n    let output = {\n        r: tf(input.r),\n        g: tf(input.g),\n        b: tf(input.b),\n    };\n    return output;\n}\nconst muteUIColor = (color) => tfColor(color, x => x / 270 + 0.05);\nfunction wrap(value, min, max) {\n    let range = max - min;\n    if (range == 0)\n        return min;\n    return ((value - min) % range) + min;\n}\nfunction getResolution(resolution) {\n    let aspectRatio = gl.drawingBufferWidth / gl.drawingBufferHeight;\n    if (aspectRatio < 1)\n        aspectRatio = 1.0 / aspectRatio;\n    let min = Math.round(resolution);\n    let max = Math.round(resolution * aspectRatio);\n    if (gl.drawingBufferWidth > gl.drawingBufferHeight)\n        return { width: max, height: min };\n    else\n        return { width: min, height: max };\n}\nfunction getTextureScale(texture, width, height) {\n    return {\n        x: width / texture.width,\n        y: height / texture.height,\n    };\n}\nfunction scaleByPixelRatio(input) {\n    let pixelRatio = window.devicePixelRatio || 1;\n    return Math.floor(input * pixelRatio);\n}\nfunction hashCode(s) {\n    if (s.length == 0)\n        return 0;\n    let hash = 0;\n    for (let i = 0; i < s.length; i++) {\n        hash = (hash << 5) - hash + s.charCodeAt(i);\n        hash |= 0; // Convert to 32bit integer\n    }\n    return hash;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zY3JpcHQudHMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zY3JpcHQudHM/NThhNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuTUlUIExpY2Vuc2VcblxuQ29weXJpZ2h0IChjKSAyMDE3IFBhdmVsIERvYnJ5YWtvdlxuVHlwZXNjcmlwdCBmb3JrIChjKSAyMDIwIEpha2UgVGV0b24tTGFuZGlzXG5cblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXG5jb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXG5TT0ZUV0FSRS5cbiovXG5cbmRlY2xhcmUgY29uc3QgZGF0OiB0eXBlb2YgaW1wb3J0KCdkYXQuZ3VpJylcbmltcG9ydCB7IFNvbmdQbGF5ZXIgfSBmcm9tICcuL2F1ZGlvJ1xuXG5mdW5jdGlvbiBzYWZlUGFyc2VJbnQoeDogbnVtYmVyKSB7XG4gIHJldHVybiBwYXJzZUludCh4LnRvU3RyaW5nKCkpXG59XG5cbmZ1bmN0aW9uIG5vdE51bGw8VD4odmFsdWU6IFQsIG1zZz86IHN0cmluZyk6IE5vbk51bGxhYmxlPFQ+IHtcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IobXNnIHx8ICd2YWx1ZSB1bmV4cGVjdGVkbHkgbnVsbCcpXG4gIH1cbiAgcmV0dXJuIHZhbHVlIGFzIGFueSAvLyBUT0RPXG59XG5cbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdjYW52YXMnKVswXVxucmVzaXplQ2FudmFzKClcblxudmFyIHNvbmdQbGF5ZXIgPSBuZXcgU29uZ1BsYXllcigpXG4gIC8vIEV4cG9zZSBmb3IgZGVidWdnaW5nIHNpbmNlIG91ciBnbG9iYWxzIGFyZSBub3cgaGlkZGVuIGJ5IFdlYnBhY2sncyBtb2R1bGUgd3JhcHBlclxuICAvLyBmcm9tIGFwcGVhcmluZyBvbiB0aGUgd2luZG93LlxuOyh3aW5kb3cgYXMgYW55KS5zb25nUGxheWVyID0gc29uZ1BsYXllclxuXG5jb25zdCBTaG9ydGN1dHMgPSB7XG4gIEJsYWNrOiB7IHI6IDAsIGc6IDAsIGI6IDAgfSxcbiAgUmVkOiB7IHI6IDI0NSwgZzogMCwgYjogMCB9LFxuICBOb3Rpb25NYXJrZXRpbmdCYWNrZ3JvdW5kOiB7IHI6IDI1NSwgZzogMjU0LCBiOiAyNTIgfSxcbiAgRmxvYXRTb25nOiAnaHR0cHM6Ly9zb3VuZGNsb3VkLmNvbS9jb2x0b25nb3JnL2Zsb2F0aW5nJyxcbiAgU2ltb25Tb25nOiAnaHR0cHM6Ly9zb3VuZGNsb3VkLmNvbS9zaW1vbmxhc3Qvc2Vzc2lvbl83NCcsXG59XG5cbmZ1bmN0aW9uIGR1cDxUPih2YWw6IFQpOiBUIHtcbiAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodmFsKSlcbn1cblxuY29uc3QgY29uZmlnID0ge1xuICBTSU1fUkVTT0xVVElPTjogNTEyLFxuICBEWUVfUkVTT0xVVElPTjogMTAyNCxcbiAgQ0FQVFVSRV9SRVNPTFVUSU9OOiA1MTIsXG4gIERFTlNJVFlfRElTU0lQQVRJT046IDEsXG4gIFZFTE9DSVRZX0RJU1NJUEFUSU9OOiAwLjIsXG4gIFBSRVNTVVJFOiAwLjgsXG4gIFBSRVNTVVJFX0lURVJBVElPTlM6IDIwLFxuICBDVVJMOiAzMCxcbiAgU1BMQVRfUkFESVVTOiAwLjI1LFxuICBTUExBVF9GT1JDRTogNjAwMCxcbiAgU0hBRElORzogdHJ1ZSxcbiAgU1BMQVRfQ09MT1I6IGR1cChTaG9ydGN1dHMuUmVkKSxcbiAgUkFORE9NX0NPTE9SOiB0cnVlLFxuICBDT0xPUkZVTDogdHJ1ZSxcbiAgQ09MT1JfVVBEQVRFX1NQRUVEOiAxMCxcbiAgUEFVU0VEOiBmYWxzZSxcbiAgQkFDS19DT0xPUjogZHVwKFNob3J0Y3V0cy5CbGFjayksXG4gIFRSQU5TUEFSRU5UOiBmYWxzZSxcbiAgQkxPT006IGZhbHNlLCAvLyBUUlVFXG4gIEJMT09NX0lURVJBVElPTlM6IDgsXG4gIEJMT09NX1JFU09MVVRJT046IDI1NixcbiAgQkxPT01fSU5URU5TSVRZOiAwLjgsXG4gIEJMT09NX1RIUkVTSE9MRDogMC42LFxuICBCTE9PTV9TT0ZUX0tORUU6IDAuNyxcbiAgU1VOUkFZUzogdHJ1ZSxcbiAgU1VOUkFZU19SRVNPTFVUSU9OOiAxOTYsXG4gIFNVTlJBWVNfV0VJR0hUOiAxLjAsXG59XG5cbmNsYXNzIFBvaW50ZXIge1xuICBpZCA9IC0xXG4gIHRleGNvb3JkWCA9IDBcbiAgdGV4Y29vcmRZID0gMFxuICBwcmV2VGV4Y29vcmRYID0gMFxuICBwcmV2VGV4Y29vcmRZID0gMFxuICBkZWx0YVggPSAwXG4gIGRlbHRhWSA9IDBcbiAgZG93biA9IGZhbHNlXG4gIG1vdmVkID0gZmFsc2VcbiAgY29sb3I6IENvbG9yID0geyByOiAwLCBnOiAwLCBiOiAwIH1cbiAgY29sb3JVcGRhdGVzID0gMFxufVxuXG5sZXQgcG9pbnRlcnM6IFBvaW50ZXJbXSA9IFtdXG5sZXQgc3BsYXRTdGFjazogbnVtYmVyW10gPSBbXVxucG9pbnRlcnMucHVzaChuZXcgUG9pbnRlcigpKVxuXG5jb25zdCB7IGdsLCBleHQgfSA9IGdldFdlYkdMQ29udGV4dChjYW52YXMpXG5cbmlmIChpc01vYmlsZSgpKSB7XG4gIGNvbmZpZy5EWUVfUkVTT0xVVElPTiA9IDUxMlxufVxuaWYgKCFleHQuc3VwcG9ydExpbmVhckZpbHRlcmluZykge1xuICBjb25maWcuRFlFX1JFU09MVVRJT04gPSA1MTJcbiAgY29uZmlnLlNIQURJTkcgPSBmYWxzZVxuICBjb25maWcuQkxPT00gPSBmYWxzZVxuICBjb25maWcuU1VOUkFZUyA9IGZhbHNlXG59XG5cbnN0YXJ0R1VJKClcblxudHlwZSBHTFR5cGUgPSBXZWJHTDJSZW5kZXJpbmdDb250ZXh0ICYgV2ViR0xSZW5kZXJpbmdDb250ZXh0XG5cbmZ1bmN0aW9uIGdldFdlYkdMQ29udGV4dChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XG4gIGNvbnN0IHBhcmFtczogV2ViR0xDb250ZXh0QXR0cmlidXRlcyA9IHtcbiAgICBhbHBoYTogdHJ1ZSxcbiAgICBkZXB0aDogZmFsc2UsXG4gICAgc3RlbmNpbDogZmFsc2UsXG4gICAgYW50aWFsaWFzOiBmYWxzZSxcbiAgICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IGZhbHNlLFxuICB9XG5cbiAgY29uc3QgZ2wyID0gY2FudmFzLmdldENvbnRleHQoJ3dlYmdsMicsIHBhcmFtcylcbiAgY29uc3QgZ2w6IEdMVHlwZSA9XG4gICAgZ2wyIHx8XG4gICAgY2FudmFzLmdldENvbnRleHQoJ3dlYmdsJywgcGFyYW1zKSB8fFxuICAgIChjYW52YXMuZ2V0Q29udGV4dCgnZXhwZXJpbWVudGFsLXdlYmdsJywgcGFyYW1zKSBhcyBhbnkpXG4gIGNvbnN0IGlzV2ViR0wyID0gISFnbDJcblxuICBsZXQgaGFsZkZsb2F0OiBPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0ID0gdW5kZWZpbmVkIGFzIGFueVxuICBsZXQgc3VwcG9ydExpbmVhckZpbHRlcmluZzogT0VTX3RleHR1cmVfZmxvYXRfbGluZWFyIHwgT0VTX3RleHR1cmVfaGFsZl9mbG9hdF9saW5lYXJcbiAgaWYgKGlzV2ViR0wyKSB7XG4gICAgZ2wuZ2V0RXh0ZW5zaW9uKCdFWFRfY29sb3JfYnVmZmVyX2Zsb2F0JylcbiAgICBzdXBwb3J0TGluZWFyRmlsdGVyaW5nID0gZ2wuZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXInKSFcbiAgfSBlbHNlIHtcbiAgICBoYWxmRmxvYXQgPSBnbC5nZXRFeHRlbnNpb24oJ09FU190ZXh0dXJlX2hhbGZfZmxvYXQnKSFcbiAgICBzdXBwb3J0TGluZWFyRmlsdGVyaW5nID0gZ2wuZ2V0RXh0ZW5zaW9uKCdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhcicpIVxuICB9XG5cbiAgZ2wuY2xlYXJDb2xvcigwLjAsIDAuMCwgMC4wLCAxLjApXG5cbiAgY29uc3QgaGFsZkZsb2F0VGV4VHlwZSA9IGlzV2ViR0wyID8gZ2wuSEFMRl9GTE9BVCA6IGhhbGZGbG9hdC5IQUxGX0ZMT0FUX09FU1xuICBsZXQgZm9ybWF0UkdCQTogUmV0dXJuVHlwZTx0eXBlb2YgZ2V0U3VwcG9ydGVkRm9ybWF0PlxuICBsZXQgZm9ybWF0Ukc6IFJldHVyblR5cGU8dHlwZW9mIGdldFN1cHBvcnRlZEZvcm1hdD5cbiAgbGV0IGZvcm1hdFI6IFJldHVyblR5cGU8dHlwZW9mIGdldFN1cHBvcnRlZEZvcm1hdD5cblxuICBpZiAoaXNXZWJHTDIpIHtcbiAgICBmb3JtYXRSR0JBID0gZ2V0U3VwcG9ydGVkRm9ybWF0KGdsLCBnbC5SR0JBMTZGLCBnbC5SR0JBLCBoYWxmRmxvYXRUZXhUeXBlKVxuICAgIGZvcm1hdFJHID0gZ2V0U3VwcG9ydGVkRm9ybWF0KGdsLCBnbC5SRzE2RiwgZ2wuUkcsIGhhbGZGbG9hdFRleFR5cGUpXG4gICAgZm9ybWF0UiA9IGdldFN1cHBvcnRlZEZvcm1hdChnbCwgZ2wuUjE2RiwgZ2wuUkVELCBoYWxmRmxvYXRUZXhUeXBlKVxuICB9IGVsc2Uge1xuICAgIGZvcm1hdFJHQkEgPSBnZXRTdXBwb3J0ZWRGb3JtYXQoZ2wsIGdsLlJHQkEsIGdsLlJHQkEsIGhhbGZGbG9hdFRleFR5cGUpXG4gICAgZm9ybWF0UkcgPSBnZXRTdXBwb3J0ZWRGb3JtYXQoZ2wsIGdsLlJHQkEsIGdsLlJHQkEsIGhhbGZGbG9hdFRleFR5cGUpXG4gICAgZm9ybWF0UiA9IGdldFN1cHBvcnRlZEZvcm1hdChnbCwgZ2wuUkdCQSwgZ2wuUkdCQSwgaGFsZkZsb2F0VGV4VHlwZSlcbiAgfVxuXG4gIC8vIEFzc3VtZXMgZ2xvYmFsIEdvb2dsZSBBbmFseXRpY3MsIGRpc2FibGVkLlxuICAvL2dhKCdzZW5kJywgJ2V2ZW50JywgaXNXZWJHTDIgPyAnd2ViZ2wyJyA6ICd3ZWJnbCcsIGZvcm1hdFJHQkEgPT0gbnVsbCA/ICdub3Qgc3VwcG9ydGVkJyA6ICdzdXBwb3J0ZWQnKTtcblxuICByZXR1cm4ge1xuICAgIGdsLFxuICAgIGV4dDoge1xuICAgICAgZm9ybWF0UkdCQSxcbiAgICAgIGZvcm1hdFJHLFxuICAgICAgZm9ybWF0UixcbiAgICAgIGhhbGZGbG9hdFRleFR5cGUsXG4gICAgICBzdXBwb3J0TGluZWFyRmlsdGVyaW5nLFxuICAgIH0sXG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0U3VwcG9ydGVkRm9ybWF0KFxuICBnbDogR0xUeXBlLFxuICBpbnRlcm5hbEZvcm1hdDogbnVtYmVyLFxuICBmb3JtYXQ6IG51bWJlcixcbiAgdHlwZTogbnVtYmVyXG4pOiB7IGludGVybmFsRm9ybWF0OiBudW1iZXI7IGZvcm1hdDogbnVtYmVyIH0ge1xuICAvKiogVE9ETzogfCBudWxsICovXG4gIGlmICghc3VwcG9ydFJlbmRlclRleHR1cmVGb3JtYXQoZ2wsIGludGVybmFsRm9ybWF0LCBmb3JtYXQsIHR5cGUpKSB7XG4gICAgc3dpdGNoIChpbnRlcm5hbEZvcm1hdCkge1xuICAgICAgY2FzZSBnbC5SMTZGOlxuICAgICAgICByZXR1cm4gZ2V0U3VwcG9ydGVkRm9ybWF0KGdsLCBnbC5SRzE2RiwgZ2wuUkcsIHR5cGUpXG4gICAgICBjYXNlIGdsLlJHMTZGOlxuICAgICAgICByZXR1cm4gZ2V0U3VwcG9ydGVkRm9ybWF0KGdsLCBnbC5SR0JBMTZGLCBnbC5SR0JBLCB0eXBlKVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGwgYXMgYW55IC8vIFRPRE9cbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGludGVybmFsRm9ybWF0LFxuICAgIGZvcm1hdCxcbiAgfVxufVxuXG5mdW5jdGlvbiBzdXBwb3J0UmVuZGVyVGV4dHVyZUZvcm1hdChcbiAgZ2w6IEdMVHlwZSxcbiAgaW50ZXJuYWxGb3JtYXQ6IG51bWJlcixcbiAgZm9ybWF0OiBudW1iZXIsXG4gIHR5cGU6IG51bWJlclxuKSB7XG4gIGxldCB0ZXh0dXJlID0gZ2wuY3JlYXRlVGV4dHVyZSgpXG4gIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmUpXG4gIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBnbC5ORUFSRVNUKVxuICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTkVBUkVTVClcbiAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuQ0xBTVBfVE9fRURHRSlcbiAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuQ0xBTVBfVE9fRURHRSlcbiAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBpbnRlcm5hbEZvcm1hdCwgNCwgNCwgMCwgZm9ybWF0LCB0eXBlLCBudWxsKVxuXG4gIGxldCBmYm8gPSBnbC5jcmVhdGVGcmFtZWJ1ZmZlcigpXG4gIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZmJvKVxuICBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChnbC5GUkFNRUJVRkZFUiwgZ2wuQ09MT1JfQVRUQUNITUVOVDAsIGdsLlRFWFRVUkVfMkQsIHRleHR1cmUsIDApXG5cbiAgY29uc3Qgc3RhdHVzID0gZ2wuY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyhnbC5GUkFNRUJVRkZFUilcbiAgcmV0dXJuIHN0YXR1cyA9PSBnbC5GUkFNRUJVRkZFUl9DT01QTEVURVxufVxuXG5mdW5jdGlvbiBzdGFydEdVSSgpIHtcbiAgdmFyIGd1aSA9IG5ldyBkYXQuR1VJKHsgd2lkdGg6IDMwMCB9KVxuICBndWlcbiAgICAuYWRkKGNvbmZpZywgJ0RZRV9SRVNPTFVUSU9OJywge1xuICAgICAgdWx0cmE6IDIwNDgsXG4gICAgICBoaWdoOiAxMDI0LFxuICAgICAgbWVkaXVtOiA1MTIsXG4gICAgICBsb3c6IDI1NixcbiAgICAgICd2ZXJ5IGxvdyc6IDEyOCxcbiAgICB9KVxuICAgIC5uYW1lKCdxdWFsaXR5JylcbiAgICAub25GaW5pc2hDaGFuZ2UoaW5pdEZyYW1lYnVmZmVycylcbiAgZ3VpXG4gICAgLmFkZChjb25maWcsICdTSU1fUkVTT0xVVElPTicsIHsgJzMyJzogMzIsICc2NCc6IDY0LCAnMTI4JzogMTI4LCAnMjU2JzogMjU2LCAnNTEyJzogNTEyIH0pXG4gICAgLm5hbWUoJ3NpbSByZXNvbHV0aW9uJylcbiAgICAub25GaW5pc2hDaGFuZ2UoaW5pdEZyYW1lYnVmZmVycylcbiAgZ3VpLmFkZChjb25maWcsICdERU5TSVRZX0RJU1NJUEFUSU9OJywgMCwgNC4wKS5uYW1lKCdkZW5zaXR5IGRpZmZ1c2lvbicpXG4gIGd1aS5hZGQoY29uZmlnLCAnVkVMT0NJVFlfRElTU0lQQVRJT04nLCAwLCA0LjApLm5hbWUoJ3ZlbG9jaXR5IGRpZmZ1c2lvbicpXG4gIGd1aS5hZGQoY29uZmlnLCAnUFJFU1NVUkUnLCAwLjAsIDEuMCkubmFtZSgncHJlc3N1cmUnKVxuICBndWlcbiAgICAuYWRkKGNvbmZpZywgJ0NVUkwnLCAwLCA1MClcbiAgICAubmFtZSgndm9ydGljaXR5JylcbiAgICAuc3RlcCgxKVxuICBndWkuYWRkKGNvbmZpZywgJ1NQTEFUX1JBRElVUycsIDAuMDEsIDEuMCkubmFtZSgnc3BsYXQgcmFkaXVzJylcbiAgZ3VpXG4gICAgLmFkZChjb25maWcsICdTSEFESU5HJylcbiAgICAubmFtZSgnc2hhZGluZycpXG4gICAgLm9uRmluaXNoQ2hhbmdlKHVwZGF0ZUtleXdvcmRzKVxuICBndWkuYWRkQ29sb3IoY29uZmlnLCAnU1BMQVRfQ09MT1InKS5uYW1lKCdTcGxhdCBjb2xvcicpXG4gIGd1aS5hZGQoY29uZmlnLCAnUkFORE9NX0NPTE9SJykubmFtZSgnVXNlIHJhbmRvbSBjb2xvcicpXG4gIGd1aS5hZGQoY29uZmlnLCAnQ09MT1JGVUwnKS5uYW1lKCdQYWludCB0aGUgcmFpbmJvdycpXG4gIGd1aVxuICAgIC5hZGQoY29uZmlnLCAnUEFVU0VEJylcbiAgICAubmFtZSgncGF1c2VkJylcbiAgICAubGlzdGVuKClcblxuICBndWlcbiAgICAuYWRkKFxuICAgICAge1xuICAgICAgICBmdW46ICgpID0+IHtcbiAgICAgICAgICBzcGxhdFN0YWNrLnB1c2goc2FmZVBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiAyMCkgKyA1KVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgICdmdW4nXG4gICAgKVxuICAgIC5uYW1lKCdSYW5kb20gc3BsYXRzJylcblxuICBndWlcbiAgICAuYWRkKFxuICAgICAge1xuICAgICAgICBmdW46ICgpID0+IHtcbiAgICAgICAgICBzb25nUGxheWVyLnNldFNvdW5kY2xvdWRVcmwoU2hvcnRjdXRzLlNpbW9uU29uZylcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICAnZnVuJ1xuICAgIClcbiAgICAubmFtZSgnUGxheSBTb3VuZGNsb3VkIFZpc3VhbGl6ZXIgKFdJUCknKVxuXG4gIGxldCBibG9vbUZvbGRlciA9IGd1aS5hZGRGb2xkZXIoJ0Jsb29tJylcbiAgYmxvb21Gb2xkZXJcbiAgICAuYWRkKGNvbmZpZywgJ0JMT09NJylcbiAgICAubmFtZSgnZW5hYmxlZCcpXG4gICAgLm9uRmluaXNoQ2hhbmdlKHVwZGF0ZUtleXdvcmRzKVxuICBibG9vbUZvbGRlci5hZGQoY29uZmlnLCAnQkxPT01fSU5URU5TSVRZJywgMC4xLCAyLjApLm5hbWUoJ2ludGVuc2l0eScpXG4gIGJsb29tRm9sZGVyLmFkZChjb25maWcsICdCTE9PTV9USFJFU0hPTEQnLCAwLjAsIDEuMCkubmFtZSgndGhyZXNob2xkJylcblxuICBsZXQgc3VucmF5c0ZvbGRlciA9IGd1aS5hZGRGb2xkZXIoJ1N1bnJheXMnKVxuICBzdW5yYXlzRm9sZGVyXG4gICAgLmFkZChjb25maWcsICdTVU5SQVlTJylcbiAgICAubmFtZSgnZW5hYmxlZCcpXG4gICAgLm9uRmluaXNoQ2hhbmdlKHVwZGF0ZUtleXdvcmRzKVxuICBzdW5yYXlzRm9sZGVyLmFkZChjb25maWcsICdTVU5SQVlTX1dFSUdIVCcsIDAuMywgMS4wKS5uYW1lKCd3ZWlnaHQnKVxuXG4gIGxldCBjYXB0dXJlRm9sZGVyID0gZ3VpLmFkZEZvbGRlcignQ2FwdHVyZScpXG4gIGNhcHR1cmVGb2xkZXIuYWRkQ29sb3IoY29uZmlnLCAnQkFDS19DT0xPUicpLm5hbWUoJ2JhY2tncm91bmQgY29sb3InKVxuICBjYXB0dXJlRm9sZGVyLmFkZChjb25maWcsICdUUkFOU1BBUkVOVCcpLm5hbWUoJ3RyYW5zcGFyZW50JylcbiAgY2FwdHVyZUZvbGRlci5hZGQoeyBmdW46IGNhcHR1cmVTY3JlZW5zaG90IH0sICdmdW4nKS5uYW1lKCd0YWtlIHNjcmVlbnNob3QnKVxuXG4gIHR5cGUgR1VJQ29udHJvbGxlckxpc3RJdGVtID0gZGF0LkdVSUNvbnRyb2xsZXIgJiB7IF9fbGk6IEhUTUxPTGlzdEVsZW1lbnQgfVxuXG4gIGxldCBnaXRodWIgPSBndWlcbiAgICAuYWRkKFxuICAgICAge1xuICAgICAgICBmdW46ICgpID0+IHtcbiAgICAgICAgICB3aW5kb3cub3BlbignaHR0cHM6Ly9naXRodWIuY29tL2p1c3RqYWtlL1dlYkdMLUZsdWlkLVNpbXVsYXRpb24nKVxuICAgICAgICAgIC8vZ2EoJ3NlbmQnLCAnZXZlbnQnLCAnbGluayBidXR0b24nLCAnZ2l0aHViJyk7XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgJ2Z1bidcbiAgICApXG4gICAgLm5hbWUoJ1R5cGVzY3JpcHQnKSBhcyBHVUlDb250cm9sbGVyTGlzdEl0ZW1cbiAgZ2l0aHViLl9fbGkuY2xhc3NOYW1lID0gJ2NyIGZ1bmN0aW9uIGJpZ0ZvbnQnXG4gIGdpdGh1Yi5fX2xpLnN0eWxlLmJvcmRlckxlZnQgPSAnM3B4IHNvbGlkICM4QzhDOEMnXG4gIGxldCBnaXRodWJJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXG4gIGdpdGh1Yi5kb21FbGVtZW50LnBhcmVudEVsZW1lbnQhLmFwcGVuZENoaWxkKGdpdGh1Ykljb24pXG4gIGdpdGh1Ykljb24uY2xhc3NOYW1lID0gJ2ljb24gZ2l0aHViJ1xuXG4gIGxldCBvcmlnaW5hbCA9IGd1aVxuICAgIC5hZGQoXG4gICAgICB7XG4gICAgICAgIGZ1bjogKCkgPT4ge1xuICAgICAgICAgIHdpbmRvdy5vcGVuKCdodHRwczovL2dpdGh1Yi5jb20vUGF2ZWxEb0dyZWF0L1dlYkdMLUZsdWlkLVNpbXVsYXRpb24nKVxuICAgICAgICAgIC8vZ2EoJ3NlbmQnLCAnZXZlbnQnLCAnbGluayBidXR0b24nLCAnZ2l0aHViJyk7XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgJ2Z1bidcbiAgICApXG4gICAgLm5hbWUoJ09yaWdpbmFsJykgYXMgR1VJQ29udHJvbGxlckxpc3RJdGVtXG4gIG9yaWdpbmFsLl9fbGkuY2xhc3NOYW1lID0gJ2NyIGZ1bmN0aW9uIGJpZ0ZvbnQnXG4gIG9yaWdpbmFsLl9fbGkuc3R5bGUuYm9yZGVyTGVmdCA9ICczcHggc29saWQgIzhDOEM4QydcbiAgbGV0IG9yaWdpbmFsR2l0aHViSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICBvcmlnaW5hbC5kb21FbGVtZW50LnBhcmVudEVsZW1lbnQhLmFwcGVuZENoaWxkKG9yaWdpbmFsR2l0aHViSWNvbilcbiAgb3JpZ2luYWxHaXRodWJJY29uLmNsYXNzTmFtZSA9ICdpY29uIGdpdGh1YidcblxuICBpZiAoaXNNb2JpbGUoKSkgZ3VpLmNsb3NlKClcbn1cblxuZnVuY3Rpb24gaXNNb2JpbGUoKSB7XG4gIHJldHVybiAvTW9iaXxBbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KVxufVxuXG5mdW5jdGlvbiBjYXB0dXJlU2NyZWVuc2hvdCgpIHtcbiAgbGV0IHJlcyA9IGdldFJlc29sdXRpb24oY29uZmlnLkNBUFRVUkVfUkVTT0xVVElPTilcbiAgbGV0IHRhcmdldCA9IGNyZWF0ZUZCTyhcbiAgICByZXMud2lkdGgsXG4gICAgcmVzLmhlaWdodCxcbiAgICBleHQuZm9ybWF0UkdCQS5pbnRlcm5hbEZvcm1hdCxcbiAgICBleHQuZm9ybWF0UkdCQS5mb3JtYXQsXG4gICAgZXh0LmhhbGZGbG9hdFRleFR5cGUsXG4gICAgZ2wuTkVBUkVTVFxuICApXG4gIHJlbmRlcih0YXJnZXQpXG5cbiAgbGV0IHRleHR1cmU6IFVpbnQ4QXJyYXkgfCBGbG9hdDMyQXJyYXkgPSBmcmFtZWJ1ZmZlclRvVGV4dHVyZSh0YXJnZXQpXG4gIHRleHR1cmUgPSBub3JtYWxpemVUZXh0dXJlKHRleHR1cmUsIHRhcmdldC53aWR0aCwgdGFyZ2V0LmhlaWdodClcblxuICBsZXQgY2FwdHVyZUNhbnZhcyA9IHRleHR1cmVUb0NhbnZhcyh0ZXh0dXJlLCB0YXJnZXQud2lkdGgsIHRhcmdldC5oZWlnaHQpXG4gIGxldCBkYXRhdXJpID0gY2FwdHVyZUNhbnZhcy50b0RhdGFVUkwoKVxuICBkb3dubG9hZFVSSSgnZmx1aWQucG5nJywgZGF0YXVyaSlcbiAgVVJMLnJldm9rZU9iamVjdFVSTChkYXRhdXJpKVxufVxuXG5mdW5jdGlvbiBmcmFtZWJ1ZmZlclRvVGV4dHVyZSh0YXJnZXQ6IEZCTykge1xuICBnbC5iaW5kRnJhbWVidWZmZXIoZ2wuRlJBTUVCVUZGRVIsIHRhcmdldC5mYm8pXG4gIGxldCBsZW5ndGggPSB0YXJnZXQud2lkdGggKiB0YXJnZXQuaGVpZ2h0ICogNFxuICBsZXQgdGV4dHVyZSA9IG5ldyBGbG9hdDMyQXJyYXkobGVuZ3RoKVxuICBnbC5yZWFkUGl4ZWxzKDAsIDAsIHRhcmdldC53aWR0aCwgdGFyZ2V0LmhlaWdodCwgZ2wuUkdCQSwgZ2wuRkxPQVQsIHRleHR1cmUpXG4gIHJldHVybiB0ZXh0dXJlXG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVRleHR1cmUodGV4dHVyZTogRmxvYXQzMkFycmF5LCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICBsZXQgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodGV4dHVyZS5sZW5ndGgpXG4gIGxldCBpZCA9IDBcbiAgZm9yIChsZXQgaSA9IGhlaWdodCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7XG4gICAgICBsZXQgbmlkID0gaSAqIHdpZHRoICogNCArIGogKiA0XG4gICAgICByZXN1bHRbbmlkICsgMF0gPSBjbGFtcDAxKHRleHR1cmVbaWQgKyAwXSkgKiAyNTVcbiAgICAgIHJlc3VsdFtuaWQgKyAxXSA9IGNsYW1wMDEodGV4dHVyZVtpZCArIDFdKSAqIDI1NVxuICAgICAgcmVzdWx0W25pZCArIDJdID0gY2xhbXAwMSh0ZXh0dXJlW2lkICsgMl0pICogMjU1XG4gICAgICByZXN1bHRbbmlkICsgM10gPSBjbGFtcDAxKHRleHR1cmVbaWQgKyAzXSkgKiAyNTVcbiAgICAgIGlkICs9IDRcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5mdW5jdGlvbiBjbGFtcDAxKGlucHV0OiBudW1iZXIpIHtcbiAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KGlucHV0LCAwKSwgMSlcbn1cblxuZnVuY3Rpb24gdGV4dHVyZVRvQ2FudmFzKHRleHR1cmU6IFVpbnQ4QXJyYXksIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gIGxldCBjYXB0dXJlQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJylcbiAgbGV0IGN0eCA9IG5vdE51bGwoY2FwdHVyZUNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLCAnY2FudmFzLmdldENvbnRleHQoMmQpJylcbiAgY2FwdHVyZUNhbnZhcy53aWR0aCA9IHdpZHRoXG4gIGNhcHR1cmVDYW52YXMuaGVpZ2h0ID0gaGVpZ2h0XG5cbiAgbGV0IGltYWdlRGF0YSA9IGN0eC5jcmVhdGVJbWFnZURhdGEod2lkdGgsIGhlaWdodClcbiAgaW1hZ2VEYXRhLmRhdGEuc2V0KHRleHR1cmUpXG4gIGN0eC5wdXRJbWFnZURhdGEoaW1hZ2VEYXRhLCAwLCAwKVxuXG4gIHJldHVybiBjYXB0dXJlQ2FudmFzXG59XG5cbmZ1bmN0aW9uIGRvd25sb2FkVVJJKGZpbGVuYW1lOiBzdHJpbmcsIHVyaTogc3RyaW5nKSB7XG4gIGxldCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gIGxpbmsuZG93bmxvYWQgPSBmaWxlbmFtZVxuICBsaW5rLmhyZWYgPSB1cmlcbiAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsaW5rKVxuICBsaW5rLmNsaWNrKClcbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKVxufVxuXG5jbGFzcyBNYXRlcmlhbCB7XG4gIHByb2dyYW1zOiBXZWJHTFByb2dyYW1bXSA9IFtdXG4gIGFjdGl2ZVByb2dyYW06IFdlYkdMUHJvZ3JhbSB8IG51bGwgPSBudWxsXG4gIHVuaWZvcm1zOiBVbmlmb3JtcyB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZFxuICBjb25zdHJ1Y3RvcihwdWJsaWMgdmVydGV4U2hhZGVyOiBXZWJHTFNoYWRlciwgcHVibGljIGZyYWdtZW50U2hhZGVyU291cmNlOiBzdHJpbmcpIHt9XG5cbiAgc2V0S2V5d29yZHMoa2V5d29yZHM6IHN0cmluZ1tdKSB7XG4gICAgbGV0IGhhc2ggPSAwXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXl3b3Jkcy5sZW5ndGg7IGkrKykgaGFzaCArPSBoYXNoQ29kZShrZXl3b3Jkc1tpXSlcblxuICAgIGxldCBwcm9ncmFtOiBXZWJHTFByb2dyYW0gfCBudWxsID0gdGhpcy5wcm9ncmFtc1toYXNoXVxuICAgIGlmIChwcm9ncmFtID09IG51bGwpIHtcbiAgICAgIGxldCBmcmFnbWVudFNoYWRlciA9IGNvbXBpbGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSLCB0aGlzLmZyYWdtZW50U2hhZGVyU291cmNlLCBrZXl3b3JkcylcbiAgICAgIHByb2dyYW0gPSBjcmVhdGVQcm9ncmFtKHRoaXMudmVydGV4U2hhZGVyLCBmcmFnbWVudFNoYWRlcilcbiAgICAgIHRoaXMucHJvZ3JhbXNbaGFzaF0gPSBwcm9ncmFtXG4gICAgfVxuXG4gICAgaWYgKHByb2dyYW0gPT0gdGhpcy5hY3RpdmVQcm9ncmFtKSByZXR1cm5cblxuICAgIHRoaXMudW5pZm9ybXMgPSBnZXRVbmlmb3Jtcyhwcm9ncmFtKVxuICAgIHRoaXMuYWN0aXZlUHJvZ3JhbSA9IHByb2dyYW1cbiAgfVxuXG4gIGJpbmQoKSB7XG4gICAgZ2wudXNlUHJvZ3JhbSh0aGlzLmFjdGl2ZVByb2dyYW0pXG4gIH1cbn1cblxuY2xhc3MgUHJvZ3JhbSB7XG4gIHByb2dyYW06IFdlYkdMUHJvZ3JhbVxuICB1bmlmb3JtczogVW5pZm9ybXNcbiAgY29uc3RydWN0b3IodmVydGV4U2hhZGVyOiBXZWJHTFNoYWRlciwgZnJhZ21lbnRTaGFkZXI6IFdlYkdMU2hhZGVyKSB7XG4gICAgdGhpcy5wcm9ncmFtID0gY3JlYXRlUHJvZ3JhbSh2ZXJ0ZXhTaGFkZXIsIGZyYWdtZW50U2hhZGVyKVxuICAgIHRoaXMudW5pZm9ybXMgPSBnZXRVbmlmb3Jtcyh0aGlzLnByb2dyYW0pXG4gIH1cblxuICBiaW5kKCkge1xuICAgIGdsLnVzZVByb2dyYW0odGhpcy5wcm9ncmFtKVxuICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVByb2dyYW0odmVydGV4U2hhZGVyOiBXZWJHTFNoYWRlciwgZnJhZ21lbnRTaGFkZXI6IFdlYkdMU2hhZGVyKSB7XG4gIGxldCBwcm9ncmFtID0gbm90TnVsbChnbC5jcmVhdGVQcm9ncmFtKCkpXG4gIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpXG4gIGdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcmFnbWVudFNoYWRlcilcbiAgZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSlcblxuICBpZiAoIWdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuTElOS19TVEFUVVMpKSB0aHJvdyBnbC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtKVxuXG4gIHJldHVybiBwcm9ncmFtXG59XG5cbnR5cGUgVW5pZm9ybXMgPSB7IFtrZXk6IHN0cmluZ106IFdlYkdMVW5pZm9ybUxvY2F0aW9uIH1cblxuZnVuY3Rpb24gZ2V0VW5pZm9ybXMocHJvZ3JhbTogV2ViR0xQcm9ncmFtKSB7XG4gIGxldCB1bmlmb3JtczogVW5pZm9ybXMgPSBbXSBhcyBhbnkgLy8gVE9ETyBzd2l0Y2ggdG8ge30gaWYgcG9zc2libGVcbiAgbGV0IHVuaWZvcm1Db3VudCA9IGdsLmdldFByb2dyYW1QYXJhbWV0ZXIocHJvZ3JhbSwgZ2wuQUNUSVZFX1VOSUZPUk1TKVxuICBmb3IgKGxldCBpID0gMDsgaSA8IHVuaWZvcm1Db3VudDsgaSsrKSB7XG4gICAgbGV0IHVuaWZvcm1OYW1lID0gbm90TnVsbChnbC5nZXRBY3RpdmVVbmlmb3JtKHByb2dyYW0sIGkpKS5uYW1lXG4gICAgdW5pZm9ybXNbdW5pZm9ybU5hbWVdID0gbm90TnVsbChnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgdW5pZm9ybU5hbWUpKVxuICB9XG4gIHJldHVybiB1bmlmb3Jtc1xufVxuXG5mdW5jdGlvbiBjb21waWxlU2hhZGVyKHR5cGU6IG51bWJlciwgc291cmNlOiBzdHJpbmcsIGtleXdvcmRzPzogc3RyaW5nW10pIHtcbiAgc291cmNlID0gYWRkS2V5d29yZHMoc291cmNlLCBrZXl3b3JkcylcblxuICBjb25zdCBzaGFkZXIgPSBnbC5jcmVhdGVTaGFkZXIodHlwZSlcbiAgaWYgKCFzaGFkZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYGZhaWxlZCB0byBjcmVhdGUgc2hhZGVyIHR5cGUgJHt0eXBlfWApXG4gIH1cbiAgZ2wuc2hhZGVyU291cmNlKHNoYWRlciwgc291cmNlKVxuICBnbC5jb21waWxlU2hhZGVyKHNoYWRlcilcblxuICBpZiAoIWdsLmdldFNoYWRlclBhcmFtZXRlcihzaGFkZXIsIGdsLkNPTVBJTEVfU1RBVFVTKSkgdGhyb3cgZ2wuZ2V0U2hhZGVySW5mb0xvZyhzaGFkZXIpXG5cbiAgcmV0dXJuIHNoYWRlclxufVxuXG5mdW5jdGlvbiBhZGRLZXl3b3Jkcyhzb3VyY2U6IHN0cmluZywga2V5d29yZHM/OiBzdHJpbmdbXSkge1xuICBpZiAoa2V5d29yZHMgPT0gbnVsbCkgcmV0dXJuIHNvdXJjZVxuICBsZXQga2V5d29yZHNTdHJpbmcgPSAnJ1xuICBrZXl3b3Jkcy5mb3JFYWNoKGtleXdvcmQgPT4ge1xuICAgIGtleXdvcmRzU3RyaW5nICs9ICcjZGVmaW5lICcgKyBrZXl3b3JkICsgJ1xcbidcbiAgfSlcbiAgcmV0dXJuIGtleXdvcmRzU3RyaW5nICsgc291cmNlXG59XG5cbmNvbnN0IGJhc2VWZXJ0ZXhTaGFkZXIgPSBjb21waWxlU2hhZGVyKFxuICBnbC5WRVJURVhfU0hBREVSLFxuICBgXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuXG4gICAgYXR0cmlidXRlIHZlYzIgYVBvc2l0aW9uO1xuICAgIHZhcnlpbmcgdmVjMiB2VXY7XG4gICAgdmFyeWluZyB2ZWMyIHZMO1xuICAgIHZhcnlpbmcgdmVjMiB2UjtcbiAgICB2YXJ5aW5nIHZlYzIgdlQ7XG4gICAgdmFyeWluZyB2ZWMyIHZCO1xuICAgIHVuaWZvcm0gdmVjMiB0ZXhlbFNpemU7XG5cbiAgICB2b2lkIG1haW4gKCkge1xuICAgICAgICB2VXYgPSBhUG9zaXRpb24gKiAwLjUgKyAwLjU7XG4gICAgICAgIHZMID0gdlV2IC0gdmVjMih0ZXhlbFNpemUueCwgMC4wKTtcbiAgICAgICAgdlIgPSB2VXYgKyB2ZWMyKHRleGVsU2l6ZS54LCAwLjApO1xuICAgICAgICB2VCA9IHZVdiArIHZlYzIoMC4wLCB0ZXhlbFNpemUueSk7XG4gICAgICAgIHZCID0gdlV2IC0gdmVjMigwLjAsIHRleGVsU2l6ZS55KTtcbiAgICAgICAgZ2xfUG9zaXRpb24gPSB2ZWM0KGFQb3NpdGlvbiwgMC4wLCAxLjApO1xuICAgIH1cbmBcbilcblxuY29uc3QgYmx1clZlcnRleFNoYWRlciA9IGNvbXBpbGVTaGFkZXIoXG4gIGdsLlZFUlRFWF9TSEFERVIsXG4gIGBcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG5cbiAgICBhdHRyaWJ1dGUgdmVjMiBhUG9zaXRpb247XG4gICAgdmFyeWluZyB2ZWMyIHZVdjtcbiAgICB2YXJ5aW5nIHZlYzIgdkw7XG4gICAgdmFyeWluZyB2ZWMyIHZSO1xuICAgIHVuaWZvcm0gdmVjMiB0ZXhlbFNpemU7XG5cbiAgICB2b2lkIG1haW4gKCkge1xuICAgICAgICB2VXYgPSBhUG9zaXRpb24gKiAwLjUgKyAwLjU7XG4gICAgICAgIGZsb2F0IG9mZnNldCA9IDEuMzMzMzMzMzM7XG4gICAgICAgIHZMID0gdlV2IC0gdGV4ZWxTaXplICogb2Zmc2V0O1xuICAgICAgICB2UiA9IHZVdiArIHRleGVsU2l6ZSAqIG9mZnNldDtcbiAgICAgICAgZ2xfUG9zaXRpb24gPSB2ZWM0KGFQb3NpdGlvbiwgMC4wLCAxLjApO1xuICAgIH1cbmBcbilcblxuY29uc3QgYmx1clNoYWRlciA9IGNvbXBpbGVTaGFkZXIoXG4gIGdsLkZSQUdNRU5UX1NIQURFUixcbiAgYFxuICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuICAgIHByZWNpc2lvbiBtZWRpdW1wIHNhbXBsZXIyRDtcblxuICAgIHZhcnlpbmcgdmVjMiB2VXY7XG4gICAgdmFyeWluZyB2ZWMyIHZMO1xuICAgIHZhcnlpbmcgdmVjMiB2UjtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTtcblxuICAgIHZvaWQgbWFpbiAoKSB7XG4gICAgICAgIHZlYzQgc3VtID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2VXYpICogMC4yOTQxMTc2NDtcbiAgICAgICAgc3VtICs9IHRleHR1cmUyRCh1VGV4dHVyZSwgdkwpICogMC4zNTI5NDExNztcbiAgICAgICAgc3VtICs9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlIpICogMC4zNTI5NDExNztcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gc3VtO1xuICAgIH1cbmBcbilcblxuY29uc3QgY29weVNoYWRlciA9IGNvbXBpbGVTaGFkZXIoXG4gIGdsLkZSQUdNRU5UX1NIQURFUixcbiAgYFxuICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuICAgIHByZWNpc2lvbiBtZWRpdW1wIHNhbXBsZXIyRDtcblxuICAgIHZhcnlpbmcgaGlnaHAgdmVjMiB2VXY7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdVRleHR1cmU7XG5cbiAgICB2b2lkIG1haW4gKCkge1xuICAgICAgICBnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZVdik7XG4gICAgfVxuYFxuKVxuXG5jb25zdCBjbGVhclNoYWRlciA9IGNvbXBpbGVTaGFkZXIoXG4gIGdsLkZSQUdNRU5UX1NIQURFUixcbiAgYFxuICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuICAgIHByZWNpc2lvbiBtZWRpdW1wIHNhbXBsZXIyRDtcblxuICAgIHZhcnlpbmcgaGlnaHAgdmVjMiB2VXY7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdVRleHR1cmU7XG4gICAgdW5pZm9ybSBmbG9hdCB2YWx1ZTtcblxuICAgIHZvaWQgbWFpbiAoKSB7XG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHZhbHVlICogdGV4dHVyZTJEKHVUZXh0dXJlLCB2VXYpO1xuICAgIH1cbmBcbilcblxuY29uc3QgY29sb3JTaGFkZXIgPSBjb21waWxlU2hhZGVyKFxuICBnbC5GUkFHTUVOVF9TSEFERVIsXG4gIGBcbiAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcblxuICAgIHVuaWZvcm0gdmVjNCBjb2xvcjtcblxuICAgIHZvaWQgbWFpbiAoKSB7XG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IGNvbG9yO1xuICAgIH1cbmBcbilcblxuY29uc3QgY2hlY2tlcmJvYXJkU2hhZGVyID0gY29tcGlsZVNoYWRlcihcbiAgZ2wuRlJBR01FTlRfU0hBREVSLFxuICBgXG4gICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xuICAgIHByZWNpc2lvbiBoaWdocCBzYW1wbGVyMkQ7XG5cbiAgICB2YXJ5aW5nIHZlYzIgdlV2O1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xuICAgIHVuaWZvcm0gZmxvYXQgYXNwZWN0UmF0aW87XG5cbiAgICAjZGVmaW5lIFNDQUxFIDI1LjBcblxuICAgIHZvaWQgbWFpbiAoKSB7XG4gICAgICAgIHZlYzIgdXYgPSBmbG9vcih2VXYgKiBTQ0FMRSAqIHZlYzIoYXNwZWN0UmF0aW8sIDEuMCkpO1xuICAgICAgICBmbG9hdCB2ID0gbW9kKHV2LnggKyB1di55LCAyLjApO1xuICAgICAgICB2ID0gdiAqIDAuMSArIDAuODtcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKHYpLCAxLjApO1xuICAgIH1cbmBcbilcblxuY29uc3QgZGlzcGxheVNoYWRlclNvdXJjZSA9IGBcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4gICAgcHJlY2lzaW9uIGhpZ2hwIHNhbXBsZXIyRDtcblxuICAgIHZhcnlpbmcgdmVjMiB2VXY7XG4gICAgdmFyeWluZyB2ZWMyIHZMO1xuICAgIHZhcnlpbmcgdmVjMiB2UjtcbiAgICB2YXJ5aW5nIHZlYzIgdlQ7XG4gICAgdmFyeWluZyB2ZWMyIHZCO1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVCbG9vbTtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1U3VucmF5cztcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1RGl0aGVyaW5nO1xuICAgIHVuaWZvcm0gdmVjMiBkaXRoZXJTY2FsZTtcbiAgICB1bmlmb3JtIHZlYzIgdGV4ZWxTaXplO1xuXG4gICAgdmVjMyBsaW5lYXJUb0dhbW1hICh2ZWMzIGNvbG9yKSB7XG4gICAgICAgIGNvbG9yID0gbWF4KGNvbG9yLCB2ZWMzKDApKTtcbiAgICAgICAgcmV0dXJuIG1heCgxLjA1NSAqIHBvdyhjb2xvciwgdmVjMygwLjQxNjY2NjY2NykpIC0gMC4wNTUsIHZlYzMoMCkpO1xuICAgIH1cblxuICAgIHZvaWQgbWFpbiAoKSB7XG4gICAgICAgIHZlYzMgYyA9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlV2KS5yZ2I7XG5cbiAgICAjaWZkZWYgU0hBRElOR1xuICAgICAgICB2ZWMzIGxjID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2TCkucmdiO1xuICAgICAgICB2ZWMzIHJjID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2UikucmdiO1xuICAgICAgICB2ZWMzIHRjID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2VCkucmdiO1xuICAgICAgICB2ZWMzIGJjID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2QikucmdiO1xuXG4gICAgICAgIGZsb2F0IGR4ID0gbGVuZ3RoKHJjKSAtIGxlbmd0aChsYyk7XG4gICAgICAgIGZsb2F0IGR5ID0gbGVuZ3RoKHRjKSAtIGxlbmd0aChiYyk7XG5cbiAgICAgICAgdmVjMyBuID0gbm9ybWFsaXplKHZlYzMoZHgsIGR5LCBsZW5ndGgodGV4ZWxTaXplKSkpO1xuICAgICAgICB2ZWMzIGwgPSB2ZWMzKDAuMCwgMC4wLCAxLjApO1xuXG4gICAgICAgIGZsb2F0IGRpZmZ1c2UgPSBjbGFtcChkb3QobiwgbCkgKyAwLjcsIDAuNywgMS4wKTtcbiAgICAgICAgYyAqPSBkaWZmdXNlO1xuICAgICNlbmRpZlxuXG4gICAgI2lmZGVmIEJMT09NXG4gICAgICAgIHZlYzMgYmxvb20gPSB0ZXh0dXJlMkQodUJsb29tLCB2VXYpLnJnYjtcbiAgICAjZW5kaWZcblxuICAgICNpZmRlZiBTVU5SQVlTXG4gICAgICAgIGZsb2F0IHN1bnJheXMgPSB0ZXh0dXJlMkQodVN1bnJheXMsIHZVdikucjtcbiAgICAgICAgYyAqPSBzdW5yYXlzO1xuICAgICNpZmRlZiBCTE9PTVxuICAgICAgICBibG9vbSAqPSBzdW5yYXlzO1xuICAgICNlbmRpZlxuICAgICNlbmRpZlxuXG4gICAgI2lmZGVmIEJMT09NXG4gICAgICAgIGZsb2F0IG5vaXNlID0gdGV4dHVyZTJEKHVEaXRoZXJpbmcsIHZVdiAqIGRpdGhlclNjYWxlKS5yO1xuICAgICAgICBub2lzZSA9IG5vaXNlICogMi4wIC0gMS4wO1xuICAgICAgICBibG9vbSArPSBub2lzZSAvIDI1NS4wO1xuICAgICAgICBibG9vbSA9IGxpbmVhclRvR2FtbWEoYmxvb20pO1xuICAgICAgICBjICs9IGJsb29tO1xuICAgICNlbmRpZlxuXG4gICAgICAgIGZsb2F0IGEgPSBtYXgoYy5yLCBtYXgoYy5nLCBjLmIpKTtcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChjLCBhKTtcbiAgICB9XG5gXG5cbmNvbnN0IGJsb29tUHJlZmlsdGVyU2hhZGVyID0gY29tcGlsZVNoYWRlcihcbiAgZ2wuRlJBR01FTlRfU0hBREVSLFxuICBgXG4gICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG4gICAgcHJlY2lzaW9uIG1lZGl1bXAgc2FtcGxlcjJEO1xuXG4gICAgdmFyeWluZyB2ZWMyIHZVdjtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTtcbiAgICB1bmlmb3JtIHZlYzMgY3VydmU7XG4gICAgdW5pZm9ybSBmbG9hdCB0aHJlc2hvbGQ7XG5cbiAgICB2b2lkIG1haW4gKCkge1xuICAgICAgICB2ZWMzIGMgPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZVdikucmdiO1xuICAgICAgICBmbG9hdCBiciA9IG1heChjLnIsIG1heChjLmcsIGMuYikpO1xuICAgICAgICBmbG9hdCBycSA9IGNsYW1wKGJyIC0gY3VydmUueCwgMC4wLCBjdXJ2ZS55KTtcbiAgICAgICAgcnEgPSBjdXJ2ZS56ICogcnEgKiBycTtcbiAgICAgICAgYyAqPSBtYXgocnEsIGJyIC0gdGhyZXNob2xkKSAvIG1heChiciwgMC4wMDAxKTtcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNChjLCAwLjApO1xuICAgIH1cbmBcbilcblxuY29uc3QgYmxvb21CbHVyU2hhZGVyID0gY29tcGlsZVNoYWRlcihcbiAgZ2wuRlJBR01FTlRfU0hBREVSLFxuICBgXG4gICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG4gICAgcHJlY2lzaW9uIG1lZGl1bXAgc2FtcGxlcjJEO1xuXG4gICAgdmFyeWluZyB2ZWMyIHZMO1xuICAgIHZhcnlpbmcgdmVjMiB2UjtcbiAgICB2YXJ5aW5nIHZlYzIgdlQ7XG4gICAgdmFyeWluZyB2ZWMyIHZCO1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xuXG4gICAgdm9pZCBtYWluICgpIHtcbiAgICAgICAgdmVjNCBzdW0gPSB2ZWM0KDAuMCk7XG4gICAgICAgIHN1bSArPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZMKTtcbiAgICAgICAgc3VtICs9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlIpO1xuICAgICAgICBzdW0gKz0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2VCk7XG4gICAgICAgIHN1bSArPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZCKTtcbiAgICAgICAgc3VtICo9IDAuMjU7XG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHN1bTtcbiAgICB9XG5gXG4pXG5cbmNvbnN0IGJsb29tRmluYWxTaGFkZXIgPSBjb21waWxlU2hhZGVyKFxuICBnbC5GUkFHTUVOVF9TSEFERVIsXG4gIGBcbiAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcbiAgICBwcmVjaXNpb24gbWVkaXVtcCBzYW1wbGVyMkQ7XG5cbiAgICB2YXJ5aW5nIHZlYzIgdkw7XG4gICAgdmFyeWluZyB2ZWMyIHZSO1xuICAgIHZhcnlpbmcgdmVjMiB2VDtcbiAgICB2YXJ5aW5nIHZlYzIgdkI7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdVRleHR1cmU7XG4gICAgdW5pZm9ybSBmbG9hdCBpbnRlbnNpdHk7XG5cbiAgICB2b2lkIG1haW4gKCkge1xuICAgICAgICB2ZWM0IHN1bSA9IHZlYzQoMC4wKTtcbiAgICAgICAgc3VtICs9IHRleHR1cmUyRCh1VGV4dHVyZSwgdkwpO1xuICAgICAgICBzdW0gKz0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2Uik7XG4gICAgICAgIHN1bSArPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZUKTtcbiAgICAgICAgc3VtICs9IHRleHR1cmUyRCh1VGV4dHVyZSwgdkIpO1xuICAgICAgICBzdW0gKj0gMC4yNTtcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gc3VtICogaW50ZW5zaXR5O1xuICAgIH1cbmBcbilcblxuY29uc3Qgc3VucmF5c01hc2tTaGFkZXIgPSBjb21waWxlU2hhZGVyKFxuICBnbC5GUkFHTUVOVF9TSEFERVIsXG4gIGBcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4gICAgcHJlY2lzaW9uIGhpZ2hwIHNhbXBsZXIyRDtcblxuICAgIHZhcnlpbmcgdmVjMiB2VXY7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdVRleHR1cmU7XG5cbiAgICB2b2lkIG1haW4gKCkge1xuICAgICAgICB2ZWM0IGMgPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZVdik7XG4gICAgICAgIGZsb2F0IGJyID0gbWF4KGMuciwgbWF4KGMuZywgYy5iKSk7XG4gICAgICAgIGMuYSA9IDEuMCAtIG1pbihtYXgoYnIgKiAyMC4wLCAwLjApLCAwLjgpO1xuICAgICAgICBnbF9GcmFnQ29sb3IgPSBjO1xuICAgIH1cbmBcbilcblxuY29uc3Qgc3VucmF5c1NoYWRlciA9IGNvbXBpbGVTaGFkZXIoXG4gIGdsLkZSQUdNRU5UX1NIQURFUixcbiAgYFxuICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcbiAgICBwcmVjaXNpb24gaGlnaHAgc2FtcGxlcjJEO1xuXG4gICAgdmFyeWluZyB2ZWMyIHZVdjtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTtcbiAgICB1bmlmb3JtIGZsb2F0IHdlaWdodDtcblxuICAgICNkZWZpbmUgSVRFUkFUSU9OUyAxNlxuXG4gICAgdm9pZCBtYWluICgpIHtcbiAgICAgICAgZmxvYXQgRGVuc2l0eSA9IDAuMztcbiAgICAgICAgZmxvYXQgRGVjYXkgPSAwLjk1O1xuICAgICAgICBmbG9hdCBFeHBvc3VyZSA9IDAuNztcblxuICAgICAgICB2ZWMyIGNvb3JkID0gdlV2O1xuICAgICAgICB2ZWMyIGRpciA9IHZVdiAtIDAuNTtcblxuICAgICAgICBkaXIgKj0gMS4wIC8gZmxvYXQoSVRFUkFUSU9OUykgKiBEZW5zaXR5O1xuICAgICAgICBmbG9hdCBpbGx1bWluYXRpb25EZWNheSA9IDEuMDtcblxuICAgICAgICBmbG9hdCBjb2xvciA9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlV2KS5hO1xuXG4gICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgSVRFUkFUSU9OUzsgaSsrKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb29yZCAtPSBkaXI7XG4gICAgICAgICAgICBmbG9hdCBjb2wgPSB0ZXh0dXJlMkQodVRleHR1cmUsIGNvb3JkKS5hO1xuICAgICAgICAgICAgY29sb3IgKz0gY29sICogaWxsdW1pbmF0aW9uRGVjYXkgKiB3ZWlnaHQ7XG4gICAgICAgICAgICBpbGx1bWluYXRpb25EZWNheSAqPSBEZWNheTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IgKiBFeHBvc3VyZSwgMC4wLCAwLjAsIDEuMCk7XG4gICAgfVxuYFxuKVxuXG5jb25zdCBzcGxhdFNoYWRlciA9IGNvbXBpbGVTaGFkZXIoXG4gIGdsLkZSQUdNRU5UX1NIQURFUixcbiAgYFxuICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcbiAgICBwcmVjaXNpb24gaGlnaHAgc2FtcGxlcjJEO1xuXG4gICAgdmFyeWluZyB2ZWMyIHZVdjtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1VGFyZ2V0O1xuICAgIHVuaWZvcm0gZmxvYXQgYXNwZWN0UmF0aW87XG4gICAgdW5pZm9ybSB2ZWMzIGNvbG9yO1xuICAgIHVuaWZvcm0gdmVjMiBwb2ludDtcbiAgICB1bmlmb3JtIGZsb2F0IHJhZGl1cztcblxuICAgIHZvaWQgbWFpbiAoKSB7XG4gICAgICAgIHZlYzIgcCA9IHZVdiAtIHBvaW50Lnh5O1xuICAgICAgICBwLnggKj0gYXNwZWN0UmF0aW87XG4gICAgICAgIHZlYzMgc3BsYXQgPSBleHAoLWRvdChwLCBwKSAvIHJhZGl1cykgKiBjb2xvcjtcbiAgICAgICAgdmVjMyBiYXNlID0gdGV4dHVyZTJEKHVUYXJnZXQsIHZVdikueHl6O1xuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGJhc2UgKyBzcGxhdCwgMS4wKTtcbiAgICB9XG5gXG4pXG5cbmNvbnN0IGFkdmVjdGlvblNoYWRlciA9IGNvbXBpbGVTaGFkZXIoXG4gIGdsLkZSQUdNRU5UX1NIQURFUixcbiAgYFxuICAgIHByZWNpc2lvbiBoaWdocCBmbG9hdDtcbiAgICBwcmVjaXNpb24gaGlnaHAgc2FtcGxlcjJEO1xuXG4gICAgdmFyeWluZyB2ZWMyIHZVdjtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1VmVsb2NpdHk7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdVNvdXJjZTtcbiAgICB1bmlmb3JtIHZlYzIgdGV4ZWxTaXplO1xuICAgIHVuaWZvcm0gdmVjMiBkeWVUZXhlbFNpemU7XG4gICAgdW5pZm9ybSBmbG9hdCBkdDtcbiAgICB1bmlmb3JtIGZsb2F0IGRpc3NpcGF0aW9uO1xuXG4gICAgdmVjNCBiaWxlcnAgKHNhbXBsZXIyRCBzYW0sIHZlYzIgdXYsIHZlYzIgdHNpemUpIHtcbiAgICAgICAgdmVjMiBzdCA9IHV2IC8gdHNpemUgLSAwLjU7XG5cbiAgICAgICAgdmVjMiBpdXYgPSBmbG9vcihzdCk7XG4gICAgICAgIHZlYzIgZnV2ID0gZnJhY3Qoc3QpO1xuXG4gICAgICAgIHZlYzQgYSA9IHRleHR1cmUyRChzYW0sIChpdXYgKyB2ZWMyKDAuNSwgMC41KSkgKiB0c2l6ZSk7XG4gICAgICAgIHZlYzQgYiA9IHRleHR1cmUyRChzYW0sIChpdXYgKyB2ZWMyKDEuNSwgMC41KSkgKiB0c2l6ZSk7XG4gICAgICAgIHZlYzQgYyA9IHRleHR1cmUyRChzYW0sIChpdXYgKyB2ZWMyKDAuNSwgMS41KSkgKiB0c2l6ZSk7XG4gICAgICAgIHZlYzQgZCA9IHRleHR1cmUyRChzYW0sIChpdXYgKyB2ZWMyKDEuNSwgMS41KSkgKiB0c2l6ZSk7XG5cbiAgICAgICAgcmV0dXJuIG1peChtaXgoYSwgYiwgZnV2LngpLCBtaXgoYywgZCwgZnV2LngpLCBmdXYueSk7XG4gICAgfVxuXG4gICAgdm9pZCBtYWluICgpIHtcbiAgICAjaWZkZWYgTUFOVUFMX0ZJTFRFUklOR1xuICAgICAgICB2ZWMyIGNvb3JkID0gdlV2IC0gZHQgKiBiaWxlcnAodVZlbG9jaXR5LCB2VXYsIHRleGVsU2l6ZSkueHkgKiB0ZXhlbFNpemU7XG4gICAgICAgIHZlYzQgcmVzdWx0ID0gYmlsZXJwKHVTb3VyY2UsIGNvb3JkLCBkeWVUZXhlbFNpemUpO1xuICAgICNlbHNlXG4gICAgICAgIHZlYzIgY29vcmQgPSB2VXYgLSBkdCAqIHRleHR1cmUyRCh1VmVsb2NpdHksIHZVdikueHkgKiB0ZXhlbFNpemU7XG4gICAgICAgIHZlYzQgcmVzdWx0ID0gdGV4dHVyZTJEKHVTb3VyY2UsIGNvb3JkKTtcbiAgICAjZW5kaWZcbiAgICAgICAgZmxvYXQgZGVjYXkgPSAxLjAgKyBkaXNzaXBhdGlvbiAqIGR0O1xuICAgICAgICBnbF9GcmFnQ29sb3IgPSByZXN1bHQgLyBkZWNheTtcbiAgICB9YCxcbiAgZXh0LnN1cHBvcnRMaW5lYXJGaWx0ZXJpbmcgPyB1bmRlZmluZWQgOiBbJ01BTlVBTF9GSUxURVJJTkcnXVxuKVxuXG5jb25zdCBkaXZlcmdlbmNlU2hhZGVyID0gY29tcGlsZVNoYWRlcihcbiAgZ2wuRlJBR01FTlRfU0hBREVSLFxuICBgXG4gICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG4gICAgcHJlY2lzaW9uIG1lZGl1bXAgc2FtcGxlcjJEO1xuXG4gICAgdmFyeWluZyBoaWdocCB2ZWMyIHZVdjtcbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdkw7XG4gICAgdmFyeWluZyBoaWdocCB2ZWMyIHZSO1xuICAgIHZhcnlpbmcgaGlnaHAgdmVjMiB2VDtcbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdkI7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdVZlbG9jaXR5O1xuXG4gICAgdm9pZCBtYWluICgpIHtcbiAgICAgICAgZmxvYXQgTCA9IHRleHR1cmUyRCh1VmVsb2NpdHksIHZMKS54O1xuICAgICAgICBmbG9hdCBSID0gdGV4dHVyZTJEKHVWZWxvY2l0eSwgdlIpLng7XG4gICAgICAgIGZsb2F0IFQgPSB0ZXh0dXJlMkQodVZlbG9jaXR5LCB2VCkueTtcbiAgICAgICAgZmxvYXQgQiA9IHRleHR1cmUyRCh1VmVsb2NpdHksIHZCKS55O1xuXG4gICAgICAgIHZlYzIgQyA9IHRleHR1cmUyRCh1VmVsb2NpdHksIHZVdikueHk7XG4gICAgICAgIGlmICh2TC54IDwgMC4wKSB7IEwgPSAtQy54OyB9XG4gICAgICAgIGlmICh2Ui54ID4gMS4wKSB7IFIgPSAtQy54OyB9XG4gICAgICAgIGlmICh2VC55ID4gMS4wKSB7IFQgPSAtQy55OyB9XG4gICAgICAgIGlmICh2Qi55IDwgMC4wKSB7IEIgPSAtQy55OyB9XG5cbiAgICAgICAgZmxvYXQgZGl2ID0gMC41ICogKFIgLSBMICsgVCAtIEIpO1xuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KGRpdiwgMC4wLCAwLjAsIDEuMCk7XG4gICAgfVxuYFxuKVxuXG5jb25zdCBjdXJsU2hhZGVyID0gY29tcGlsZVNoYWRlcihcbiAgZ2wuRlJBR01FTlRfU0hBREVSLFxuICBgXG4gICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XG4gICAgcHJlY2lzaW9uIG1lZGl1bXAgc2FtcGxlcjJEO1xuXG4gICAgdmFyeWluZyBoaWdocCB2ZWMyIHZVdjtcbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdkw7XG4gICAgdmFyeWluZyBoaWdocCB2ZWMyIHZSO1xuICAgIHZhcnlpbmcgaGlnaHAgdmVjMiB2VDtcbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdkI7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdVZlbG9jaXR5O1xuXG4gICAgdm9pZCBtYWluICgpIHtcbiAgICAgICAgZmxvYXQgTCA9IHRleHR1cmUyRCh1VmVsb2NpdHksIHZMKS55O1xuICAgICAgICBmbG9hdCBSID0gdGV4dHVyZTJEKHVWZWxvY2l0eSwgdlIpLnk7XG4gICAgICAgIGZsb2F0IFQgPSB0ZXh0dXJlMkQodVZlbG9jaXR5LCB2VCkueDtcbiAgICAgICAgZmxvYXQgQiA9IHRleHR1cmUyRCh1VmVsb2NpdHksIHZCKS54O1xuICAgICAgICBmbG9hdCB2b3J0aWNpdHkgPSBSIC0gTCAtIFQgKyBCO1xuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KDAuNSAqIHZvcnRpY2l0eSwgMC4wLCAwLjAsIDEuMCk7XG4gICAgfVxuYFxuKVxuXG5jb25zdCB2b3J0aWNpdHlTaGFkZXIgPSBjb21waWxlU2hhZGVyKFxuICBnbC5GUkFHTUVOVF9TSEFERVIsXG4gIGBcbiAgICBwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XG4gICAgcHJlY2lzaW9uIGhpZ2hwIHNhbXBsZXIyRDtcblxuICAgIHZhcnlpbmcgdmVjMiB2VXY7XG4gICAgdmFyeWluZyB2ZWMyIHZMO1xuICAgIHZhcnlpbmcgdmVjMiB2UjtcbiAgICB2YXJ5aW5nIHZlYzIgdlQ7XG4gICAgdmFyeWluZyB2ZWMyIHZCO1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVWZWxvY2l0eTtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1Q3VybDtcbiAgICB1bmlmb3JtIGZsb2F0IGN1cmw7XG4gICAgdW5pZm9ybSBmbG9hdCBkdDtcblxuICAgIHZvaWQgbWFpbiAoKSB7XG4gICAgICAgIGZsb2F0IEwgPSB0ZXh0dXJlMkQodUN1cmwsIHZMKS54O1xuICAgICAgICBmbG9hdCBSID0gdGV4dHVyZTJEKHVDdXJsLCB2UikueDtcbiAgICAgICAgZmxvYXQgVCA9IHRleHR1cmUyRCh1Q3VybCwgdlQpLng7XG4gICAgICAgIGZsb2F0IEIgPSB0ZXh0dXJlMkQodUN1cmwsIHZCKS54O1xuICAgICAgICBmbG9hdCBDID0gdGV4dHVyZTJEKHVDdXJsLCB2VXYpLng7XG5cbiAgICAgICAgdmVjMiBmb3JjZSA9IDAuNSAqIHZlYzIoYWJzKFQpIC0gYWJzKEIpLCBhYnMoUikgLSBhYnMoTCkpO1xuICAgICAgICBmb3JjZSAvPSBsZW5ndGgoZm9yY2UpICsgMC4wMDAxO1xuICAgICAgICBmb3JjZSAqPSBjdXJsICogQztcbiAgICAgICAgZm9yY2UueSAqPSAtMS4wO1xuXG4gICAgICAgIHZlYzIgdmVsID0gdGV4dHVyZTJEKHVWZWxvY2l0eSwgdlV2KS54eTtcbiAgICAgICAgZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWwgKyBmb3JjZSAqIGR0LCAwLjAsIDEuMCk7XG4gICAgfVxuYFxuKVxuXG5jb25zdCBwcmVzc3VyZVNoYWRlciA9IGNvbXBpbGVTaGFkZXIoXG4gIGdsLkZSQUdNRU5UX1NIQURFUixcbiAgYFxuICAgIHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0O1xuICAgIHByZWNpc2lvbiBtZWRpdW1wIHNhbXBsZXIyRDtcblxuICAgIHZhcnlpbmcgaGlnaHAgdmVjMiB2VXY7XG4gICAgdmFyeWluZyBoaWdocCB2ZWMyIHZMO1xuICAgIHZhcnlpbmcgaGlnaHAgdmVjMiB2UjtcbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdlQ7XG4gICAgdmFyeWluZyBoaWdocCB2ZWMyIHZCO1xuICAgIHVuaWZvcm0gc2FtcGxlcjJEIHVQcmVzc3VyZTtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1RGl2ZXJnZW5jZTtcblxuICAgIHZvaWQgbWFpbiAoKSB7XG4gICAgICAgIGZsb2F0IEwgPSB0ZXh0dXJlMkQodVByZXNzdXJlLCB2TCkueDtcbiAgICAgICAgZmxvYXQgUiA9IHRleHR1cmUyRCh1UHJlc3N1cmUsIHZSKS54O1xuICAgICAgICBmbG9hdCBUID0gdGV4dHVyZTJEKHVQcmVzc3VyZSwgdlQpLng7XG4gICAgICAgIGZsb2F0IEIgPSB0ZXh0dXJlMkQodVByZXNzdXJlLCB2QikueDtcbiAgICAgICAgZmxvYXQgQyA9IHRleHR1cmUyRCh1UHJlc3N1cmUsIHZVdikueDtcbiAgICAgICAgZmxvYXQgZGl2ZXJnZW5jZSA9IHRleHR1cmUyRCh1RGl2ZXJnZW5jZSwgdlV2KS54O1xuICAgICAgICBmbG9hdCBwcmVzc3VyZSA9IChMICsgUiArIEIgKyBUIC0gZGl2ZXJnZW5jZSkgKiAwLjI1O1xuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHByZXNzdXJlLCAwLjAsIDAuMCwgMS4wKTtcbiAgICB9XG5gXG4pXG5cbmNvbnN0IGdyYWRpZW50U3VidHJhY3RTaGFkZXIgPSBjb21waWxlU2hhZGVyKFxuICBnbC5GUkFHTUVOVF9TSEFERVIsXG4gIGBcbiAgICBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcbiAgICBwcmVjaXNpb24gbWVkaXVtcCBzYW1wbGVyMkQ7XG5cbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdlV2O1xuICAgIHZhcnlpbmcgaGlnaHAgdmVjMiB2TDtcbiAgICB2YXJ5aW5nIGhpZ2hwIHZlYzIgdlI7XG4gICAgdmFyeWluZyBoaWdocCB2ZWMyIHZUO1xuICAgIHZhcnlpbmcgaGlnaHAgdmVjMiB2QjtcbiAgICB1bmlmb3JtIHNhbXBsZXIyRCB1UHJlc3N1cmU7XG4gICAgdW5pZm9ybSBzYW1wbGVyMkQgdVZlbG9jaXR5O1xuXG4gICAgdm9pZCBtYWluICgpIHtcbiAgICAgICAgZmxvYXQgTCA9IHRleHR1cmUyRCh1UHJlc3N1cmUsIHZMKS54O1xuICAgICAgICBmbG9hdCBSID0gdGV4dHVyZTJEKHVQcmVzc3VyZSwgdlIpLng7XG4gICAgICAgIGZsb2F0IFQgPSB0ZXh0dXJlMkQodVByZXNzdXJlLCB2VCkueDtcbiAgICAgICAgZmxvYXQgQiA9IHRleHR1cmUyRCh1UHJlc3N1cmUsIHZCKS54O1xuICAgICAgICB2ZWMyIHZlbG9jaXR5ID0gdGV4dHVyZTJEKHVWZWxvY2l0eSwgdlV2KS54eTtcbiAgICAgICAgdmVsb2NpdHkueHkgLT0gdmVjMihSIC0gTCwgVCAtIEIpO1xuICAgICAgICBnbF9GcmFnQ29sb3IgPSB2ZWM0KHZlbG9jaXR5LCAwLjAsIDEuMCk7XG4gICAgfVxuYFxuKVxuXG5jb25zdCBibGl0ID0gKCgpID0+IHtcbiAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGdsLmNyZWF0ZUJ1ZmZlcigpKVxuICBnbC5idWZmZXJEYXRhKGdsLkFSUkFZX0JVRkZFUiwgbmV3IEZsb2F0MzJBcnJheShbLTEsIC0xLCAtMSwgMSwgMSwgMSwgMSwgLTFdKSwgZ2wuU1RBVElDX0RSQVcpXG4gIGdsLmJpbmRCdWZmZXIoZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGdsLmNyZWF0ZUJ1ZmZlcigpKVxuICBnbC5idWZmZXJEYXRhKGdsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBuZXcgVWludDE2QXJyYXkoWzAsIDEsIDIsIDAsIDIsIDNdKSwgZ2wuU1RBVElDX0RSQVcpXG4gIGdsLnZlcnRleEF0dHJpYlBvaW50ZXIoMCwgMiwgZ2wuRkxPQVQsIGZhbHNlLCAwLCAwKVxuICBnbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSgwKVxuXG4gIHJldHVybiAoZGVzdGluYXRpb246IFdlYkdMRnJhbWVidWZmZXIgfCBudWxsKSA9PiB7XG4gICAgZ2wuYmluZEZyYW1lYnVmZmVyKGdsLkZSQU1FQlVGRkVSLCBkZXN0aW5hdGlvbilcbiAgICBnbC5kcmF3RWxlbWVudHMoZ2wuVFJJQU5HTEVTLCA2LCBnbC5VTlNJR05FRF9TSE9SVCwgMClcbiAgfVxufSkoKVxuXG5sZXQgZHllOiBEb3VibGVGQk9cbmxldCB2ZWxvY2l0eTogRG91YmxlRkJPXG5sZXQgZGl2ZXJnZW5jZTogRkJPXG5sZXQgY3VybDogRkJPXG5sZXQgcHJlc3N1cmU6IERvdWJsZUZCT1xubGV0IGJsb29tOiBGQk9cbmxldCBibG9vbUZyYW1lYnVmZmVyczogRkJPW10gPSBbXVxubGV0IHN1bnJheXM6IEZCT1xubGV0IHN1bnJheXNUZW1wOiBGQk9cblxubGV0IGRpdGhlcmluZ1RleHR1cmU6IFRleHR1cmUgPSBjcmVhdGVUZXh0dXJlQXN5bmMoJ0xEUl9MTEwxXzAucG5nJylcblxuY29uc3QgYmx1clByb2dyYW0gPSBuZXcgUHJvZ3JhbShibHVyVmVydGV4U2hhZGVyLCBibHVyU2hhZGVyKVxuY29uc3QgY29weVByb2dyYW0gPSBuZXcgUHJvZ3JhbShiYXNlVmVydGV4U2hhZGVyLCBjb3B5U2hhZGVyKVxuY29uc3QgY2xlYXJQcm9ncmFtID0gbmV3IFByb2dyYW0oYmFzZVZlcnRleFNoYWRlciwgY2xlYXJTaGFkZXIpXG5jb25zdCBjb2xvclByb2dyYW0gPSBuZXcgUHJvZ3JhbShiYXNlVmVydGV4U2hhZGVyLCBjb2xvclNoYWRlcilcbmNvbnN0IGNoZWNrZXJib2FyZFByb2dyYW0gPSBuZXcgUHJvZ3JhbShiYXNlVmVydGV4U2hhZGVyLCBjaGVja2VyYm9hcmRTaGFkZXIpXG5jb25zdCBibG9vbVByZWZpbHRlclByb2dyYW0gPSBuZXcgUHJvZ3JhbShiYXNlVmVydGV4U2hhZGVyLCBibG9vbVByZWZpbHRlclNoYWRlcilcbmNvbnN0IGJsb29tQmx1clByb2dyYW0gPSBuZXcgUHJvZ3JhbShiYXNlVmVydGV4U2hhZGVyLCBibG9vbUJsdXJTaGFkZXIpXG5jb25zdCBibG9vbUZpbmFsUHJvZ3JhbSA9IG5ldyBQcm9ncmFtKGJhc2VWZXJ0ZXhTaGFkZXIsIGJsb29tRmluYWxTaGFkZXIpXG5jb25zdCBzdW5yYXlzTWFza1Byb2dyYW0gPSBuZXcgUHJvZ3JhbShiYXNlVmVydGV4U2hhZGVyLCBzdW5yYXlzTWFza1NoYWRlcilcbmNvbnN0IHN1bnJheXNQcm9ncmFtID0gbmV3IFByb2dyYW0oYmFzZVZlcnRleFNoYWRlciwgc3VucmF5c1NoYWRlcilcbmNvbnN0IHNwbGF0UHJvZ3JhbSA9IG5ldyBQcm9ncmFtKGJhc2VWZXJ0ZXhTaGFkZXIsIHNwbGF0U2hhZGVyKVxuY29uc3QgYWR2ZWN0aW9uUHJvZ3JhbSA9IG5ldyBQcm9ncmFtKGJhc2VWZXJ0ZXhTaGFkZXIsIGFkdmVjdGlvblNoYWRlcilcbmNvbnN0IGRpdmVyZ2VuY2VQcm9ncmFtID0gbmV3IFByb2dyYW0oYmFzZVZlcnRleFNoYWRlciwgZGl2ZXJnZW5jZVNoYWRlcilcbmNvbnN0IGN1cmxQcm9ncmFtID0gbmV3IFByb2dyYW0oYmFzZVZlcnRleFNoYWRlciwgY3VybFNoYWRlcilcbmNvbnN0IHZvcnRpY2l0eVByb2dyYW0gPSBuZXcgUHJvZ3JhbShiYXNlVmVydGV4U2hhZGVyLCB2b3J0aWNpdHlTaGFkZXIpXG5jb25zdCBwcmVzc3VyZVByb2dyYW0gPSBuZXcgUHJvZ3JhbShiYXNlVmVydGV4U2hhZGVyLCBwcmVzc3VyZVNoYWRlcilcbmNvbnN0IGdyYWRpZW5TdWJ0cmFjdFByb2dyYW0gPSBuZXcgUHJvZ3JhbShiYXNlVmVydGV4U2hhZGVyLCBncmFkaWVudFN1YnRyYWN0U2hhZGVyKVxuXG5jb25zdCBkaXNwbGF5TWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoYmFzZVZlcnRleFNoYWRlciwgZGlzcGxheVNoYWRlclNvdXJjZSlcblxuZnVuY3Rpb24gaW5pdEZyYW1lYnVmZmVycygpIHtcbiAgbGV0IHNpbVJlcyA9IGdldFJlc29sdXRpb24oY29uZmlnLlNJTV9SRVNPTFVUSU9OKVxuICBsZXQgZHllUmVzID0gZ2V0UmVzb2x1dGlvbihjb25maWcuRFlFX1JFU09MVVRJT04pXG5cbiAgY29uc3QgdGV4VHlwZSA9IGV4dC5oYWxmRmxvYXRUZXhUeXBlXG4gIGNvbnN0IHJnYmEgPSBleHQuZm9ybWF0UkdCQVxuICBjb25zdCByZyA9IGV4dC5mb3JtYXRSR1xuICBjb25zdCByID0gZXh0LmZvcm1hdFJcbiAgY29uc3QgZmlsdGVyaW5nID0gZXh0LnN1cHBvcnRMaW5lYXJGaWx0ZXJpbmcgPyBnbC5MSU5FQVIgOiBnbC5ORUFSRVNUXG5cbiAgaWYgKGR5ZSA9PSBudWxsKVxuICAgIGR5ZSA9IGNyZWF0ZURvdWJsZUZCTyhcbiAgICAgIGR5ZVJlcy53aWR0aCxcbiAgICAgIGR5ZVJlcy5oZWlnaHQsXG4gICAgICByZ2JhLmludGVybmFsRm9ybWF0LFxuICAgICAgcmdiYS5mb3JtYXQsXG4gICAgICB0ZXhUeXBlLFxuICAgICAgZmlsdGVyaW5nXG4gICAgKVxuICBlbHNlXG4gICAgZHllID0gcmVzaXplRG91YmxlRkJPKFxuICAgICAgZHllLFxuICAgICAgZHllUmVzLndpZHRoLFxuICAgICAgZHllUmVzLmhlaWdodCxcbiAgICAgIHJnYmEuaW50ZXJuYWxGb3JtYXQsXG4gICAgICByZ2JhLmZvcm1hdCxcbiAgICAgIHRleFR5cGUsXG4gICAgICBmaWx0ZXJpbmdcbiAgICApXG5cbiAgaWYgKHZlbG9jaXR5ID09IG51bGwpXG4gICAgdmVsb2NpdHkgPSBjcmVhdGVEb3VibGVGQk8oXG4gICAgICBzaW1SZXMud2lkdGgsXG4gICAgICBzaW1SZXMuaGVpZ2h0LFxuICAgICAgcmcuaW50ZXJuYWxGb3JtYXQsXG4gICAgICByZy5mb3JtYXQsXG4gICAgICB0ZXhUeXBlLFxuICAgICAgZmlsdGVyaW5nXG4gICAgKVxuICBlbHNlXG4gICAgdmVsb2NpdHkgPSByZXNpemVEb3VibGVGQk8oXG4gICAgICB2ZWxvY2l0eSxcbiAgICAgIHNpbVJlcy53aWR0aCxcbiAgICAgIHNpbVJlcy5oZWlnaHQsXG4gICAgICByZy5pbnRlcm5hbEZvcm1hdCxcbiAgICAgIHJnLmZvcm1hdCxcbiAgICAgIHRleFR5cGUsXG4gICAgICBmaWx0ZXJpbmdcbiAgICApXG5cbiAgZGl2ZXJnZW5jZSA9IGNyZWF0ZUZCTyhcbiAgICBzaW1SZXMud2lkdGgsXG4gICAgc2ltUmVzLmhlaWdodCxcbiAgICByLmludGVybmFsRm9ybWF0LFxuICAgIHIuZm9ybWF0LFxuICAgIHRleFR5cGUsXG4gICAgZ2wuTkVBUkVTVFxuICApXG4gIGN1cmwgPSBjcmVhdGVGQk8oc2ltUmVzLndpZHRoLCBzaW1SZXMuaGVpZ2h0LCByLmludGVybmFsRm9ybWF0LCByLmZvcm1hdCwgdGV4VHlwZSwgZ2wuTkVBUkVTVClcbiAgcHJlc3N1cmUgPSBjcmVhdGVEb3VibGVGQk8oXG4gICAgc2ltUmVzLndpZHRoLFxuICAgIHNpbVJlcy5oZWlnaHQsXG4gICAgci5pbnRlcm5hbEZvcm1hdCxcbiAgICByLmZvcm1hdCxcbiAgICB0ZXhUeXBlLFxuICAgIGdsLk5FQVJFU1RcbiAgKVxuXG4gIGluaXRCbG9vbUZyYW1lYnVmZmVycygpXG4gIGluaXRTdW5yYXlzRnJhbWVidWZmZXJzKClcbn1cblxuZnVuY3Rpb24gaW5pdEJsb29tRnJhbWVidWZmZXJzKCkge1xuICBsZXQgcmVzID0gZ2V0UmVzb2x1dGlvbihjb25maWcuQkxPT01fUkVTT0xVVElPTilcblxuICBjb25zdCB0ZXhUeXBlID0gZXh0LmhhbGZGbG9hdFRleFR5cGVcbiAgY29uc3QgcmdiYSA9IGV4dC5mb3JtYXRSR0JBXG4gIGNvbnN0IGZpbHRlcmluZyA9IGV4dC5zdXBwb3J0TGluZWFyRmlsdGVyaW5nID8gZ2wuTElORUFSIDogZ2wuTkVBUkVTVFxuXG4gIGJsb29tID0gY3JlYXRlRkJPKHJlcy53aWR0aCwgcmVzLmhlaWdodCwgcmdiYS5pbnRlcm5hbEZvcm1hdCwgcmdiYS5mb3JtYXQsIHRleFR5cGUsIGZpbHRlcmluZylcblxuICBibG9vbUZyYW1lYnVmZmVycy5sZW5ndGggPSAwXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZmlnLkJMT09NX0lURVJBVElPTlM7IGkrKykge1xuICAgIGxldCB3aWR0aCA9IHJlcy53aWR0aCA+PiAoaSArIDEpXG4gICAgbGV0IGhlaWdodCA9IHJlcy5oZWlnaHQgPj4gKGkgKyAxKVxuXG4gICAgaWYgKHdpZHRoIDwgMiB8fCBoZWlnaHQgPCAyKSBicmVha1xuXG4gICAgbGV0IGZibyA9IGNyZWF0ZUZCTyh3aWR0aCwgaGVpZ2h0LCByZ2JhLmludGVybmFsRm9ybWF0LCByZ2JhLmZvcm1hdCwgdGV4VHlwZSwgZmlsdGVyaW5nKVxuICAgIGJsb29tRnJhbWVidWZmZXJzLnB1c2goZmJvKVxuICB9XG59XG5cbmZ1bmN0aW9uIGluaXRTdW5yYXlzRnJhbWVidWZmZXJzKCkge1xuICBsZXQgcmVzID0gZ2V0UmVzb2x1dGlvbihjb25maWcuU1VOUkFZU19SRVNPTFVUSU9OKVxuXG4gIGNvbnN0IHRleFR5cGUgPSBleHQuaGFsZkZsb2F0VGV4VHlwZVxuICBjb25zdCByID0gZXh0LmZvcm1hdFJcbiAgY29uc3QgZmlsdGVyaW5nID0gZXh0LnN1cHBvcnRMaW5lYXJGaWx0ZXJpbmcgPyBnbC5MSU5FQVIgOiBnbC5ORUFSRVNUXG5cbiAgc3VucmF5cyA9IGNyZWF0ZUZCTyhyZXMud2lkdGgsIHJlcy5oZWlnaHQsIHIuaW50ZXJuYWxGb3JtYXQsIHIuZm9ybWF0LCB0ZXhUeXBlLCBmaWx0ZXJpbmcpXG4gIHN1bnJheXNUZW1wID0gY3JlYXRlRkJPKHJlcy53aWR0aCwgcmVzLmhlaWdodCwgci5pbnRlcm5hbEZvcm1hdCwgci5mb3JtYXQsIHRleFR5cGUsIGZpbHRlcmluZylcbn1cblxudHlwZSBGQk8gPSBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVGQk8+XG5cbmZ1bmN0aW9uIGNyZWF0ZUZCTyhcbiAgdzogbnVtYmVyLFxuICBoOiBudW1iZXIsXG4gIGludGVybmFsRm9ybWF0OiBudW1iZXIsXG4gIGZvcm1hdDogbnVtYmVyLFxuICB0eXBlOiBudW1iZXIsXG4gIHBhcmFtOiBudW1iZXJcbikge1xuICBnbC5hY3RpdmVUZXh0dXJlKGdsLlRFWFRVUkUwKVxuICBsZXQgdGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKVxuICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlKVxuICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgcGFyYW0pXG4gIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCBwYXJhbSlcbiAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfUywgZ2wuQ0xBTVBfVE9fRURHRSlcbiAgZ2wudGV4UGFyYW1ldGVyaShnbC5URVhUVVJFXzJELCBnbC5URVhUVVJFX1dSQVBfVCwgZ2wuQ0xBTVBfVE9fRURHRSlcbiAgZ2wudGV4SW1hZ2UyRChnbC5URVhUVVJFXzJELCAwLCBpbnRlcm5hbEZvcm1hdCwgdywgaCwgMCwgZm9ybWF0LCB0eXBlLCBudWxsKVxuXG4gIGxldCBmYm8gPSBnbC5jcmVhdGVGcmFtZWJ1ZmZlcigpXG4gIGdsLmJpbmRGcmFtZWJ1ZmZlcihnbC5GUkFNRUJVRkZFUiwgZmJvKVxuICBnbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChnbC5GUkFNRUJVRkZFUiwgZ2wuQ09MT1JfQVRUQUNITUVOVDAsIGdsLlRFWFRVUkVfMkQsIHRleHR1cmUsIDApXG4gIGdsLnZpZXdwb3J0KDAsIDAsIHcsIGgpXG4gIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpXG5cbiAgbGV0IHRleGVsU2l6ZVggPSAxLjAgLyB3XG4gIGxldCB0ZXhlbFNpemVZID0gMS4wIC8gaFxuXG4gIHJldHVybiB7XG4gICAgdGV4dHVyZSxcbiAgICBmYm8sXG4gICAgd2lkdGg6IHcsXG4gICAgaGVpZ2h0OiBoLFxuICAgIHRleGVsU2l6ZVgsXG4gICAgdGV4ZWxTaXplWSxcbiAgICBhdHRhY2goaWQ6IG51bWJlcikge1xuICAgICAgZ2wuYWN0aXZlVGV4dHVyZShnbC5URVhUVVJFMCArIGlkKVxuICAgICAgZ2wuYmluZFRleHR1cmUoZ2wuVEVYVFVSRV8yRCwgdGV4dHVyZSlcbiAgICAgIHJldHVybiBpZFxuICAgIH0sXG4gIH1cbn1cblxudHlwZSBEb3VibGVGQk8gPSBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVEb3VibGVGQk8+XG5cbmZ1bmN0aW9uIGNyZWF0ZURvdWJsZUZCTyhcbiAgdzogbnVtYmVyLFxuICBoOiBudW1iZXIsXG4gIGludGVybmFsRm9ybWF0OiBudW1iZXIsXG4gIGZvcm1hdDogbnVtYmVyLFxuICB0eXBlOiBudW1iZXIsXG4gIHBhcmFtOiBudW1iZXJcbikge1xuICBsZXQgZmJvMTogRkJPID0gY3JlYXRlRkJPKHcsIGgsIGludGVybmFsRm9ybWF0LCBmb3JtYXQsIHR5cGUsIHBhcmFtKVxuICBsZXQgZmJvMjogRkJPID0gY3JlYXRlRkJPKHcsIGgsIGludGVybmFsRm9ybWF0LCBmb3JtYXQsIHR5cGUsIHBhcmFtKVxuXG4gIHJldHVybiB7XG4gICAgd2lkdGg6IHcsXG4gICAgaGVpZ2h0OiBoLFxuICAgIHRleGVsU2l6ZVg6IGZibzEudGV4ZWxTaXplWCxcbiAgICB0ZXhlbFNpemVZOiBmYm8xLnRleGVsU2l6ZVksXG4gICAgZ2V0IHJlYWQoKTogRkJPIHtcbiAgICAgIHJldHVybiBmYm8xXG4gICAgfSxcbiAgICBzZXQgcmVhZCh2YWx1ZTogRkJPKSB7XG4gICAgICBmYm8xID0gdmFsdWVcbiAgICB9LFxuICAgIGdldCB3cml0ZSgpOiBGQk8ge1xuICAgICAgcmV0dXJuIGZibzJcbiAgICB9LFxuICAgIHNldCB3cml0ZSh2YWx1ZTogRkJPKSB7XG4gICAgICBmYm8yID0gdmFsdWVcbiAgICB9LFxuICAgIHN3YXAoKSB7XG4gICAgICBsZXQgdGVtcCA9IGZibzFcbiAgICAgIGZibzEgPSBmYm8yXG4gICAgICBmYm8yID0gdGVtcFxuICAgIH0sXG4gIH1cbn1cblxuZnVuY3Rpb24gcmVzaXplRkJPKFxuICB0YXJnZXQ6IEZCTyxcbiAgdzogbnVtYmVyLFxuICBoOiBudW1iZXIsXG4gIGludGVybmFsRm9ybWF0OiBudW1iZXIsXG4gIGZvcm1hdDogbnVtYmVyLFxuICB0eXBlOiBudW1iZXIsXG4gIHBhcmFtOiBudW1iZXJcbikge1xuICBsZXQgbmV3RkJPID0gY3JlYXRlRkJPKHcsIGgsIGludGVybmFsRm9ybWF0LCBmb3JtYXQsIHR5cGUsIHBhcmFtKVxuICBjb3B5UHJvZ3JhbS5iaW5kKClcbiAgZ2wudW5pZm9ybTFpKGNvcHlQcm9ncmFtLnVuaWZvcm1zLnVUZXh0dXJlLCB0YXJnZXQuYXR0YWNoKDApKVxuICBibGl0KG5ld0ZCTy5mYm8pXG4gIHJldHVybiBuZXdGQk9cbn1cblxuZnVuY3Rpb24gcmVzaXplRG91YmxlRkJPKFxuICB0YXJnZXQ6IERvdWJsZUZCTyxcbiAgdzogbnVtYmVyLFxuICBoOiBudW1iZXIsXG4gIGludGVybmFsRm9ybWF0OiBudW1iZXIsXG4gIGZvcm1hdDogbnVtYmVyLFxuICB0eXBlOiBudW1iZXIsXG4gIHBhcmFtOiBudW1iZXJcbikge1xuICBpZiAodGFyZ2V0LndpZHRoID09IHcgJiYgdGFyZ2V0LmhlaWdodCA9PSBoKSByZXR1cm4gdGFyZ2V0XG4gIHRhcmdldC5yZWFkID0gcmVzaXplRkJPKHRhcmdldC5yZWFkLCB3LCBoLCBpbnRlcm5hbEZvcm1hdCwgZm9ybWF0LCB0eXBlLCBwYXJhbSlcbiAgdGFyZ2V0LndyaXRlID0gY3JlYXRlRkJPKHcsIGgsIGludGVybmFsRm9ybWF0LCBmb3JtYXQsIHR5cGUsIHBhcmFtKVxuICB0YXJnZXQud2lkdGggPSB3XG4gIHRhcmdldC5oZWlnaHQgPSBoXG4gIHRhcmdldC50ZXhlbFNpemVYID0gMS4wIC8gd1xuICB0YXJnZXQudGV4ZWxTaXplWSA9IDEuMCAvIGhcbiAgcmV0dXJuIHRhcmdldFxufVxuXG50eXBlIFRleHR1cmUgPSBSZXR1cm5UeXBlPHR5cGVvZiBjcmVhdGVUZXh0dXJlQXN5bmM+XG5cbmZ1bmN0aW9uIGNyZWF0ZVRleHR1cmVBc3luYyh1cmw6IHN0cmluZykge1xuICBsZXQgdGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKVxuICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlKVxuICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUlOX0ZJTFRFUiwgZ2wuTElORUFSKVxuICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfTUFHX0ZJTFRFUiwgZ2wuTElORUFSKVxuICBnbC50ZXhQYXJhbWV0ZXJpKGdsLlRFWFRVUkVfMkQsIGdsLlRFWFRVUkVfV1JBUF9TLCBnbC5SRVBFQVQpXG4gIGdsLnRleFBhcmFtZXRlcmkoZ2wuVEVYVFVSRV8yRCwgZ2wuVEVYVFVSRV9XUkFQX1QsIGdsLlJFUEVBVClcbiAgZ2wudGV4SW1hZ2UyRChcbiAgICBnbC5URVhUVVJFXzJELFxuICAgIDAsXG4gICAgZ2wuUkdCLFxuICAgIDEsXG4gICAgMSxcbiAgICAwLFxuICAgIGdsLlJHQixcbiAgICBnbC5VTlNJR05FRF9CWVRFLFxuICAgIG5ldyBVaW50OEFycmF5KFsyNTUsIDI1NSwgMjU1XSlcbiAgKVxuXG4gIGxldCBvYmogPSB7XG4gICAgdGV4dHVyZSxcbiAgICB3aWR0aDogMSxcbiAgICBoZWlnaHQ6IDEsXG4gICAgYXR0YWNoKGlkOiBudW1iZXIpIHtcbiAgICAgIGdsLmFjdGl2ZVRleHR1cmUoZ2wuVEVYVFVSRTAgKyBpZClcbiAgICAgIGdsLmJpbmRUZXh0dXJlKGdsLlRFWFRVUkVfMkQsIHRleHR1cmUpXG4gICAgICByZXR1cm4gaWRcbiAgICB9LFxuICB9XG5cbiAgbGV0IGltYWdlID0gbmV3IEltYWdlKClcbiAgLy9pbWFnZS5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnXG4gIGltYWdlLm9ubG9hZCA9ICgpID0+IHtcbiAgICBvYmoud2lkdGggPSBpbWFnZS53aWR0aFxuICAgIG9iai5oZWlnaHQgPSBpbWFnZS5oZWlnaHRcbiAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB0ZXh0dXJlKVxuICAgIGdsLnRleEltYWdlMkQoZ2wuVEVYVFVSRV8yRCwgMCwgZ2wuUkdCLCBnbC5SR0IsIGdsLlVOU0lHTkVEX0JZVEUsIGltYWdlKVxuICB9XG4gIGltYWdlLnNyYyA9IHVybFxuXG4gIHJldHVybiBvYmpcbn1cblxuZnVuY3Rpb24gdXBkYXRlS2V5d29yZHMoKSB7XG4gIGxldCBkaXNwbGF5S2V5d29yZHMgPSBbXVxuICBpZiAoY29uZmlnLlNIQURJTkcpIGRpc3BsYXlLZXl3b3Jkcy5wdXNoKCdTSEFESU5HJylcbiAgaWYgKGNvbmZpZy5CTE9PTSkgZGlzcGxheUtleXdvcmRzLnB1c2goJ0JMT09NJylcbiAgaWYgKGNvbmZpZy5TVU5SQVlTKSBkaXNwbGF5S2V5d29yZHMucHVzaCgnU1VOUkFZUycpXG4gIGRpc3BsYXlNYXRlcmlhbC5zZXRLZXl3b3JkcyhkaXNwbGF5S2V5d29yZHMpXG59XG5cbi8vIE1haW5cbnVwZGF0ZUtleXdvcmRzKClcbmluaXRGcmFtZWJ1ZmZlcnMoKVxubXVsdGlwbGVTcGxhdHMoc2FmZVBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiAyMCkgKyA1KVxuXG5sZXQgbGFzdFVwZGF0ZVRpbWUgPSBEYXRlLm5vdygpXG5sZXQgY29sb3JVcGRhdGVUaW1lciA9IDAuMFxudXBkYXRlKClcblxuZnVuY3Rpb24gdXBkYXRlKCkge1xuICBjb25zdCBkdCA9IGNhbGNEZWx0YVRpbWUoKVxuICBpZiAocmVzaXplQ2FudmFzKCkpIGluaXRGcmFtZWJ1ZmZlcnMoKVxuICBhcHBseVZpc3VhbGl6ZXIoKVxuICB1cGRhdGVDb2xvcnMoZHQpXG4gIGFwcGx5SW5wdXRzKClcbiAgaWYgKCFjb25maWcuUEFVU0VEKSBzdGVwKGR0KVxuICByZW5kZXIobnVsbClcbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHVwZGF0ZSlcbn1cblxuZnVuY3Rpb24gY2FsY0RlbHRhVGltZSgpIHtcbiAgbGV0IG5vdyA9IERhdGUubm93KClcbiAgbGV0IGR0ID0gKG5vdyAtIGxhc3RVcGRhdGVUaW1lKSAvIDEwMDBcbiAgZHQgPSBNYXRoLm1pbihkdCwgMC4wMTY2NjYpXG4gIGxhc3RVcGRhdGVUaW1lID0gbm93XG4gIHJldHVybiBkdFxufVxuXG5mdW5jdGlvbiByZXNpemVDYW52YXMoKSB7XG4gIGxldCB3aWR0aCA9IHNjYWxlQnlQaXhlbFJhdGlvKGNhbnZhcy5jbGllbnRXaWR0aClcbiAgbGV0IGhlaWdodCA9IHNjYWxlQnlQaXhlbFJhdGlvKGNhbnZhcy5jbGllbnRIZWlnaHQpXG4gIGlmIChjYW52YXMud2lkdGggIT0gd2lkdGggfHwgY2FudmFzLmhlaWdodCAhPSBoZWlnaHQpIHtcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aFxuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHRcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG4gIHJldHVybiBmYWxzZVxufVxuXG5mdW5jdGlvbiB1cGRhdGVDb2xvcnMoZHQ6IG51bWJlcikge1xuICBpZiAoIWNvbmZpZy5DT0xPUkZVTCkgcmV0dXJuXG5cbiAgY29sb3JVcGRhdGVUaW1lciArPSBkdCAqIGNvbmZpZy5DT0xPUl9VUERBVEVfU1BFRURcbiAgaWYgKGNvbG9yVXBkYXRlVGltZXIgPj0gMSkge1xuICAgIGNvbG9yVXBkYXRlVGltZXIgPSB3cmFwKGNvbG9yVXBkYXRlVGltZXIsIDAsIDEpXG4gICAgcG9pbnRlcnMuZm9yRWFjaChwID0+IHtcbiAgICAgIHAuY29sb3JVcGRhdGVzKytcbiAgICAgIGlmIChwLmNvbG9yVXBkYXRlcyA+IDIpIHtcbiAgICAgICAgcC5jb2xvciA9IGdlbmVyYXRlQ29sb3IoKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlJbnB1dHMoKSB7XG4gIGlmIChzcGxhdFN0YWNrLmxlbmd0aCA+IDApIG11bHRpcGxlU3BsYXRzKHNwbGF0U3RhY2sucG9wKCkgfHwgMClcblxuICBwb2ludGVycy5mb3JFYWNoKHAgPT4ge1xuICAgIGlmIChwLm1vdmVkKSB7XG4gICAgICBwLm1vdmVkID0gZmFsc2VcbiAgICAgIHNwbGF0UG9pbnRlcihwKVxuICAgIH1cbiAgfSlcbn1cblxuLyoqXG4gKiBWaXN1YWxpemVyIC0gYWRkZWRcbiAqL1xuZnVuY3Rpb24gYXBwbHlWaXN1YWxpemVyKCkge1xuICBjb25zdCBkYXRhID0gc29uZ1BsYXllci51cGRhdGUoKVxuXG4gIGlmICghZGF0YSkge1xuICAgIHJldHVyblxuICB9XG5cbiAgY29uc3QgZnJlcSA9IGRhdGEuZnJlcVxuXG4gIC8vIERyYXc/XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZnJlcS5idWNrZXRzOyBpKyspIHtcbiAgICBjb25zdCB4ID0gaSAvIGZyZXEuYnVja2V0c1xuICAgIGNvbnN0IGNvbG9yID0gSFNWdG9SR0IoeCwgMS4wLCAxLjApXG4gICAgc3BsYXQoeCwgMCwgMCwgZnJlcS5jdXJyZW50W2ldICogMTAsIGNvbG9yLCAwLjAxKVxuICB9XG59XG5cbmZ1bmN0aW9uIHN0ZXAoZHQ6IG51bWJlcikge1xuICBnbC5kaXNhYmxlKGdsLkJMRU5EKVxuICBnbC52aWV3cG9ydCgwLCAwLCB2ZWxvY2l0eS53aWR0aCwgdmVsb2NpdHkuaGVpZ2h0KVxuXG4gIGN1cmxQcm9ncmFtLmJpbmQoKVxuICBnbC51bmlmb3JtMmYoY3VybFByb2dyYW0udW5pZm9ybXMudGV4ZWxTaXplLCB2ZWxvY2l0eS50ZXhlbFNpemVYLCB2ZWxvY2l0eS50ZXhlbFNpemVZKVxuICBnbC51bmlmb3JtMWkoY3VybFByb2dyYW0udW5pZm9ybXMudVZlbG9jaXR5LCB2ZWxvY2l0eS5yZWFkLmF0dGFjaCgwKSlcbiAgYmxpdChjdXJsLmZibylcblxuICB2b3J0aWNpdHlQcm9ncmFtLmJpbmQoKVxuICBnbC51bmlmb3JtMmYodm9ydGljaXR5UHJvZ3JhbS51bmlmb3Jtcy50ZXhlbFNpemUsIHZlbG9jaXR5LnRleGVsU2l6ZVgsIHZlbG9jaXR5LnRleGVsU2l6ZVkpXG4gIGdsLnVuaWZvcm0xaSh2b3J0aWNpdHlQcm9ncmFtLnVuaWZvcm1zLnVWZWxvY2l0eSwgdmVsb2NpdHkucmVhZC5hdHRhY2goMCkpXG4gIGdsLnVuaWZvcm0xaSh2b3J0aWNpdHlQcm9ncmFtLnVuaWZvcm1zLnVDdXJsLCBjdXJsLmF0dGFjaCgxKSlcbiAgZ2wudW5pZm9ybTFmKHZvcnRpY2l0eVByb2dyYW0udW5pZm9ybXMuY3VybCwgY29uZmlnLkNVUkwpXG4gIGdsLnVuaWZvcm0xZih2b3J0aWNpdHlQcm9ncmFtLnVuaWZvcm1zLmR0LCBkdClcbiAgYmxpdCh2ZWxvY2l0eS53cml0ZS5mYm8pXG4gIHZlbG9jaXR5LnN3YXAoKVxuXG4gIGRpdmVyZ2VuY2VQcm9ncmFtLmJpbmQoKVxuICBnbC51bmlmb3JtMmYoZGl2ZXJnZW5jZVByb2dyYW0udW5pZm9ybXMudGV4ZWxTaXplLCB2ZWxvY2l0eS50ZXhlbFNpemVYLCB2ZWxvY2l0eS50ZXhlbFNpemVZKVxuICBnbC51bmlmb3JtMWkoZGl2ZXJnZW5jZVByb2dyYW0udW5pZm9ybXMudVZlbG9jaXR5LCB2ZWxvY2l0eS5yZWFkLmF0dGFjaCgwKSlcbiAgYmxpdChkaXZlcmdlbmNlLmZibylcblxuICBjbGVhclByb2dyYW0uYmluZCgpXG4gIGdsLnVuaWZvcm0xaShjbGVhclByb2dyYW0udW5pZm9ybXMudVRleHR1cmUsIHByZXNzdXJlLnJlYWQuYXR0YWNoKDApKVxuICBnbC51bmlmb3JtMWYoY2xlYXJQcm9ncmFtLnVuaWZvcm1zLnZhbHVlLCBjb25maWcuUFJFU1NVUkUpXG4gIGJsaXQocHJlc3N1cmUud3JpdGUuZmJvKVxuICBwcmVzc3VyZS5zd2FwKClcblxuICBwcmVzc3VyZVByb2dyYW0uYmluZCgpXG4gIGdsLnVuaWZvcm0yZihwcmVzc3VyZVByb2dyYW0udW5pZm9ybXMudGV4ZWxTaXplLCB2ZWxvY2l0eS50ZXhlbFNpemVYLCB2ZWxvY2l0eS50ZXhlbFNpemVZKVxuICBnbC51bmlmb3JtMWkocHJlc3N1cmVQcm9ncmFtLnVuaWZvcm1zLnVEaXZlcmdlbmNlLCBkaXZlcmdlbmNlLmF0dGFjaCgwKSlcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb25maWcuUFJFU1NVUkVfSVRFUkFUSU9OUzsgaSsrKSB7XG4gICAgZ2wudW5pZm9ybTFpKHByZXNzdXJlUHJvZ3JhbS51bmlmb3Jtcy51UHJlc3N1cmUsIHByZXNzdXJlLnJlYWQuYXR0YWNoKDEpKVxuICAgIGJsaXQocHJlc3N1cmUud3JpdGUuZmJvKVxuICAgIHByZXNzdXJlLnN3YXAoKVxuICB9XG5cbiAgZ3JhZGllblN1YnRyYWN0UHJvZ3JhbS5iaW5kKClcbiAgZ2wudW5pZm9ybTJmKGdyYWRpZW5TdWJ0cmFjdFByb2dyYW0udW5pZm9ybXMudGV4ZWxTaXplLCB2ZWxvY2l0eS50ZXhlbFNpemVYLCB2ZWxvY2l0eS50ZXhlbFNpemVZKVxuICBnbC51bmlmb3JtMWkoZ3JhZGllblN1YnRyYWN0UHJvZ3JhbS51bmlmb3Jtcy51UHJlc3N1cmUsIHByZXNzdXJlLnJlYWQuYXR0YWNoKDApKVxuICBnbC51bmlmb3JtMWkoZ3JhZGllblN1YnRyYWN0UHJvZ3JhbS51bmlmb3Jtcy51VmVsb2NpdHksIHZlbG9jaXR5LnJlYWQuYXR0YWNoKDEpKVxuICBibGl0KHZlbG9jaXR5LndyaXRlLmZibylcbiAgdmVsb2NpdHkuc3dhcCgpXG5cbiAgYWR2ZWN0aW9uUHJvZ3JhbS5iaW5kKClcbiAgZ2wudW5pZm9ybTJmKGFkdmVjdGlvblByb2dyYW0udW5pZm9ybXMudGV4ZWxTaXplLCB2ZWxvY2l0eS50ZXhlbFNpemVYLCB2ZWxvY2l0eS50ZXhlbFNpemVZKVxuICBpZiAoIWV4dC5zdXBwb3J0TGluZWFyRmlsdGVyaW5nKVxuICAgIGdsLnVuaWZvcm0yZihhZHZlY3Rpb25Qcm9ncmFtLnVuaWZvcm1zLmR5ZVRleGVsU2l6ZSwgdmVsb2NpdHkudGV4ZWxTaXplWCwgdmVsb2NpdHkudGV4ZWxTaXplWSlcbiAgbGV0IHZlbG9jaXR5SWQgPSB2ZWxvY2l0eS5yZWFkLmF0dGFjaCgwKVxuICBnbC51bmlmb3JtMWkoYWR2ZWN0aW9uUHJvZ3JhbS51bmlmb3Jtcy51VmVsb2NpdHksIHZlbG9jaXR5SWQpXG4gIGdsLnVuaWZvcm0xaShhZHZlY3Rpb25Qcm9ncmFtLnVuaWZvcm1zLnVTb3VyY2UsIHZlbG9jaXR5SWQpXG4gIGdsLnVuaWZvcm0xZihhZHZlY3Rpb25Qcm9ncmFtLnVuaWZvcm1zLmR0LCBkdClcbiAgZ2wudW5pZm9ybTFmKGFkdmVjdGlvblByb2dyYW0udW5pZm9ybXMuZGlzc2lwYXRpb24sIGNvbmZpZy5WRUxPQ0lUWV9ESVNTSVBBVElPTilcbiAgYmxpdCh2ZWxvY2l0eS53cml0ZS5mYm8pXG4gIHZlbG9jaXR5LnN3YXAoKVxuXG4gIGdsLnZpZXdwb3J0KDAsIDAsIGR5ZS53aWR0aCwgZHllLmhlaWdodClcblxuICBpZiAoIWV4dC5zdXBwb3J0TGluZWFyRmlsdGVyaW5nKVxuICAgIGdsLnVuaWZvcm0yZihhZHZlY3Rpb25Qcm9ncmFtLnVuaWZvcm1zLmR5ZVRleGVsU2l6ZSwgZHllLnRleGVsU2l6ZVgsIGR5ZS50ZXhlbFNpemVZKVxuICBnbC51bmlmb3JtMWkoYWR2ZWN0aW9uUHJvZ3JhbS51bmlmb3Jtcy51VmVsb2NpdHksIHZlbG9jaXR5LnJlYWQuYXR0YWNoKDApKVxuICBnbC51bmlmb3JtMWkoYWR2ZWN0aW9uUHJvZ3JhbS51bmlmb3Jtcy51U291cmNlLCBkeWUucmVhZC5hdHRhY2goMSkpXG4gIGdsLnVuaWZvcm0xZihhZHZlY3Rpb25Qcm9ncmFtLnVuaWZvcm1zLmRpc3NpcGF0aW9uLCBjb25maWcuREVOU0lUWV9ESVNTSVBBVElPTilcbiAgYmxpdChkeWUud3JpdGUuZmJvKVxuICBkeWUuc3dhcCgpXG59XG5cbmZ1bmN0aW9uIHJlbmRlcih0YXJnZXQ6IEZCTyB8IG51bGwpIHtcbiAgaWYgKGNvbmZpZy5CTE9PTSkgYXBwbHlCbG9vbShkeWUucmVhZCwgYmxvb20pXG4gIGlmIChjb25maWcuU1VOUkFZUykge1xuICAgIGFwcGx5U3VucmF5cyhkeWUucmVhZCwgZHllLndyaXRlLCBzdW5yYXlzKVxuICAgIGJsdXJGQk8oc3VucmF5cywgc3VucmF5c1RlbXAsIDEpXG4gIH1cblxuICBpZiAodGFyZ2V0ID09IG51bGwgfHwgIWNvbmZpZy5UUkFOU1BBUkVOVCkge1xuICAgIGdsLmJsZW5kRnVuYyhnbC5PTkUsIGdsLk9ORV9NSU5VU19TUkNfQUxQSEEpXG4gICAgZ2wuZW5hYmxlKGdsLkJMRU5EKVxuICB9IGVsc2Uge1xuICAgIGdsLmRpc2FibGUoZ2wuQkxFTkQpXG4gIH1cblxuICBsZXQgd2lkdGggPSB0YXJnZXQgPT0gbnVsbCA/IGdsLmRyYXdpbmdCdWZmZXJXaWR0aCA6IHRhcmdldC53aWR0aFxuICBsZXQgaGVpZ2h0ID0gdGFyZ2V0ID09IG51bGwgPyBnbC5kcmF3aW5nQnVmZmVySGVpZ2h0IDogdGFyZ2V0LmhlaWdodFxuICBnbC52aWV3cG9ydCgwLCAwLCB3aWR0aCwgaGVpZ2h0KVxuXG4gIGxldCBmYm8gPSB0YXJnZXQgPT0gbnVsbCA/IG51bGwgOiB0YXJnZXQuZmJvXG4gIGlmICghY29uZmlnLlRSQU5TUEFSRU5UKSBkcmF3Q29sb3IoZmJvLCBub3JtYWxpemVDb2xvcihjb25maWcuQkFDS19DT0xPUikpXG4gIGlmICh0YXJnZXQgPT0gbnVsbCAmJiBjb25maWcuVFJBTlNQQVJFTlQpIGRyYXdDaGVja2VyYm9hcmQoZmJvKVxuICBkcmF3RGlzcGxheShmYm8sIHdpZHRoLCBoZWlnaHQpXG59XG5cbmZ1bmN0aW9uIGRyYXdDb2xvcihmYm86IFdlYkdMRnJhbWVidWZmZXIgfCBudWxsLCBjb2xvcjogQ29sb3IpIHtcbiAgY29sb3JQcm9ncmFtLmJpbmQoKVxuICBnbC51bmlmb3JtNGYoY29sb3JQcm9ncmFtLnVuaWZvcm1zLmNvbG9yLCBjb2xvci5yLCBjb2xvci5nLCBjb2xvci5iLCAxKVxuICBibGl0KGZibylcbn1cblxuZnVuY3Rpb24gZHJhd0NoZWNrZXJib2FyZChmYm86IFdlYkdMRnJhbWVidWZmZXIgfCBudWxsKSB7XG4gIGNoZWNrZXJib2FyZFByb2dyYW0uYmluZCgpXG4gIGdsLnVuaWZvcm0xZihjaGVja2VyYm9hcmRQcm9ncmFtLnVuaWZvcm1zLmFzcGVjdFJhdGlvLCBjYW52YXMud2lkdGggLyBjYW52YXMuaGVpZ2h0KVxuICBibGl0KGZibylcbn1cblxuZnVuY3Rpb24gZHJhd0Rpc3BsYXkoZmJvOiBXZWJHTEZyYW1lYnVmZmVyIHwgbnVsbCwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgZGlzcGxheU1hdGVyaWFsLmJpbmQoKVxuICBjb25zdCB1bmlmb3JtcyA9IG5vdE51bGwoZGlzcGxheU1hdGVyaWFsLnVuaWZvcm1zKVxuICBpZiAoY29uZmlnLlNIQURJTkcpIGdsLnVuaWZvcm0yZih1bmlmb3Jtcy50ZXhlbFNpemUsIDEuMCAvIHdpZHRoLCAxLjAgLyBoZWlnaHQpXG4gIGdsLnVuaWZvcm0xaSh1bmlmb3Jtcy51VGV4dHVyZSwgZHllLnJlYWQuYXR0YWNoKDApKVxuICBpZiAoY29uZmlnLkJMT09NKSB7XG4gICAgZ2wudW5pZm9ybTFpKHVuaWZvcm1zLnVCbG9vbSwgYmxvb20uYXR0YWNoKDEpKVxuICAgIGdsLnVuaWZvcm0xaSh1bmlmb3Jtcy51RGl0aGVyaW5nLCBkaXRoZXJpbmdUZXh0dXJlLmF0dGFjaCgyKSlcbiAgICBsZXQgc2NhbGUgPSBnZXRUZXh0dXJlU2NhbGUoZGl0aGVyaW5nVGV4dHVyZSwgd2lkdGgsIGhlaWdodClcbiAgICBnbC51bmlmb3JtMmYodW5pZm9ybXMuZGl0aGVyU2NhbGUsIHNjYWxlLngsIHNjYWxlLnkpXG4gIH1cbiAgaWYgKGNvbmZpZy5TVU5SQVlTKSBnbC51bmlmb3JtMWkodW5pZm9ybXMudVN1bnJheXMsIHN1bnJheXMuYXR0YWNoKDMpKVxuICBibGl0KGZibylcbn1cblxuZnVuY3Rpb24gYXBwbHlCbG9vbShzb3VyY2U6IEZCTywgZGVzdGluYXRpb246IEZCTykge1xuICBpZiAoYmxvb21GcmFtZWJ1ZmZlcnMubGVuZ3RoIDwgMikgcmV0dXJuXG5cbiAgbGV0IGxhc3QgPSBkZXN0aW5hdGlvblxuXG4gIGdsLmRpc2FibGUoZ2wuQkxFTkQpXG4gIGJsb29tUHJlZmlsdGVyUHJvZ3JhbS5iaW5kKClcbiAgbGV0IGtuZWUgPSBjb25maWcuQkxPT01fVEhSRVNIT0xEICogY29uZmlnLkJMT09NX1NPRlRfS05FRSArIDAuMDAwMVxuICBsZXQgY3VydmUwID0gY29uZmlnLkJMT09NX1RIUkVTSE9MRCAtIGtuZWVcbiAgbGV0IGN1cnZlMSA9IGtuZWUgKiAyXG4gIGxldCBjdXJ2ZTIgPSAwLjI1IC8ga25lZVxuICBnbC51bmlmb3JtM2YoYmxvb21QcmVmaWx0ZXJQcm9ncmFtLnVuaWZvcm1zLmN1cnZlLCBjdXJ2ZTAsIGN1cnZlMSwgY3VydmUyKVxuICBnbC51bmlmb3JtMWYoYmxvb21QcmVmaWx0ZXJQcm9ncmFtLnVuaWZvcm1zLnRocmVzaG9sZCwgY29uZmlnLkJMT09NX1RIUkVTSE9MRClcbiAgZ2wudW5pZm9ybTFpKGJsb29tUHJlZmlsdGVyUHJvZ3JhbS51bmlmb3Jtcy51VGV4dHVyZSwgc291cmNlLmF0dGFjaCgwKSlcbiAgZ2wudmlld3BvcnQoMCwgMCwgbGFzdC53aWR0aCwgbGFzdC5oZWlnaHQpXG4gIGJsaXQobGFzdC5mYm8pXG5cbiAgYmxvb21CbHVyUHJvZ3JhbS5iaW5kKClcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBibG9vbUZyYW1lYnVmZmVycy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBkZXN0ID0gYmxvb21GcmFtZWJ1ZmZlcnNbaV1cbiAgICBnbC51bmlmb3JtMmYoYmxvb21CbHVyUHJvZ3JhbS51bmlmb3Jtcy50ZXhlbFNpemUsIGxhc3QudGV4ZWxTaXplWCwgbGFzdC50ZXhlbFNpemVZKVxuICAgIGdsLnVuaWZvcm0xaShibG9vbUJsdXJQcm9ncmFtLnVuaWZvcm1zLnVUZXh0dXJlLCBsYXN0LmF0dGFjaCgwKSlcbiAgICBnbC52aWV3cG9ydCgwLCAwLCBkZXN0LndpZHRoLCBkZXN0LmhlaWdodClcbiAgICBibGl0KGRlc3QuZmJvKVxuICAgIGxhc3QgPSBkZXN0XG4gIH1cblxuICBnbC5ibGVuZEZ1bmMoZ2wuT05FLCBnbC5PTkUpXG4gIGdsLmVuYWJsZShnbC5CTEVORClcblxuICBmb3IgKGxldCBpID0gYmxvb21GcmFtZWJ1ZmZlcnMubGVuZ3RoIC0gMjsgaSA+PSAwOyBpLS0pIHtcbiAgICBsZXQgYmFzZVRleCA9IGJsb29tRnJhbWVidWZmZXJzW2ldXG4gICAgZ2wudW5pZm9ybTJmKGJsb29tQmx1clByb2dyYW0udW5pZm9ybXMudGV4ZWxTaXplLCBsYXN0LnRleGVsU2l6ZVgsIGxhc3QudGV4ZWxTaXplWSlcbiAgICBnbC51bmlmb3JtMWkoYmxvb21CbHVyUHJvZ3JhbS51bmlmb3Jtcy51VGV4dHVyZSwgbGFzdC5hdHRhY2goMCkpXG4gICAgZ2wudmlld3BvcnQoMCwgMCwgYmFzZVRleC53aWR0aCwgYmFzZVRleC5oZWlnaHQpXG4gICAgYmxpdChiYXNlVGV4LmZibylcbiAgICBsYXN0ID0gYmFzZVRleFxuICB9XG5cbiAgZ2wuZGlzYWJsZShnbC5CTEVORClcbiAgYmxvb21GaW5hbFByb2dyYW0uYmluZCgpXG4gIGdsLnVuaWZvcm0yZihibG9vbUZpbmFsUHJvZ3JhbS51bmlmb3Jtcy50ZXhlbFNpemUsIGxhc3QudGV4ZWxTaXplWCwgbGFzdC50ZXhlbFNpemVZKVxuICBnbC51bmlmb3JtMWkoYmxvb21GaW5hbFByb2dyYW0udW5pZm9ybXMudVRleHR1cmUsIGxhc3QuYXR0YWNoKDApKVxuICBnbC51bmlmb3JtMWYoYmxvb21GaW5hbFByb2dyYW0udW5pZm9ybXMuaW50ZW5zaXR5LCBjb25maWcuQkxPT01fSU5URU5TSVRZKVxuICBnbC52aWV3cG9ydCgwLCAwLCBkZXN0aW5hdGlvbi53aWR0aCwgZGVzdGluYXRpb24uaGVpZ2h0KVxuICBibGl0KGRlc3RpbmF0aW9uLmZibylcbn1cblxuZnVuY3Rpb24gYXBwbHlTdW5yYXlzKHNvdXJjZTogRkJPLCBtYXNrOiBGQk8sIGRlc3RpbmF0aW9uOiBGQk8pIHtcbiAgZ2wuZGlzYWJsZShnbC5CTEVORClcbiAgc3VucmF5c01hc2tQcm9ncmFtLmJpbmQoKVxuICBnbC51bmlmb3JtMWkoc3VucmF5c01hc2tQcm9ncmFtLnVuaWZvcm1zLnVUZXh0dXJlLCBzb3VyY2UuYXR0YWNoKDApKVxuICBnbC52aWV3cG9ydCgwLCAwLCBtYXNrLndpZHRoLCBtYXNrLmhlaWdodClcbiAgYmxpdChtYXNrLmZibylcblxuICBzdW5yYXlzUHJvZ3JhbS5iaW5kKClcbiAgZ2wudW5pZm9ybTFmKHN1bnJheXNQcm9ncmFtLnVuaWZvcm1zLndlaWdodCwgY29uZmlnLlNVTlJBWVNfV0VJR0hUKVxuICBnbC51bmlmb3JtMWkoc3VucmF5c1Byb2dyYW0udW5pZm9ybXMudVRleHR1cmUsIG1hc2suYXR0YWNoKDApKVxuICBnbC52aWV3cG9ydCgwLCAwLCBkZXN0aW5hdGlvbi53aWR0aCwgZGVzdGluYXRpb24uaGVpZ2h0KVxuICBibGl0KGRlc3RpbmF0aW9uLmZibylcbn1cblxuZnVuY3Rpb24gYmx1ckZCTyh0YXJnZXQ6IEZCTywgdGVtcDogRkJPLCBpdGVyYXRpb25zOiBudW1iZXIpIHtcbiAgYmx1clByb2dyYW0uYmluZCgpXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcmF0aW9uczsgaSsrKSB7XG4gICAgZ2wudW5pZm9ybTJmKGJsdXJQcm9ncmFtLnVuaWZvcm1zLnRleGVsU2l6ZSwgdGFyZ2V0LnRleGVsU2l6ZVgsIDAuMClcbiAgICBnbC51bmlmb3JtMWkoYmx1clByb2dyYW0udW5pZm9ybXMudVRleHR1cmUsIHRhcmdldC5hdHRhY2goMCkpXG4gICAgYmxpdCh0ZW1wLmZibylcblxuICAgIGdsLnVuaWZvcm0yZihibHVyUHJvZ3JhbS51bmlmb3Jtcy50ZXhlbFNpemUsIDAuMCwgdGFyZ2V0LnRleGVsU2l6ZVkpXG4gICAgZ2wudW5pZm9ybTFpKGJsdXJQcm9ncmFtLnVuaWZvcm1zLnVUZXh0dXJlLCB0ZW1wLmF0dGFjaCgwKSlcbiAgICBibGl0KHRhcmdldC5mYm8pXG4gIH1cbn1cblxuZnVuY3Rpb24gc3BsYXRQb2ludGVyKHBvaW50ZXI6IFBvaW50ZXIpIHtcbiAgbGV0IGR4ID0gcG9pbnRlci5kZWx0YVggKiBjb25maWcuU1BMQVRfRk9SQ0VcbiAgbGV0IGR5ID0gcG9pbnRlci5kZWx0YVkgKiBjb25maWcuU1BMQVRfRk9SQ0VcbiAgc3BsYXQocG9pbnRlci50ZXhjb29yZFgsIHBvaW50ZXIudGV4Y29vcmRZLCBkeCwgZHksIHBvaW50ZXIuY29sb3IpXG59XG5cbmZ1bmN0aW9uIG11bHRpcGxlU3BsYXRzKGFtb3VudDogbnVtYmVyKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYW1vdW50OyBpKyspIHtcbiAgICBjb25zdCBjb2xvciA9IGdlbmVyYXRlQ29sb3IoKVxuICAgIGNvbG9yLnIgKj0gMTAuMFxuICAgIGNvbG9yLmcgKj0gMTAuMFxuICAgIGNvbG9yLmIgKj0gMTAuMFxuICAgIGNvbnN0IHggPSBNYXRoLnJhbmRvbSgpXG4gICAgY29uc3QgeSA9IE1hdGgucmFuZG9tKClcbiAgICBjb25zdCBkeCA9IDEwMDAgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSlcbiAgICBjb25zdCBkeSA9IDEwMDAgKiAoTWF0aC5yYW5kb20oKSAtIDAuNSlcbiAgICBzcGxhdCh4LCB5LCBkeCwgZHksIGNvbG9yKVxuICB9XG59XG5cbi8qKlxuICogU3BsYXQgc29tZSBkeWUgaW50byB0aGUgc2ltdWxhdGlvbi5cbiAqIEBwYXJhbSB4IENlbnRlciBYIGNvb3JkaW5hdGUuIEZsb2F0IGZyb20gMCAobGVmdCkgdG8gMSAocmlnaHQpXG4gKiBAcGFyYW0geSBDZW50ZXIgWSBjb29yZGluYXRlLiBGbG9hdCBmb3JtIDAgKGJvdHRvbSkgdG8gMSAodG9wKVxuICogQHBhcmFtIGR4IEhvcml6b250YWwgZm9yY2UgdmVjdG9yIGVsZW1lbnQsIGluIHBpeGVscy4gUG9zaXRpdmUgLT4gbGVmdCwgbmVnYXRpdmUgLT4gcmlnaHQuXG4gKiBAcGFyYW0gZHkgVmVydGljYWwgZm9yY2UgdmVjdG9yIGVsZW1lbnQsIGluIHBpeGVscy4gUG9zaXRpdmUgLT4gdG9wLCBuZWdhdGl2ZSAtPiBib3R0b20uXG4gKiBAcGFyYW0gY29sb3IgQ29sb3IuIFVzaW5nIHsgciwgZywgYiB9IHZhbHVlcyA+MSBjcmVhdGVzIGEgbGFyZ2VyIHNwbGF0LlxuICovXG5mdW5jdGlvbiBzcGxhdCh4OiBudW1iZXIsIHk6IG51bWJlciwgZHg6IG51bWJlciwgZHk6IG51bWJlciwgY29sb3I/OiBDb2xvciwgcmFkaXVzPzogbnVtYmVyKSB7XG4gIGdsLnZpZXdwb3J0KDAsIDAsIHZlbG9jaXR5LndpZHRoLCB2ZWxvY2l0eS5oZWlnaHQpXG4gIHNwbGF0UHJvZ3JhbS5iaW5kKClcbiAgZ2wudW5pZm9ybTFpKHNwbGF0UHJvZ3JhbS51bmlmb3Jtcy51VGFyZ2V0LCB2ZWxvY2l0eS5yZWFkLmF0dGFjaCgwKSlcbiAgZ2wudW5pZm9ybTFmKHNwbGF0UHJvZ3JhbS51bmlmb3Jtcy5hc3BlY3RSYXRpbywgY2FudmFzLndpZHRoIC8gY2FudmFzLmhlaWdodClcbiAgZ2wudW5pZm9ybTJmKHNwbGF0UHJvZ3JhbS51bmlmb3Jtcy5wb2ludCwgeCwgeSlcbiAgZ2wudW5pZm9ybTNmKHNwbGF0UHJvZ3JhbS51bmlmb3Jtcy5jb2xvciwgZHgsIGR5LCAwLjApXG4gIGdsLnVuaWZvcm0xZihzcGxhdFByb2dyYW0udW5pZm9ybXMucmFkaXVzLCBjb3JyZWN0UmFkaXVzKChyYWRpdXMgfHwgY29uZmlnLlNQTEFUX1JBRElVUykgLyAxMDAuMCkpXG4gIGJsaXQodmVsb2NpdHkud3JpdGUuZmJvKVxuICB2ZWxvY2l0eS5zd2FwKClcblxuICBpZiAoY29sb3IpIHtcbiAgICBnbC52aWV3cG9ydCgwLCAwLCBkeWUud2lkdGgsIGR5ZS5oZWlnaHQpXG4gICAgZ2wudW5pZm9ybTFpKHNwbGF0UHJvZ3JhbS51bmlmb3Jtcy51VGFyZ2V0LCBkeWUucmVhZC5hdHRhY2goMCkpXG4gICAgZ2wudW5pZm9ybTNmKHNwbGF0UHJvZ3JhbS51bmlmb3Jtcy5jb2xvciwgY29sb3IuciwgY29sb3IuZywgY29sb3IuYilcbiAgICBibGl0KGR5ZS53cml0ZS5mYm8pXG4gICAgZHllLnN3YXAoKVxuICB9XG59XG4vLyBFeHBvc2Vcbjsod2luZG93IGFzIGFueSkuc3BsYXQgPSBzcGxhdFxuXG5mdW5jdGlvbiBjb3JyZWN0UmFkaXVzKHJhZGl1czogbnVtYmVyKSB7XG4gIGxldCBhc3BlY3RSYXRpbyA9IGNhbnZhcy53aWR0aCAvIGNhbnZhcy5oZWlnaHRcbiAgaWYgKGFzcGVjdFJhdGlvID4gMSkgcmFkaXVzICo9IGFzcGVjdFJhdGlvXG4gIHJldHVybiByYWRpdXNcbn1cblxuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGUgPT4ge1xuICBsZXQgcG9zWCA9IHNjYWxlQnlQaXhlbFJhdGlvKGUub2Zmc2V0WClcbiAgbGV0IHBvc1kgPSBzY2FsZUJ5UGl4ZWxSYXRpbyhlLm9mZnNldFkpXG4gIGxldCBwb2ludGVyID0gcG9pbnRlcnMuZmluZChwID0+IHAuaWQgPT0gLTEpXG4gIGlmIChwb2ludGVyID09IG51bGwpIHBvaW50ZXIgPSBuZXcgUG9pbnRlcigpXG4gIHVwZGF0ZVBvaW50ZXJEb3duRGF0YShwb2ludGVyLCAtMSwgcG9zWCwgcG9zWSlcbn0pXG5cbmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBlID0+IHtcbiAgbGV0IHBvaW50ZXIgPSBwb2ludGVyc1swXVxuICBpZiAoIXBvaW50ZXIuZG93bikgcmV0dXJuXG4gIGxldCBwb3NYID0gc2NhbGVCeVBpeGVsUmF0aW8oZS5vZmZzZXRYKVxuICBsZXQgcG9zWSA9IHNjYWxlQnlQaXhlbFJhdGlvKGUub2Zmc2V0WSlcbiAgdXBkYXRlUG9pbnRlck1vdmVEYXRhKHBvaW50ZXIsIHBvc1gsIHBvc1kpXG59KVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsICgpID0+IHtcbiAgdXBkYXRlUG9pbnRlclVwRGF0YShwb2ludGVyc1swXSlcbn0pXG5cbmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZSA9PiB7XG4gIGUucHJldmVudERlZmF1bHQoKVxuICBjb25zdCB0b3VjaGVzID0gZS50YXJnZXRUb3VjaGVzXG4gIHdoaWxlICh0b3VjaGVzLmxlbmd0aCA+PSBwb2ludGVycy5sZW5ndGgpIHBvaW50ZXJzLnB1c2gobmV3IFBvaW50ZXIoKSlcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3VjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IHBvc1ggPSBzY2FsZUJ5UGl4ZWxSYXRpbyh0b3VjaGVzW2ldLnBhZ2VYKVxuICAgIGxldCBwb3NZID0gc2NhbGVCeVBpeGVsUmF0aW8odG91Y2hlc1tpXS5wYWdlWSlcbiAgICB1cGRhdGVQb2ludGVyRG93bkRhdGEocG9pbnRlcnNbaSArIDFdLCB0b3VjaGVzW2ldLmlkZW50aWZpZXIsIHBvc1gsIHBvc1kpXG4gIH1cbn0pXG5cbmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFxuICAndG91Y2htb3ZlJyxcbiAgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgdG91Y2hlcyA9IGUudGFyZ2V0VG91Y2hlc1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG91Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHBvaW50ZXIgPSBwb2ludGVyc1tpICsgMV1cbiAgICAgIGlmICghcG9pbnRlci5kb3duKSBjb250aW51ZVxuICAgICAgbGV0IHBvc1ggPSBzY2FsZUJ5UGl4ZWxSYXRpbyh0b3VjaGVzW2ldLnBhZ2VYKVxuICAgICAgbGV0IHBvc1kgPSBzY2FsZUJ5UGl4ZWxSYXRpbyh0b3VjaGVzW2ldLnBhZ2VZKVxuICAgICAgdXBkYXRlUG9pbnRlck1vdmVEYXRhKHBvaW50ZXIsIHBvc1gsIHBvc1kpXG4gICAgfVxuICB9LFxuICBmYWxzZVxuKVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBlID0+IHtcbiAgY29uc3QgdG91Y2hlcyA9IGUuY2hhbmdlZFRvdWNoZXNcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3VjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IHBvaW50ZXIgPSBwb2ludGVycy5maW5kKHAgPT4gcC5pZCA9PSB0b3VjaGVzW2ldLmlkZW50aWZpZXIpXG4gICAgaWYgKHBvaW50ZXIgPT0gbnVsbCkgY29udGludWVcbiAgICB1cGRhdGVQb2ludGVyVXBEYXRhKHBvaW50ZXIpXG4gIH1cbn0pXG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZSA9PiB7XG4gIGlmIChlLmNvZGUgPT09ICdLZXlQJykgY29uZmlnLlBBVVNFRCA9ICFjb25maWcuUEFVU0VEXG4gIGlmIChlLmtleSA9PT0gJyAnKSBzcGxhdFN0YWNrLnB1c2goc2FmZVBhcnNlSW50KE1hdGgucmFuZG9tKCkgKiAyMCkgKyA1KVxufSlcblxuZnVuY3Rpb24gdXBkYXRlUG9pbnRlckRvd25EYXRhKHBvaW50ZXI6IFBvaW50ZXIsIGlkOiBudW1iZXIsIHBvc1g6IG51bWJlciwgcG9zWTogbnVtYmVyKSB7XG4gIHBvaW50ZXIuaWQgPSBpZFxuICBwb2ludGVyLmRvd24gPSB0cnVlXG4gIHBvaW50ZXIubW92ZWQgPSBmYWxzZVxuICBwb2ludGVyLnRleGNvb3JkWCA9IHBvc1ggLyBjYW52YXMud2lkdGhcbiAgcG9pbnRlci50ZXhjb29yZFkgPSAxLjAgLSBwb3NZIC8gY2FudmFzLmhlaWdodFxuICBwb2ludGVyLnByZXZUZXhjb29yZFggPSBwb2ludGVyLnRleGNvb3JkWFxuICBwb2ludGVyLnByZXZUZXhjb29yZFkgPSBwb2ludGVyLnRleGNvb3JkWVxuICBwb2ludGVyLmRlbHRhWCA9IDBcbiAgcG9pbnRlci5kZWx0YVkgPSAwXG4gIHBvaW50ZXIuY29sb3JVcGRhdGVzID0gMFxuXG4gIGlmICghY29uZmlnLlJBTkRPTV9DT0xPUikge1xuICAgIHBvaW50ZXIuY29sb3IgPSBtdXRlVUlDb2xvcihjb25maWcuU1BMQVRfQ09MT1IpXG4gIH0gZWxzZSB7XG4gICAgcG9pbnRlci5jb2xvciA9IGdlbmVyYXRlQ29sb3IoKVxuICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVBvaW50ZXJNb3ZlRGF0YShwb2ludGVyOiBQb2ludGVyLCBwb3NYOiBudW1iZXIsIHBvc1k6IG51bWJlcikge1xuICBwb2ludGVyLnByZXZUZXhjb29yZFggPSBwb2ludGVyLnRleGNvb3JkWFxuICBwb2ludGVyLnByZXZUZXhjb29yZFkgPSBwb2ludGVyLnRleGNvb3JkWVxuICBwb2ludGVyLnRleGNvb3JkWCA9IHBvc1ggLyBjYW52YXMud2lkdGhcbiAgcG9pbnRlci50ZXhjb29yZFkgPSAxLjAgLSBwb3NZIC8gY2FudmFzLmhlaWdodFxuICBwb2ludGVyLmRlbHRhWCA9IGNvcnJlY3REZWx0YVgocG9pbnRlci50ZXhjb29yZFggLSBwb2ludGVyLnByZXZUZXhjb29yZFgpXG4gIHBvaW50ZXIuZGVsdGFZID0gY29ycmVjdERlbHRhWShwb2ludGVyLnRleGNvb3JkWSAtIHBvaW50ZXIucHJldlRleGNvb3JkWSlcbiAgcG9pbnRlci5tb3ZlZCA9IE1hdGguYWJzKHBvaW50ZXIuZGVsdGFYKSA+IDAgfHwgTWF0aC5hYnMocG9pbnRlci5kZWx0YVkpID4gMFxufVxuXG5mdW5jdGlvbiB1cGRhdGVQb2ludGVyVXBEYXRhKHBvaW50ZXI6IFBvaW50ZXIpIHtcbiAgcG9pbnRlci5kb3duID0gZmFsc2Vcbn1cblxuZnVuY3Rpb24gY29ycmVjdERlbHRhWChkZWx0YTogbnVtYmVyKSB7XG4gIGxldCBhc3BlY3RSYXRpbyA9IGNhbnZhcy53aWR0aCAvIGNhbnZhcy5oZWlnaHRcbiAgaWYgKGFzcGVjdFJhdGlvIDwgMSkgZGVsdGEgKj0gYXNwZWN0UmF0aW9cbiAgcmV0dXJuIGRlbHRhXG59XG5cbmZ1bmN0aW9uIGNvcnJlY3REZWx0YVkoZGVsdGE6IG51bWJlcikge1xuICBsZXQgYXNwZWN0UmF0aW8gPSBjYW52YXMud2lkdGggLyBjYW52YXMuaGVpZ2h0XG4gIGlmIChhc3BlY3RSYXRpbyA+IDEpIGRlbHRhIC89IGFzcGVjdFJhdGlvXG4gIHJldHVybiBkZWx0YVxufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZUNvbG9yKCkge1xuICBsZXQgYyA9IEhTVnRvUkdCKE1hdGgucmFuZG9tKCksIDEuMCwgMS4wKVxuICBjLnIgKj0gMC4xNVxuICBjLmcgKj0gMC4xNVxuICBjLmIgKj0gMC4xNVxuICByZXR1cm4gY1xufVxuXG5mdW5jdGlvbiBIU1Z0b1JHQihoOiBudW1iZXIsIHM6IG51bWJlciwgdjogbnVtYmVyKSB7XG4gIGxldCByID0gMCxcbiAgICBnID0gMCxcbiAgICBiID0gMCxcbiAgICBpID0gMCxcbiAgICBmID0gMCxcbiAgICBwID0gMCxcbiAgICBxID0gMCxcbiAgICB0ID0gMFxuICBpID0gTWF0aC5mbG9vcihoICogNilcbiAgZiA9IGggKiA2IC0gaVxuICBwID0gdiAqICgxIC0gcylcbiAgcSA9IHYgKiAoMSAtIGYgKiBzKVxuICB0ID0gdiAqICgxIC0gKDEgLSBmKSAqIHMpXG5cbiAgc3dpdGNoIChpICUgNikge1xuICAgIGNhc2UgMDpcbiAgICAgIDsociA9IHYpLCAoZyA9IHQpLCAoYiA9IHApXG4gICAgICBicmVha1xuICAgIGNhc2UgMTpcbiAgICAgIDsociA9IHEpLCAoZyA9IHYpLCAoYiA9IHApXG4gICAgICBicmVha1xuICAgIGNhc2UgMjpcbiAgICAgIDsociA9IHApLCAoZyA9IHYpLCAoYiA9IHQpXG4gICAgICBicmVha1xuICAgIGNhc2UgMzpcbiAgICAgIDsociA9IHApLCAoZyA9IHEpLCAoYiA9IHYpXG4gICAgICBicmVha1xuICAgIGNhc2UgNDpcbiAgICAgIDsociA9IHQpLCAoZyA9IHApLCAoYiA9IHYpXG4gICAgICBicmVha1xuICAgIGNhc2UgNTpcbiAgICAgIDsociA9IHYpLCAoZyA9IHApLCAoYiA9IHEpXG4gICAgICBicmVha1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByLFxuICAgIGcsXG4gICAgYixcbiAgfVxufVxuXG50eXBlIENvbG9yID0geyByOiBudW1iZXI7IGc6IG51bWJlcjsgYjogbnVtYmVyIH1cblxuZnVuY3Rpb24gbm9ybWFsaXplQ29sb3IoaW5wdXQ6IENvbG9yKTogQ29sb3Ige1xuICBsZXQgb3V0cHV0ID0ge1xuICAgIHI6IGlucHV0LnIgLyAyNTUsXG4gICAgZzogaW5wdXQuZyAvIDI1NSxcbiAgICBiOiBpbnB1dC5iIC8gMjU1LFxuICB9XG4gIHJldHVybiBvdXRwdXRcbn1cblxuZnVuY3Rpb24gdGZDb2xvcihpbnB1dDogQ29sb3IsIHRmOiAoeDogbnVtYmVyKSA9PiBudW1iZXIpOiBDb2xvciB7XG4gIGxldCBvdXRwdXQgPSB7XG4gICAgcjogdGYoaW5wdXQuciksXG4gICAgZzogdGYoaW5wdXQuZyksXG4gICAgYjogdGYoaW5wdXQuYiksXG4gIH1cbiAgcmV0dXJuIG91dHB1dFxufVxuXG5jb25zdCBtdXRlVUlDb2xvciA9IChjb2xvcjogQ29sb3IpID0+IHRmQ29sb3IoY29sb3IsIHggPT4geCAvIDI3MCArIDAuMDUpXG5cbmZ1bmN0aW9uIHdyYXAodmFsdWU6IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKSB7XG4gIGxldCByYW5nZSA9IG1heCAtIG1pblxuICBpZiAocmFuZ2UgPT0gMCkgcmV0dXJuIG1pblxuICByZXR1cm4gKCh2YWx1ZSAtIG1pbikgJSByYW5nZSkgKyBtaW5cbn1cblxuZnVuY3Rpb24gZ2V0UmVzb2x1dGlvbihyZXNvbHV0aW9uOiBudW1iZXIpIHtcbiAgbGV0IGFzcGVjdFJhdGlvID0gZ2wuZHJhd2luZ0J1ZmZlcldpZHRoIC8gZ2wuZHJhd2luZ0J1ZmZlckhlaWdodFxuICBpZiAoYXNwZWN0UmF0aW8gPCAxKSBhc3BlY3RSYXRpbyA9IDEuMCAvIGFzcGVjdFJhdGlvXG5cbiAgbGV0IG1pbiA9IE1hdGgucm91bmQocmVzb2x1dGlvbilcbiAgbGV0IG1heCA9IE1hdGgucm91bmQocmVzb2x1dGlvbiAqIGFzcGVjdFJhdGlvKVxuXG4gIGlmIChnbC5kcmF3aW5nQnVmZmVyV2lkdGggPiBnbC5kcmF3aW5nQnVmZmVySGVpZ2h0KSByZXR1cm4geyB3aWR0aDogbWF4LCBoZWlnaHQ6IG1pbiB9XG4gIGVsc2UgcmV0dXJuIHsgd2lkdGg6IG1pbiwgaGVpZ2h0OiBtYXggfVxufVxuXG5mdW5jdGlvbiBnZXRUZXh0dXJlU2NhbGUodGV4dHVyZTogVGV4dHVyZSwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcbiAgcmV0dXJuIHtcbiAgICB4OiB3aWR0aCAvIHRleHR1cmUud2lkdGgsXG4gICAgeTogaGVpZ2h0IC8gdGV4dHVyZS5oZWlnaHQsXG4gIH1cbn1cblxuZnVuY3Rpb24gc2NhbGVCeVBpeGVsUmF0aW8oaW5wdXQ6IG51bWJlcikge1xuICBsZXQgcGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDFcbiAgcmV0dXJuIE1hdGguZmxvb3IoaW5wdXQgKiBwaXhlbFJhdGlvKVxufVxuXG5mdW5jdGlvbiBoYXNoQ29kZShzOiBzdHJpbmcpIHtcbiAgaWYgKHMubGVuZ3RoID09IDApIHJldHVybiAwXG4gIGxldCBoYXNoID0gMFxuICBmb3IgKGxldCBpID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHtcbiAgICBoYXNoID0gKGhhc2ggPDwgNSkgLSBoYXNoICsgcy5jaGFyQ29kZUF0KGkpXG4gICAgaGFzaCB8PSAwIC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlclxuICB9XG4gIHJldHVybiBoYXNoXG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1QkE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQVFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFBQTtBQUFBO0FBSEE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBcUJBO0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7QUFrQkE7QUFHQTs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBO0FBR0E7Ozs7Ozs7Ozs7QUFZQTtBQUdBOzs7Ozs7Ozs7OztBQWFBO0FBR0E7Ozs7Ozs7O0FBVUE7QUFHQTs7Ozs7Ozs7Ozs7Ozs7OztBQWtCQTtBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUErREE7QUFFQTs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFtQkE7QUFHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXFCQTtBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXNCQTtBQUdBOzs7Ozs7Ozs7Ozs7O0FBZUE7QUFHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBbUNBO0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW9CQTtBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFzQ0E7QUFJQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE0QkE7QUFHQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXFCQTtBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQStCQTtBQUdBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBd0JBO0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXVCQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBU0E7QUFVQTtBQUNBOztBQVNBO0FBVUE7QUFRQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFRQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQVNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFBQTs7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./script.ts\n");

/***/ }),

/***/ "./soundcloud-badge.js":
/*!*****************************!*\
  !*** ./soundcloud-badge.js ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// Forked because the original relied on require('fs'), which works ok in Bundler\n// but requires shenanigans in Webpack. It's easier just to inline the files as\n// backtick strings.\n//\n// We still keep soundcloud-badge as a package.json requirement so we\n// don't have to add its dependencies (lazy).\n\nvar resolve = __webpack_require__(/*! soundcloud-resolve */ \"./node_modules/soundcloud-resolve/browser.js\")\nvar fonts = __webpack_require__(/*! google-fonts */ \"./node_modules/google-fonts/index.js\")\nvar minstache = __webpack_require__(/*! minstache */ \"./node_modules/minstache/index.js\")\nvar insert = __webpack_require__(/*! insert-css */ \"./node_modules/insert-css/index.js\")\n\nvar icons = {\n    black: 'https://developers.soundcloud.com/assets/logo_black.png'\n  , white: 'https://developers.soundcloud.com/assets/logo_white.png'\n}\n\nconst template = minstache.compile(`\n<div class=\"npm-scb-wrap\">\n  <div class=\"npm-scb-inner\">\n    <a target=\"_blank\" href=\"{{!urls.song}}\">\n      <img class=\"npm-scb-icon\" src=\"{{!icon}}\">\n      <img class=\"npm-scb-artwork\" src=\"{{!artwork}}\">\n    </a>\n    <div class=\"npm-scb-info\">\n      <a target=\"_blank\" href=\"{{!urls.song}}\">\n        <p class=\"npm-scb-title\">{{!title}}</p>\n      </a>\n      <a target=\"_blank\" href=\"{{!urls.artist}}\">\n        <p class=\"npm-scb-artist\">{{!artist}}</p>\n      </a>\n    </div>\n  </div>\n  <div class=\"npm-scb-now-playing\">\n    Now Playing:\n    <a href=\"{{!urls.song}}\">{{!title}}</a>\n    by\n    <a href=\"{{!urls.artist}}\">{{!artist}}</a>\n  </div>\n</div>\n`)\n\nconst css = `\n.npm-scb-wrap {\n  font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  font-weight: 200;\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 999;\n}\n\n.npm-scb-wrap a {\n  text-decoration: none;\n  color: #000;\n}\n.npm-scb-white\n.npm-scb-wrap a {\n  color: #fff;\n}\n\n.npm-scb-inner {\n  position: absolute;\n  top: -120px; left: 0;\n  padding: 8px;\n  width: 100%;\n  height: 150px;\n  z-index: 2;\n  -webkit-transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\n     -moz-transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\n      -ms-transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\n       -o-transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\n          transition: width 0.5s cubic-bezier(1, 0, 0, 1), top 0.5s;\n}\n.npm-scb-wrap:hover\n.npm-scb-inner {\n  top: 0;\n}\n\n.npm-scb-artwork {\n  position: absolute;\n  top: 16px; left: 16px;\n  width: 104px; height: 104px;\n  box-shadow: 0 0 8px -3px #000;\n  outline: 1px solid rgba(0,0,0,0.1);\n  z-index: 2;\n}\n.npm-scb-white\n.npm-scb-artwork {\n  outline: 1px solid rgba(255,255,255,0.1);\n  box-shadow: 0 0 10px -2px rgba(255,255,255,0.9);\n}\n\n.npm-scb-info {\n  position: absolute;\n  top: 16px;\n  left: 120px;\n  width: 300px;\n  z-index: 1;\n}\n\n.npm-scb-info > a {\n  display: block;\n}\n\n.npm-scb-now-playing {\n  font-size: 12px;\n  line-height: 12px;\n  position: absolute;\n  width: 500px;\n  z-index: 1;\n  padding: 15px 0;\n  top: 0; left: 138px;\n  opacity: 1;\n  -webkit-transition: opacity 0.25s;\n     -moz-transition: opacity 0.25s;\n      -ms-transition: opacity 0.25s;\n       -o-transition: opacity 0.25s;\n          transition: opacity 0.25s;\n}\n\n.npm-scb-wrap:hover\n.npm-scb-now-playing {\n  opacity: 0;\n}\n\n.npm-scb-white\n.npm-scb-now-playing {\n  color: #fff;\n}\n.npm-scb-now-playing > a {\n  font-weight: bold;\n}\n\n.npm-scb-info > a > p {\n  margin: 0;\n  padding-bottom: 0.25em;\n  line-height: 1.35em;\n  margin-left: 1em;\n  font-size: 1em;\n}\n\n.npm-scb-title {\n  font-weight: bold;\n}\n\n.npm-scb-icon {\n  position: absolute;\n  top: 120px;\n  padding-top: 0.75em;\n  left: 16px;\n}\n`\n\nmodule.exports = badge\nfunction noop(err){ if (err) throw err }\n\nvar inserted = false\nvar gwfadded = false\n\nfunction badge(options, callback) {\n  if (!inserted) insert(css), inserted = true\n\n  if (!gwfadded && options.getFonts) {\n    fonts.add({ 'Open Sans': [300, 600] })\n    gwfadded = true\n  }\n\n  options = options || {}\n  callback = callback || noop\n\n  var div   = options.el || document.createElement('div')\n  var icon  = !('dark' in options) || options.dark ? 'black' : 'white'\n  var id    = options.client_id\n  var song  = options.song\n\n  resolve(id, song, function(err, json) {\n    if (err) return callback(err)\n    if (json.kind !== 'track') throw new Error(\n      'soundcloud-badge only supports individual tracks at the moment'\n    )\n\n    div.classList[\n      icon === 'black' ? 'remove' : 'add'\n    ]('npm-scb-white')\n\n    div.innerHTML = template({\n        artwork: json.artwork_url || json.user.avatar_url\n      , artist: json.user.username\n      , title: json.title\n      , icon: icons[icon]\n      , urls: {\n          song: json.permalink_url\n        , artist: json.user.permalink_url\n      }\n    })\n\n    document.body.appendChild(div)\n\n    callback(null, json.stream_url + '?client_id=' + id, json, div)\n  })\n\n  return div\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zb3VuZGNsb3VkLWJhZGdlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc291bmRjbG91ZC1iYWRnZS5qcz8xOGJkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEZvcmtlZCBiZWNhdXNlIHRoZSBvcmlnaW5hbCByZWxpZWQgb24gcmVxdWlyZSgnZnMnKSwgd2hpY2ggd29ya3Mgb2sgaW4gQnVuZGxlclxuLy8gYnV0IHJlcXVpcmVzIHNoZW5hbmlnYW5zIGluIFdlYnBhY2suIEl0J3MgZWFzaWVyIGp1c3QgdG8gaW5saW5lIHRoZSBmaWxlcyBhc1xuLy8gYmFja3RpY2sgc3RyaW5ncy5cbi8vXG4vLyBXZSBzdGlsbCBrZWVwIHNvdW5kY2xvdWQtYmFkZ2UgYXMgYSBwYWNrYWdlLmpzb24gcmVxdWlyZW1lbnQgc28gd2Vcbi8vIGRvbid0IGhhdmUgdG8gYWRkIGl0cyBkZXBlbmRlbmNpZXMgKGxhenkpLlxuXG52YXIgcmVzb2x2ZSA9IHJlcXVpcmUoJ3NvdW5kY2xvdWQtcmVzb2x2ZScpXG52YXIgZm9udHMgPSByZXF1aXJlKCdnb29nbGUtZm9udHMnKVxudmFyIG1pbnN0YWNoZSA9IHJlcXVpcmUoJ21pbnN0YWNoZScpXG52YXIgaW5zZXJ0ID0gcmVxdWlyZSgnaW5zZXJ0LWNzcycpXG5cbnZhciBpY29ucyA9IHtcbiAgICBibGFjazogJ2h0dHBzOi8vZGV2ZWxvcGVycy5zb3VuZGNsb3VkLmNvbS9hc3NldHMvbG9nb19ibGFjay5wbmcnXG4gICwgd2hpdGU6ICdodHRwczovL2RldmVsb3BlcnMuc291bmRjbG91ZC5jb20vYXNzZXRzL2xvZ29fd2hpdGUucG5nJ1xufVxuXG5jb25zdCB0ZW1wbGF0ZSA9IG1pbnN0YWNoZS5jb21waWxlKGBcbjxkaXYgY2xhc3M9XCJucG0tc2NiLXdyYXBcIj5cbiAgPGRpdiBjbGFzcz1cIm5wbS1zY2ItaW5uZXJcIj5cbiAgICA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwie3shdXJscy5zb25nfX1cIj5cbiAgICAgIDxpbWcgY2xhc3M9XCJucG0tc2NiLWljb25cIiBzcmM9XCJ7eyFpY29ufX1cIj5cbiAgICAgIDxpbWcgY2xhc3M9XCJucG0tc2NiLWFydHdvcmtcIiBzcmM9XCJ7eyFhcnR3b3JrfX1cIj5cbiAgICA8L2E+XG4gICAgPGRpdiBjbGFzcz1cIm5wbS1zY2ItaW5mb1wiPlxuICAgICAgPGEgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cInt7IXVybHMuc29uZ319XCI+XG4gICAgICAgIDxwIGNsYXNzPVwibnBtLXNjYi10aXRsZVwiPnt7IXRpdGxlfX08L3A+XG4gICAgICA8L2E+XG4gICAgICA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwie3shdXJscy5hcnRpc3R9fVwiPlxuICAgICAgICA8cCBjbGFzcz1cIm5wbS1zY2ItYXJ0aXN0XCI+e3shYXJ0aXN0fX08L3A+XG4gICAgICA8L2E+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuICA8ZGl2IGNsYXNzPVwibnBtLXNjYi1ub3ctcGxheWluZ1wiPlxuICAgIE5vdyBQbGF5aW5nOlxuICAgIDxhIGhyZWY9XCJ7eyF1cmxzLnNvbmd9fVwiPnt7IXRpdGxlfX08L2E+XG4gICAgYnlcbiAgICA8YSBocmVmPVwie3shdXJscy5hcnRpc3R9fVwiPnt7IWFydGlzdH19PC9hPlxuICA8L2Rpdj5cbjwvZGl2PlxuYClcblxuY29uc3QgY3NzID0gYFxuLm5wbS1zY2Itd3JhcCB7XG4gIGZvbnQtZmFtaWx5OiAnT3BlbiBTYW5zJywgJ0hlbHZldGljYSBOZXVlJywgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjtcbiAgZm9udC13ZWlnaHQ6IDIwMDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHotaW5kZXg6IDk5OTtcbn1cblxuLm5wbS1zY2Itd3JhcCBhIHtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICBjb2xvcjogIzAwMDtcbn1cbi5ucG0tc2NiLXdoaXRlXG4ubnBtLXNjYi13cmFwIGEge1xuICBjb2xvcjogI2ZmZjtcbn1cblxuLm5wbS1zY2ItaW5uZXIge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogLTEyMHB4OyBsZWZ0OiAwO1xuICBwYWRkaW5nOiA4cHg7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDE1MHB4O1xuICB6LWluZGV4OiAyO1xuICAtd2Via2l0LXRyYW5zaXRpb246IHdpZHRoIDAuNXMgY3ViaWMtYmV6aWVyKDEsIDAsIDAsIDEpLCB0b3AgMC41cztcbiAgICAgLW1vei10cmFuc2l0aW9uOiB3aWR0aCAwLjVzIGN1YmljLWJlemllcigxLCAwLCAwLCAxKSwgdG9wIDAuNXM7XG4gICAgICAtbXMtdHJhbnNpdGlvbjogd2lkdGggMC41cyBjdWJpYy1iZXppZXIoMSwgMCwgMCwgMSksIHRvcCAwLjVzO1xuICAgICAgIC1vLXRyYW5zaXRpb246IHdpZHRoIDAuNXMgY3ViaWMtYmV6aWVyKDEsIDAsIDAsIDEpLCB0b3AgMC41cztcbiAgICAgICAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjVzIGN1YmljLWJlemllcigxLCAwLCAwLCAxKSwgdG9wIDAuNXM7XG59XG4ubnBtLXNjYi13cmFwOmhvdmVyXG4ubnBtLXNjYi1pbm5lciB7XG4gIHRvcDogMDtcbn1cblxuLm5wbS1zY2ItYXJ0d29yayB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAxNnB4OyBsZWZ0OiAxNnB4O1xuICB3aWR0aDogMTA0cHg7IGhlaWdodDogMTA0cHg7XG4gIGJveC1zaGFkb3c6IDAgMCA4cHggLTNweCAjMDAwO1xuICBvdXRsaW5lOiAxcHggc29saWQgcmdiYSgwLDAsMCwwLjEpO1xuICB6LWluZGV4OiAyO1xufVxuLm5wbS1zY2Itd2hpdGVcbi5ucG0tc2NiLWFydHdvcmsge1xuICBvdXRsaW5lOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjEpO1xuICBib3gtc2hhZG93OiAwIDAgMTBweCAtMnB4IHJnYmEoMjU1LDI1NSwyNTUsMC45KTtcbn1cblxuLm5wbS1zY2ItaW5mbyB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAxNnB4O1xuICBsZWZ0OiAxMjBweDtcbiAgd2lkdGg6IDMwMHB4O1xuICB6LWluZGV4OiAxO1xufVxuXG4ubnBtLXNjYi1pbmZvID4gYSB7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuXG4ubnBtLXNjYi1ub3ctcGxheWluZyB7XG4gIGZvbnQtc2l6ZTogMTJweDtcbiAgbGluZS1oZWlnaHQ6IDEycHg7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgd2lkdGg6IDUwMHB4O1xuICB6LWluZGV4OiAxO1xuICBwYWRkaW5nOiAxNXB4IDA7XG4gIHRvcDogMDsgbGVmdDogMTM4cHg7XG4gIG9wYWNpdHk6IDE7XG4gIC13ZWJraXQtdHJhbnNpdGlvbjogb3BhY2l0eSAwLjI1cztcbiAgICAgLW1vei10cmFuc2l0aW9uOiBvcGFjaXR5IDAuMjVzO1xuICAgICAgLW1zLXRyYW5zaXRpb246IG9wYWNpdHkgMC4yNXM7XG4gICAgICAgLW8tdHJhbnNpdGlvbjogb3BhY2l0eSAwLjI1cztcbiAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuMjVzO1xufVxuXG4ubnBtLXNjYi13cmFwOmhvdmVyXG4ubnBtLXNjYi1ub3ctcGxheWluZyB7XG4gIG9wYWNpdHk6IDA7XG59XG5cbi5ucG0tc2NiLXdoaXRlXG4ubnBtLXNjYi1ub3ctcGxheWluZyB7XG4gIGNvbG9yOiAjZmZmO1xufVxuLm5wbS1zY2Itbm93LXBsYXlpbmcgPiBhIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5ucG0tc2NiLWluZm8gPiBhID4gcCB7XG4gIG1hcmdpbjogMDtcbiAgcGFkZGluZy1ib3R0b206IDAuMjVlbTtcbiAgbGluZS1oZWlnaHQ6IDEuMzVlbTtcbiAgbWFyZ2luLWxlZnQ6IDFlbTtcbiAgZm9udC1zaXplOiAxZW07XG59XG5cbi5ucG0tc2NiLXRpdGxlIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5ucG0tc2NiLWljb24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMTIwcHg7XG4gIHBhZGRpbmctdG9wOiAwLjc1ZW07XG4gIGxlZnQ6IDE2cHg7XG59XG5gXG5cbm1vZHVsZS5leHBvcnRzID0gYmFkZ2VcbmZ1bmN0aW9uIG5vb3AoZXJyKXsgaWYgKGVycikgdGhyb3cgZXJyIH1cblxudmFyIGluc2VydGVkID0gZmFsc2VcbnZhciBnd2ZhZGRlZCA9IGZhbHNlXG5cbmZ1bmN0aW9uIGJhZGdlKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIGlmICghaW5zZXJ0ZWQpIGluc2VydChjc3MpLCBpbnNlcnRlZCA9IHRydWVcblxuICBpZiAoIWd3ZmFkZGVkICYmIG9wdGlvbnMuZ2V0Rm9udHMpIHtcbiAgICBmb250cy5hZGQoeyAnT3BlbiBTYW5zJzogWzMwMCwgNjAwXSB9KVxuICAgIGd3ZmFkZGVkID0gdHJ1ZVxuICB9XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cbiAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBub29wXG5cbiAgdmFyIGRpdiAgID0gb3B0aW9ucy5lbCB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICB2YXIgaWNvbiAgPSAhKCdkYXJrJyBpbiBvcHRpb25zKSB8fCBvcHRpb25zLmRhcmsgPyAnYmxhY2snIDogJ3doaXRlJ1xuICB2YXIgaWQgICAgPSBvcHRpb25zLmNsaWVudF9pZFxuICB2YXIgc29uZyAgPSBvcHRpb25zLnNvbmdcblxuICByZXNvbHZlKGlkLCBzb25nLCBmdW5jdGlvbihlcnIsIGpzb24pIHtcbiAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyKVxuICAgIGlmIChqc29uLmtpbmQgIT09ICd0cmFjaycpIHRocm93IG5ldyBFcnJvcihcbiAgICAgICdzb3VuZGNsb3VkLWJhZGdlIG9ubHkgc3VwcG9ydHMgaW5kaXZpZHVhbCB0cmFja3MgYXQgdGhlIG1vbWVudCdcbiAgICApXG5cbiAgICBkaXYuY2xhc3NMaXN0W1xuICAgICAgaWNvbiA9PT0gJ2JsYWNrJyA/ICdyZW1vdmUnIDogJ2FkZCdcbiAgICBdKCducG0tc2NiLXdoaXRlJylcblxuICAgIGRpdi5pbm5lckhUTUwgPSB0ZW1wbGF0ZSh7XG4gICAgICAgIGFydHdvcms6IGpzb24uYXJ0d29ya191cmwgfHwganNvbi51c2VyLmF2YXRhcl91cmxcbiAgICAgICwgYXJ0aXN0OiBqc29uLnVzZXIudXNlcm5hbWVcbiAgICAgICwgdGl0bGU6IGpzb24udGl0bGVcbiAgICAgICwgaWNvbjogaWNvbnNbaWNvbl1cbiAgICAgICwgdXJsczoge1xuICAgICAgICAgIHNvbmc6IGpzb24ucGVybWFsaW5rX3VybFxuICAgICAgICAsIGFydGlzdDoganNvbi51c2VyLnBlcm1hbGlua191cmxcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpXG5cbiAgICBjYWxsYmFjayhudWxsLCBqc29uLnN0cmVhbV91cmwgKyAnP2NsaWVudF9pZD0nICsgaWQsIGpzb24sIGRpdilcbiAgfSlcblxuICByZXR1cm4gZGl2XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./soundcloud-badge.js\n");

/***/ })

/******/ });